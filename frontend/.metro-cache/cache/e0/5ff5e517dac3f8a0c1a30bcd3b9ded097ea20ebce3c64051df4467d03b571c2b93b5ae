{"dependencies":[{"name":"./storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":26},"end":{"line":2,"column":45,"index":71}}],"key":"3rLtLV8J3gSw9c8Ep8Wpc3w/Yxg=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.addPayment = addPayment;\n  exports.getPaymentsByEmployer = getPaymentsByEmployer;\n  exports.getPaymentByJobId = getPaymentByJobId;\n  exports.updatePaymentStatus = updatePaymentStatus;\n  exports.clearPayments = clearPayments;\n  var _storage = require(_dependencyMap[0], \"./storage\");\n  // utils/paymentsStore.ts\n\n  const PAYMENTS_KEY = '@backup:payments';\n  async function loadPayments() {\n    const stored = await (0, _storage.getItem)(PAYMENTS_KEY);\n    return stored ?? [];\n  }\n  async function savePayments(payments) {\n    await (0, _storage.setItem)(PAYMENTS_KEY, payments);\n  }\n  async function addPayment(payment) {\n    const payments = await loadPayments();\n    const newPayment = {\n      ...payment,\n      id: 'payment-' + Date.now().toString() + '-' + Math.random().toString(36).slice(2),\n      createdAt: new Date().toISOString()\n    };\n    await savePayments([...payments, newPayment]);\n    return newPayment;\n  }\n  async function getPaymentsByEmployer(employerId) {\n    const payments = await loadPayments();\n    return payments.filter(p => p.employerId === employerId).sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime());\n  }\n  async function getPaymentByJobId(jobId) {\n    const payments = await loadPayments();\n    return payments.find(p => p.jobId === jobId) || null;\n  }\n  async function updatePaymentStatus(paymentId, status) {\n    const payments = await loadPayments();\n    const updated = payments.map(p => {\n      if (p.id === paymentId) {\n        return {\n          ...p,\n          status,\n          paidAt: status === 'paid' ? new Date().toISOString() : p.paidAt\n        };\n      }\n      return p;\n    });\n    await savePayments(updated);\n  }\n  async function clearPayments() {\n    await savePayments([]);\n  }\n});","lineCount":58,"map":[[7,2,30,0,"exports"],[7,9,30,0],[7,10,30,0,"addPayment"],[7,20,30,0],[7,23,30,0,"addPayment"],[7,33,30,0],[8,2,43,0,"exports"],[8,9,43,0],[8,10,43,0,"getPaymentsByEmployer"],[8,31,43,0],[8,34,43,0,"getPaymentsByEmployer"],[8,55,43,0],[9,2,50,0,"exports"],[9,9,50,0],[9,10,50,0,"getPaymentByJobId"],[9,27,50,0],[9,30,50,0,"getPaymentByJobId"],[9,47,50,0],[10,2,55,0,"exports"],[10,9,55,0],[10,10,55,0,"updatePaymentStatus"],[10,29,55,0],[10,32,55,0,"updatePaymentStatus"],[10,51,55,0],[11,2,73,0,"exports"],[11,9,73,0],[11,10,73,0,"clearPayments"],[11,23,73,0],[11,26,73,0,"clearPayments"],[11,39,73,0],[12,2,2,0],[12,6,2,0,"_storage"],[12,14,2,0],[12,17,2,0,"require"],[12,24,2,0],[12,25,2,0,"_dependencyMap"],[12,39,2,0],[13,2,1,0],[15,2,19,0],[15,8,19,6,"PAYMENTS_KEY"],[15,20,19,18],[15,23,19,21],[15,41,19,39],[16,2,21,0],[16,17,21,15,"loadPayments"],[16,29,21,27,"loadPayments"],[16,30,21,27],[16,32,21,50],[17,4,22,2],[17,10,22,8,"stored"],[17,16,22,14],[17,19,22,17],[17,25,22,23],[17,29,22,23,"getItem"],[17,37,22,30],[17,38,22,30,"getItem"],[17,45,22,30],[17,47,22,42,"PAYMENTS_KEY"],[17,59,22,54],[17,60,22,55],[18,4,23,2],[18,11,23,9,"stored"],[18,17,23,15],[18,21,23,19],[18,23,23,21],[19,2,24,0],[20,2,26,0],[20,17,26,15,"savePayments"],[20,29,26,27,"savePayments"],[20,30,26,28,"payments"],[20,38,26,47],[20,40,26,64],[21,4,27,2],[21,10,27,8],[21,14,27,8,"setItem"],[21,22,27,15],[21,23,27,15,"setItem"],[21,30,27,15],[21,32,27,27,"PAYMENTS_KEY"],[21,44,27,39],[21,46,27,41,"payments"],[21,54,27,49],[21,55,27,50],[22,2,28,0],[23,2,30,7],[23,17,30,22,"addPayment"],[23,27,30,32,"addPayment"],[23,28,30,33,"payment"],[23,35,30,75],[23,37,30,95],[24,4,31,2],[24,10,31,8,"payments"],[24,18,31,16],[24,21,31,19],[24,27,31,25,"loadPayments"],[24,39,31,37],[24,40,31,38],[24,41,31,39],[25,4,33,2],[25,10,33,8,"newPayment"],[25,20,33,27],[25,23,33,30],[26,6,34,4],[26,9,34,7,"payment"],[26,16,34,14],[27,6,35,4,"id"],[27,8,35,6],[27,10,35,8],[27,20,35,18],[27,23,35,21,"Date"],[27,27,35,25],[27,28,35,26,"now"],[27,31,35,29],[27,32,35,30],[27,33,35,31],[27,34,35,32,"toString"],[27,42,35,40],[27,43,35,41],[27,44,35,42],[27,47,35,45],[27,50,35,48],[27,53,35,51,"Math"],[27,57,35,55],[27,58,35,56,"random"],[27,64,35,62],[27,65,35,63],[27,66,35,64],[27,67,35,65,"toString"],[27,75,35,73],[27,76,35,74],[27,78,35,76],[27,79,35,77],[27,80,35,78,"slice"],[27,85,35,83],[27,86,35,84],[27,87,35,85],[27,88,35,86],[28,6,36,4,"createdAt"],[28,15,36,13],[28,17,36,15],[28,21,36,19,"Date"],[28,25,36,23],[28,26,36,24],[28,27,36,25],[28,28,36,26,"toISOString"],[28,39,36,37],[28,40,36,38],[29,4,37,2],[29,5,37,3],[30,4,39,2],[30,10,39,8,"savePayments"],[30,22,39,20],[30,23,39,21],[30,24,39,22],[30,27,39,25,"payments"],[30,35,39,33],[30,37,39,35,"newPayment"],[30,47,39,45],[30,48,39,46],[30,49,39,47],[31,4,40,2],[31,11,40,9,"newPayment"],[31,21,40,19],[32,2,41,0],[33,2,43,7],[33,17,43,22,"getPaymentsByEmployer"],[33,38,43,43,"getPaymentsByEmployer"],[33,39,43,44,"employerId"],[33,49,43,62],[33,51,43,84],[34,4,44,2],[34,10,44,8,"payments"],[34,18,44,16],[34,21,44,19],[34,27,44,25,"loadPayments"],[34,39,44,37],[34,40,44,38],[34,41,44,39],[35,4,45,2],[35,11,45,9,"payments"],[35,19,45,17],[35,20,46,5,"filter"],[35,26,46,11],[35,27,46,12,"p"],[35,28,46,13],[35,32,46,17,"p"],[35,33,46,18],[35,34,46,19,"employerId"],[35,44,46,29],[35,49,46,34,"employerId"],[35,59,46,44],[35,60,46,45],[35,61,47,5,"sort"],[35,65,47,9],[35,66,47,10],[35,67,47,11,"a"],[35,68,47,12],[35,70,47,14,"b"],[35,71,47,15],[35,76,47,20],[35,80,47,24,"Date"],[35,84,47,28],[35,85,47,29,"b"],[35,86,47,30],[35,87,47,31,"createdAt"],[35,96,47,40],[35,97,47,41],[35,98,47,42,"getTime"],[35,105,47,49],[35,106,47,50],[35,107,47,51],[35,110,47,54],[35,114,47,58,"Date"],[35,118,47,62],[35,119,47,63,"a"],[35,120,47,64],[35,121,47,65,"createdAt"],[35,130,47,74],[35,131,47,75],[35,132,47,76,"getTime"],[35,139,47,83],[35,140,47,84],[35,141,47,85],[35,142,47,86],[36,2,48,0],[37,2,50,7],[37,17,50,22,"getPaymentByJobId"],[37,34,50,39,"getPaymentByJobId"],[37,35,50,40,"jobId"],[37,40,50,53],[37,42,50,80],[38,4,51,2],[38,10,51,8,"payments"],[38,18,51,16],[38,21,51,19],[38,27,51,25,"loadPayments"],[38,39,51,37],[38,40,51,38],[38,41,51,39],[39,4,52,2],[39,11,52,9,"payments"],[39,19,52,17],[39,20,52,18,"find"],[39,24,52,22],[39,25,52,23,"p"],[39,26,52,24],[39,30,52,28,"p"],[39,31,52,29],[39,32,52,30,"jobId"],[39,37,52,35],[39,42,52,40,"jobId"],[39,47,52,45],[39,48,52,46],[39,52,52,50],[39,56,52,54],[40,2,53,0],[41,2,55,7],[41,17,55,22,"updatePaymentStatus"],[41,36,55,41,"updatePaymentStatus"],[41,37,56,2,"paymentId"],[41,46,56,19],[41,48,57,2,"status"],[41,54,57,23],[41,56,58,17],[42,4,59,2],[42,10,59,8,"payments"],[42,18,59,16],[42,21,59,19],[42,27,59,25,"loadPayments"],[42,39,59,37],[42,40,59,38],[42,41,59,39],[43,4,60,2],[43,10,60,8,"updated"],[43,17,60,15],[43,20,60,18,"payments"],[43,28,60,26],[43,29,60,27,"map"],[43,32,60,30],[43,33,60,31,"p"],[43,34,60,32],[43,38,60,36],[44,6,61,4],[44,10,61,8,"p"],[44,11,61,9],[44,12,61,10,"id"],[44,14,61,12],[44,19,61,17,"paymentId"],[44,28,61,26],[44,30,61,28],[45,8,62,6],[45,15,62,13],[46,10,63,8],[46,13,63,11,"p"],[46,14,63,12],[47,10,64,8,"status"],[47,16,64,14],[48,10,65,8,"paidAt"],[48,16,65,14],[48,18,65,16,"status"],[48,24,65,22],[48,29,65,27],[48,35,65,33],[48,38,65,36],[48,42,65,40,"Date"],[48,46,65,44],[48,47,65,45],[48,48,65,46],[48,49,65,47,"toISOString"],[48,60,65,58],[48,61,65,59],[48,62,65,60],[48,65,65,63,"p"],[48,66,65,64],[48,67,65,65,"paidAt"],[49,8,66,6],[49,9,66,7],[50,6,67,4],[51,6,68,4],[51,13,68,11,"p"],[51,14,68,12],[52,4,69,2],[52,5,69,3],[52,6,69,4],[53,4,70,2],[53,10,70,8,"savePayments"],[53,22,70,20],[53,23,70,21,"updated"],[53,30,70,28],[53,31,70,29],[54,2,71,0],[55,2,73,7],[55,17,73,22,"clearPayments"],[55,30,73,35,"clearPayments"],[55,31,73,35],[55,33,73,53],[56,4,74,2],[56,10,74,8,"savePayments"],[56,22,74,20],[56,23,74,21],[56,25,74,23],[56,26,74,24],[57,2,75,0],[58,0,75,1],[58,3]],"functionMap":{"names":["<global>","loadPayments","savePayments","addPayment","getPaymentsByEmployer","payments.filter$argument_0","payments.filter.sort$argument_0","getPaymentByJobId","payments.find$argument_0","updatePaymentStatus","payments.map$argument_0","clearPayments"],"mappings":"AAA;ACoB;CDG;AEE;CFE;OGE;CHW;OIE;YCG,gCD;UEC,2EF;CJC;OOE;uBCE,sBD;CPC;OSE;+BCK;GDS;CTE;OWE;CXE"},"hasCjsExports":false},"type":"js/module"}]}