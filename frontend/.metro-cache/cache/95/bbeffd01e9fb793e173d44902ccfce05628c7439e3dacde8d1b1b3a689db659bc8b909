{"dependencies":[{"name":"@babel/runtime/helpers/toConsumableArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"kiCFfIx1MWoD4noR0gEoyrFAUKE=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"./storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":45,"index":45}}],"key":"3rLtLV8J3gSw9c8Ep8Wpc3w/Yxg=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.getMessagesForApplication = getMessagesForApplication;\n  exports.addMessage = addMessage;\n  var _babelRuntimeHelpersToConsumableArray = require(_dependencyMap[0], \"@babel/runtime/helpers/toConsumableArray\");\n  var _toConsumableArray = _interopDefault(_babelRuntimeHelpersToConsumableArray);\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[1], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _storage = require(_dependencyMap[2], \"./storage\");\n  var CHAT_KEY = '@shiftmatch:chatMessages';\n  function loadAll() {\n    return _loadAll.apply(this, arguments);\n  }\n  function _loadAll() {\n    _loadAll = (0, _asyncToGenerator.default)(function* () {\n      var _yield$getItem;\n      return (_yield$getItem = yield (0, _storage.getItem)(CHAT_KEY)) != null ? _yield$getItem : [];\n    });\n    return _loadAll.apply(this, arguments);\n  }\n  function saveAll(_x) {\n    return _saveAll.apply(this, arguments);\n  }\n  function _saveAll() {\n    _saveAll = (0, _asyncToGenerator.default)(function* (messages) {\n      yield (0, _storage.setItem)(CHAT_KEY, messages);\n    });\n    return _saveAll.apply(this, arguments);\n  }\n  function getMessagesForApplication(_x2) {\n    return _getMessagesForApplication.apply(this, arguments);\n  }\n  function _getMessagesForApplication() {\n    _getMessagesForApplication = (0, _asyncToGenerator.default)(function* (applicationId) {\n      var all = yield loadAll();\n      return all.filter(function (m) {\n        return m.applicationId === applicationId;\n      }).sort(function (a, b) {\n        return a.createdAt.localeCompare(b.createdAt);\n      });\n    });\n    return _getMessagesForApplication.apply(this, arguments);\n  }\n  function addMessage(_x3, _x4, _x5) {\n    return _addMessage.apply(this, arguments);\n  }\n  function _addMessage() {\n    _addMessage = (0, _asyncToGenerator.default)(function* (applicationId, senderRole, text) {\n      var all = yield loadAll();\n      var msg = {\n        id: 'msg-' + Date.now().toString() + '-' + Math.random().toString(36).slice(2),\n        applicationId: applicationId,\n        senderRole: senderRole,\n        text: text,\n        createdAt: new Date().toISOString()\n      };\n      var next = [].concat((0, _toConsumableArray.default)(all), [msg]);\n      yield saveAll(next);\n      return msg;\n    });\n    return _addMessage.apply(this, arguments);\n  }\n});","lineCount":72,"map":[[12,2,14,0,"exports"],[12,9,14,0],[12,10,14,0,"getMessagesForApplication"],[12,35,14,0],[12,38,14,0,"getMessagesForApplication"],[12,63,14,0],[13,2,21,0,"exports"],[13,9,21,0],[13,10,21,0,"addMessage"],[13,20,21,0],[13,23,21,0,"addMessage"],[13,33,21,0],[14,2,37,1],[14,6,37,1,"_babelRuntimeHelpersToConsumableArray"],[14,43,37,1],[14,46,37,1,"require"],[14,53,37,1],[14,54,37,1,"_dependencyMap"],[14,68,37,1],[15,2,37,1],[15,6,37,1,"_toConsumableArray"],[15,24,37,1],[15,27,37,1,"_interopDefault"],[15,42,37,1],[15,43,37,1,"_babelRuntimeHelpersToConsumableArray"],[15,80,37,1],[16,2,37,1],[16,6,37,1,"_babelRuntimeHelpersAsyncToGenerator"],[16,42,37,1],[16,45,37,1,"require"],[16,52,37,1],[16,53,37,1,"_dependencyMap"],[16,67,37,1],[17,2,37,1],[17,6,37,1,"_asyncToGenerator"],[17,23,37,1],[17,26,37,1,"_interopDefault"],[17,41,37,1],[17,42,37,1,"_babelRuntimeHelpersAsyncToGenerator"],[17,78,37,1],[18,2,1,0],[18,6,1,0,"_storage"],[18,14,1,0],[18,17,1,0,"require"],[18,24,1,0],[18,25,1,0,"_dependencyMap"],[18,39,1,0],[19,2,4,0],[19,6,4,6,"CHAT_KEY"],[19,14,4,14],[19,17,4,17],[19,43,4,43],[20,2,4,44],[20,11,6,15,"loadAll"],[20,18,6,22,"loadAll"],[20,19,6,22],[21,4,6,22],[21,11,6,22,"_loadAll"],[21,19,6,22],[21,20,6,22,"apply"],[21,25,6,22],[21,32,6,22,"arguments"],[21,41,6,22],[22,2,6,22],[23,2,6,22],[23,11,6,22,"_loadAll"],[23,20,6,22],[24,4,6,22,"_loadAll"],[24,12,6,22],[24,19,6,22,"_asyncToGenerator"],[24,36,6,22],[24,37,6,22,"default"],[24,44,6,22],[24,46,6,0],[24,59,6,49],[25,6,6,49],[25,10,6,49,"_yield$getItem"],[25,24,6,49],[26,6,7,2],[26,14,7,2,"_yield$getItem"],[26,28,7,2],[26,37,7,16],[26,41,7,16,"getItem"],[26,49,7,23],[26,50,7,23,"getItem"],[26,57,7,23],[26,59,7,39,"CHAT_KEY"],[26,67,7,47],[26,68,7,48],[26,80,7,48,"_yield$getItem"],[26,94,7,48],[26,97,7,53],[26,99,7,55],[27,4,8,0],[27,5,8,1],[28,4,8,1],[28,11,8,1,"_loadAll"],[28,19,8,1],[28,20,8,1,"apply"],[28,25,8,1],[28,32,8,1,"arguments"],[28,41,8,1],[29,2,8,1],[30,2,8,1],[30,11,10,15,"saveAll"],[30,18,10,22,"saveAll"],[30,19,10,22,"_x"],[30,21,10,22],[31,4,10,22],[31,11,10,22,"_saveAll"],[31,19,10,22],[31,20,10,22,"apply"],[31,25,10,22],[31,32,10,22,"arguments"],[31,41,10,22],[32,2,10,22],[33,2,10,22],[33,11,10,22,"_saveAll"],[33,20,10,22],[34,4,10,22,"_saveAll"],[34,12,10,22],[34,19,10,22,"_asyncToGenerator"],[34,36,10,22],[34,37,10,22,"default"],[34,44,10,22],[34,46,10,0],[34,57,10,23,"messages"],[34,65,10,46],[34,67,10,63],[35,6,11,2],[35,12,11,8],[35,16,11,8,"setItem"],[35,24,11,15],[35,25,11,15,"setItem"],[35,32,11,15],[35,34,11,16,"CHAT_KEY"],[35,42,11,24],[35,44,11,26,"messages"],[35,52,11,34],[35,53,11,35],[36,4,12,0],[36,5,12,1],[37,4,12,1],[37,11,12,1,"_saveAll"],[37,19,12,1],[37,20,12,1,"apply"],[37,25,12,1],[37,32,12,1,"arguments"],[37,41,12,1],[38,2,12,1],[39,2,12,1],[39,11,14,22,"getMessagesForApplication"],[39,36,14,47,"getMessagesForApplication"],[39,37,14,47,"_x2"],[39,40,14,47],[40,4,14,47],[40,11,14,47,"_getMessagesForApplication"],[40,37,14,47],[40,38,14,47,"apply"],[40,43,14,47],[40,50,14,47,"arguments"],[40,59,14,47],[41,2,14,47],[42,2,14,47],[42,11,14,47,"_getMessagesForApplication"],[42,38,14,47],[43,4,14,47,"_getMessagesForApplication"],[43,30,14,47],[43,37,14,47,"_asyncToGenerator"],[43,54,14,47],[43,55,14,47,"default"],[43,62,14,47],[43,64,14,7],[43,75,14,48,"applicationId"],[43,88,14,69],[43,90,14,95],[44,6,15,2],[44,10,15,8,"all"],[44,13,15,11],[44,22,15,20,"loadAll"],[44,29,15,27],[44,30,15,28],[44,31,15,29],[45,6,16,2],[45,13,16,9,"all"],[45,16,16,12],[45,17,17,5,"filter"],[45,23,17,11],[45,24,17,12],[45,34,17,12,"m"],[45,35,17,13],[46,8,17,13],[46,15,17,17,"m"],[46,16,17,18],[46,17,17,19,"applicationId"],[46,30,17,32],[46,35,17,37,"applicationId"],[46,48,17,50],[47,6,17,50],[47,8,17,51],[47,9,18,5,"sort"],[47,13,18,9],[47,14,18,10],[47,24,18,11,"a"],[47,25,18,12],[47,27,18,14,"b"],[47,28,18,15],[48,8,18,15],[48,15,18,20,"a"],[48,16,18,21],[48,17,18,22,"createdAt"],[48,26,18,31],[48,27,18,32,"localeCompare"],[48,40,18,45],[48,41,18,46,"b"],[48,42,18,47],[48,43,18,48,"createdAt"],[48,52,18,57],[48,53,18,58],[49,6,18,58],[49,8,18,59],[50,4,19,0],[50,5,19,1],[51,4,19,1],[51,11,19,1,"_getMessagesForApplication"],[51,37,19,1],[51,38,19,1,"apply"],[51,43,19,1],[51,50,19,1,"arguments"],[51,59,19,1],[52,2,19,1],[53,2,19,1],[53,11,21,22,"addMessage"],[53,21,21,32,"addMessage"],[53,22,21,32,"_x3"],[53,25,21,32],[53,27,21,32,"_x4"],[53,30,21,32],[53,32,21,32,"_x5"],[53,35,21,32],[54,4,21,32],[54,11,21,32,"_addMessage"],[54,22,21,32],[54,23,21,32,"apply"],[54,28,21,32],[54,35,21,32,"arguments"],[54,44,21,32],[55,2,21,32],[56,2,21,32],[56,11,21,32,"_addMessage"],[56,23,21,32],[57,4,21,32,"_addMessage"],[57,15,21,32],[57,22,21,32,"_asyncToGenerator"],[57,39,21,32],[57,40,21,32,"default"],[57,47,21,32],[57,49,21,7],[57,60,22,2,"applicationId"],[57,73,22,23],[57,75,23,2,"senderRole"],[57,85,23,28],[57,87,24,2,"text"],[57,91,24,14],[57,93,25,24],[58,6,26,2],[58,10,26,8,"all"],[58,13,26,11],[58,22,26,20,"loadAll"],[58,29,26,27],[58,30,26,28],[58,31,26,29],[59,6,27,2],[59,10,27,8,"msg"],[59,13,27,24],[59,16,27,27],[60,8,28,4,"id"],[60,10,28,6],[60,12,28,8],[60,18,28,14],[60,21,28,17,"Date"],[60,25,28,21],[60,26,28,22,"now"],[60,29,28,25],[60,30,28,26],[60,31,28,27],[60,32,28,28,"toString"],[60,40,28,36],[60,41,28,37],[60,42,28,38],[60,45,28,41],[60,48,28,44],[60,51,28,47,"Math"],[60,55,28,51],[60,56,28,52,"random"],[60,62,28,58],[60,63,28,59],[60,64,28,60],[60,65,28,61,"toString"],[60,73,28,69],[60,74,28,70],[60,76,28,72],[60,77,28,73],[60,78,28,74,"slice"],[60,83,28,79],[60,84,28,80],[60,85,28,81],[60,86,28,82],[61,8,29,4,"applicationId"],[61,21,29,17],[61,23,29,4,"applicationId"],[61,36,29,17],[62,8,30,4,"senderRole"],[62,18,30,14],[62,20,30,4,"senderRole"],[62,30,30,14],[63,8,31,4,"text"],[63,12,31,8],[63,14,31,4,"text"],[63,18,31,8],[64,8,32,4,"createdAt"],[64,17,32,13],[64,19,32,15],[64,23,32,19,"Date"],[64,27,32,23],[64,28,32,24],[64,29,32,25],[64,30,32,26,"toISOString"],[64,41,32,37],[64,42,32,38],[65,6,33,2],[65,7,33,3],[66,6,34,2],[66,10,34,8,"next"],[66,14,34,12],[66,20,34,12,"concat"],[66,26,34,12],[66,31,34,12,"_toConsumableArray"],[66,49,34,12],[66,50,34,12,"default"],[66,57,34,12],[66,59,34,19,"all"],[66,62,34,22],[66,66,34,24,"msg"],[66,69,34,27],[66,71,34,28],[67,6,35,2],[67,12,35,8,"saveAll"],[67,19,35,15],[67,20,35,16,"next"],[67,24,35,20],[67,25,35,21],[68,6,36,2],[68,13,36,9,"msg"],[68,16,36,12],[69,4,37,0],[69,5,37,1],[70,4,37,1],[70,11,37,1,"_addMessage"],[70,22,37,1],[70,23,37,1,"apply"],[70,28,37,1],[70,35,37,1,"arguments"],[70,44,37,1],[71,2,37,1],[72,0,37,1],[72,3]],"functionMap":{"names":["<global>","loadAll","saveAll","getMessagesForApplication","all.filter$argument_0","all.filter.sort$argument_0","addMessage"],"mappings":"AAA;ACK;CDE;AEE;CFE;OGE;YCG,sCD;UEC,gDF;CHC;OME;CNgB"},"hasCjsExports":false},"type":"js/module"}]}