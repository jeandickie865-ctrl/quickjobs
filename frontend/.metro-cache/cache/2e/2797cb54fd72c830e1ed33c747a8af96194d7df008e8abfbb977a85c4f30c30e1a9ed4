{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"./storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":24},"end":{"line":2,"column":45,"index":69}}],"key":"3rLtLV8J3gSw9c8Ep8Wpc3w/Yxg=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.getReviews = getReviews;\n  exports.addReview = addReview;\n  exports.getReviewsForWorker = getReviewsForWorker;\n  exports.getReviewForJob = getReviewForJob;\n  exports.calculateAverageRating = calculateAverageRating;\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _storage = require(_dependencyMap[1], \"./storage\");\n  // utils/reviewStore.ts\n\n  var REVIEW_KEY = '@shiftmatch:reviews';\n\n  /**\n   * Alle Reviews aus AsyncStorage laden\n   */\n  function getReviews() {\n    return _getReviews.apply(this, arguments);\n  }\n  /**\n   * Neue Review hinzufügen\n   * Verhindert Duplikate: Wenn bereits eine Review für jobId + workerId + employerId existiert,\n   * wird diese überschrieben\n   */\n  function _getReviews() {\n    _getReviews = (0, _asyncToGenerator.default)(function* () {\n      var reviews = yield (0, _storage.getItem)(REVIEW_KEY);\n      return reviews ?? [];\n    });\n    return _getReviews.apply(this, arguments);\n  }\n  function addReview(_x) {\n    return _addReview.apply(this, arguments);\n  }\n  /**\n   * Alle Reviews für einen bestimmten Worker laden\n   */\n  function _addReview() {\n    _addReview = (0, _asyncToGenerator.default)(function* (review) {\n      var reviews = yield getReviews();\n\n      // Prüfen ob bereits eine Review für diesen Job + Worker + Employer existiert\n      var existingIndex = reviews.findIndex(r => r.jobId === review.jobId && r.workerId === review.workerId && r.employerId === review.employerId);\n      if (existingIndex >= 0) {\n        // Existierende Review überschreiben\n        console.log('⚠️ Review existiert bereits, wird überschrieben');\n        reviews[existingIndex] = review;\n      } else {\n        // Neue Review hinzufügen\n        reviews.push(review);\n      }\n      yield (0, _storage.setItem)(REVIEW_KEY, reviews);\n      console.log('✅ Review gespeichert:', review);\n    });\n    return _addReview.apply(this, arguments);\n  }\n  function getReviewsForWorker(_x2) {\n    return _getReviewsForWorker.apply(this, arguments);\n  }\n  /**\n   * Prüfen ob für einen Job bereits eine Review existiert\n   */\n  function _getReviewsForWorker() {\n    _getReviewsForWorker = (0, _asyncToGenerator.default)(function* (workerId) {\n      var reviews = yield getReviews();\n      return reviews.filter(r => r.workerId === workerId);\n    });\n    return _getReviewsForWorker.apply(this, arguments);\n  }\n  function getReviewForJob(_x3, _x4, _x5) {\n    return _getReviewForJob.apply(this, arguments);\n  }\n  /**\n   * Durchschnittliche Bewertung für einen Worker berechnen\n   */\n  function _getReviewForJob() {\n    _getReviewForJob = (0, _asyncToGenerator.default)(function* (jobId, workerId, employerId) {\n      var reviews = yield getReviews();\n      return reviews.find(r => r.jobId === jobId && r.workerId === workerId && r.employerId === employerId);\n    });\n    return _getReviewForJob.apply(this, arguments);\n  }\n  function calculateAverageRating(reviews) {\n    if (reviews.length === 0) return 0;\n    var sum = reviews.reduce((acc, r) => acc + r.rating, 0);\n    return sum / reviews.length;\n  }\n});","lineCount":98,"map":[[12,2,10,0,"exports"],[12,9,10,0],[12,10,10,0,"getReviews"],[12,20,10,0],[12,23,10,0,"getReviews"],[12,33,10,0],[13,2,20,0,"exports"],[13,9,20,0],[13,10,20,0,"addReview"],[13,19,20,0],[13,22,20,0,"addReview"],[13,31,20,0],[14,2,47,0,"exports"],[14,9,47,0],[14,10,47,0,"getReviewsForWorker"],[14,29,47,0],[14,32,47,0,"getReviewsForWorker"],[14,51,47,0],[15,2,55,0,"exports"],[15,9,55,0],[15,10,55,0,"getReviewForJob"],[15,25,55,0],[15,28,55,0,"getReviewForJob"],[15,43,55,0],[16,2,72,0,"exports"],[16,9,72,0],[16,10,72,0,"calculateAverageRating"],[16,32,72,0],[16,35,72,0,"calculateAverageRating"],[16,57,72,0],[17,2,76,1],[17,6,76,1,"_babelRuntimeHelpersAsyncToGenerator"],[17,42,76,1],[17,45,76,1,"require"],[17,52,76,1],[17,53,76,1,"_dependencyMap"],[17,67,76,1],[18,2,76,1],[18,6,76,1,"_asyncToGenerator"],[18,23,76,1],[18,26,76,1,"_interopDefault"],[18,41,76,1],[18,42,76,1,"_babelRuntimeHelpersAsyncToGenerator"],[18,78,76,1],[19,2,2,0],[19,6,2,0,"_storage"],[19,14,2,0],[19,17,2,0,"require"],[19,24,2,0],[19,25,2,0,"_dependencyMap"],[19,39,2,0],[20,2,1,0],[22,2,5,0],[22,6,5,6,"REVIEW_KEY"],[22,16,5,16],[22,19,5,19],[22,40,5,40],[24,2,7,0],[25,0,8,0],[26,0,9,0],[27,2,7,0],[27,11,10,22,"getReviews"],[27,21,10,32,"getReviews"],[27,22,10,32],[28,4,10,32],[28,11,10,32,"_getReviews"],[28,22,10,32],[28,23,10,32,"apply"],[28,28,10,32],[28,35,10,32,"arguments"],[28,44,10,32],[29,2,10,32],[30,2,15,0],[31,0,16,0],[32,0,17,0],[33,0,18,0],[34,0,19,0],[35,2,15,0],[35,11,15,0,"_getReviews"],[35,23,15,0],[36,4,15,0,"_getReviews"],[36,15,15,0],[36,22,15,0,"_asyncToGenerator"],[36,39,15,0],[36,40,15,0,"default"],[36,47,15,0],[36,49,10,7],[36,62,10,54],[37,6,11,2],[37,10,11,8,"reviews"],[37,17,11,15],[37,26,11,24],[37,30,11,24,"getItem"],[37,38,11,31],[37,39,11,31,"getItem"],[37,46,11,31],[37,48,11,42,"REVIEW_KEY"],[37,58,11,52],[37,59,11,53],[38,6,12,2],[38,13,12,9,"reviews"],[38,20,12,16],[38,24,12,20],[38,26,12,22],[39,4,13,0],[39,5,13,1],[40,4,13,1],[40,11,13,1,"_getReviews"],[40,22,13,1],[40,23,13,1,"apply"],[40,28,13,1],[40,35,13,1,"arguments"],[40,44,13,1],[41,2,13,1],[42,2,13,1],[42,11,20,22,"addReview"],[42,20,20,31,"addReview"],[42,21,20,31,"_x"],[42,23,20,31],[43,4,20,31],[43,11,20,31,"_addReview"],[43,21,20,31],[43,22,20,31,"apply"],[43,27,20,31],[43,34,20,31,"arguments"],[43,43,20,31],[44,2,20,31],[45,2,44,0],[46,0,45,0],[47,0,46,0],[48,2,44,0],[48,11,44,0,"_addReview"],[48,22,44,0],[49,4,44,0,"_addReview"],[49,14,44,0],[49,21,44,0,"_asyncToGenerator"],[49,38,44,0],[49,39,44,0,"default"],[49,46,44,0],[49,48,20,7],[49,59,20,32,"review"],[49,65,20,46],[49,67,20,63],[50,6,21,2],[50,10,21,8,"reviews"],[50,17,21,15],[50,26,21,24,"getReviews"],[50,36,21,34],[50,37,21,35],[50,38,21,36],[52,6,23,2],[53,6,24,2],[53,10,24,8,"existingIndex"],[53,23,24,21],[53,26,24,24,"reviews"],[53,33,24,31],[53,34,24,32,"findIndex"],[53,43,24,41],[53,44,25,5,"r"],[53,45,25,6],[53,49,26,6,"r"],[53,50,26,7],[53,51,26,8,"jobId"],[53,56,26,13],[53,61,26,18,"review"],[53,67,26,24],[53,68,26,25,"jobId"],[53,73,26,30],[53,77,27,6,"r"],[53,78,27,7],[53,79,27,8,"workerId"],[53,87,27,16],[53,92,27,21,"review"],[53,98,27,27],[53,99,27,28,"workerId"],[53,107,27,36],[53,111,28,6,"r"],[53,112,28,7],[53,113,28,8,"employerId"],[53,123,28,18],[53,128,28,23,"review"],[53,134,28,29],[53,135,28,30,"employerId"],[53,145,29,2],[53,146,29,3],[54,6,31,2],[54,10,31,6,"existingIndex"],[54,23,31,19],[54,27,31,23],[54,28,31,24],[54,30,31,26],[55,8,32,4],[56,8,33,4,"console"],[56,15,33,11],[56,16,33,12,"log"],[56,19,33,15],[56,20,33,16],[56,69,33,65],[56,70,33,66],[57,8,34,4,"reviews"],[57,15,34,11],[57,16,34,12,"existingIndex"],[57,29,34,25],[57,30,34,26],[57,33,34,29,"review"],[57,39,34,35],[58,6,35,2],[58,7,35,3],[58,13,35,9],[59,8,36,4],[60,8,37,4,"reviews"],[60,15,37,11],[60,16,37,12,"push"],[60,20,37,16],[60,21,37,17,"review"],[60,27,37,23],[60,28,37,24],[61,6,38,2],[62,6,40,2],[62,12,40,8],[62,16,40,8,"setItem"],[62,24,40,15],[62,25,40,15,"setItem"],[62,32,40,15],[62,34,40,16,"REVIEW_KEY"],[62,44,40,26],[62,46,40,28,"reviews"],[62,53,40,35],[62,54,40,36],[63,6,41,2,"console"],[63,13,41,9],[63,14,41,10,"log"],[63,17,41,13],[63,18,41,14],[63,41,41,37],[63,43,41,39,"review"],[63,49,41,45],[63,50,41,46],[64,4,42,0],[64,5,42,1],[65,4,42,1],[65,11,42,1,"_addReview"],[65,21,42,1],[65,22,42,1,"apply"],[65,27,42,1],[65,34,42,1,"arguments"],[65,43,42,1],[66,2,42,1],[67,2,42,1],[67,11,47,22,"getReviewsForWorker"],[67,30,47,41,"getReviewsForWorker"],[67,31,47,41,"_x2"],[67,34,47,41],[68,4,47,41],[68,11,47,41,"_getReviewsForWorker"],[68,31,47,41],[68,32,47,41,"apply"],[68,37,47,41],[68,44,47,41,"arguments"],[68,53,47,41],[69,2,47,41],[70,2,52,0],[71,0,53,0],[72,0,54,0],[73,2,52,0],[73,11,52,0,"_getReviewsForWorker"],[73,32,52,0],[74,4,52,0,"_getReviewsForWorker"],[74,24,52,0],[74,31,52,0,"_asyncToGenerator"],[74,48,52,0],[74,49,52,0,"default"],[74,56,52,0],[74,58,47,7],[74,69,47,42,"workerId"],[74,77,47,58],[74,79,47,79],[75,6,48,2],[75,10,48,8,"reviews"],[75,17,48,15],[75,26,48,24,"getReviews"],[75,36,48,34],[75,37,48,35],[75,38,48,36],[76,6,49,2],[76,13,49,9,"reviews"],[76,20,49,16],[76,21,49,17,"filter"],[76,27,49,23],[76,28,49,25,"r"],[76,29,49,26],[76,33,49,31,"r"],[76,34,49,32],[76,35,49,33,"workerId"],[76,43,49,41],[76,48,49,46,"workerId"],[76,56,49,54],[76,57,49,55],[77,4,50,0],[77,5,50,1],[78,4,50,1],[78,11,50,1,"_getReviewsForWorker"],[78,31,50,1],[78,32,50,1,"apply"],[78,37,50,1],[78,44,50,1,"arguments"],[78,53,50,1],[79,2,50,1],[80,2,50,1],[80,11,55,22,"getReviewForJob"],[80,26,55,37,"getReviewForJob"],[80,27,55,37,"_x3"],[80,30,55,37],[80,32,55,37,"_x4"],[80,35,55,37],[80,37,55,37,"_x5"],[80,40,55,37],[81,4,55,37],[81,11,55,37,"_getReviewForJob"],[81,27,55,37],[81,28,55,37,"apply"],[81,33,55,37],[81,40,55,37,"arguments"],[81,49,55,37],[82,2,55,37],[83,2,69,0],[84,0,70,0],[85,0,71,0],[86,2,69,0],[86,11,69,0,"_getReviewForJob"],[86,28,69,0],[87,4,69,0,"_getReviewForJob"],[87,20,69,0],[87,27,69,0,"_asyncToGenerator"],[87,44,69,0],[87,45,69,0,"default"],[87,52,69,0],[87,54,55,7],[87,65,56,2,"jobId"],[87,70,56,15],[87,72,57,2,"workerId"],[87,80,57,18],[87,82,58,2,"employerId"],[87,92,58,20],[87,94,59,31],[88,6,60,2],[88,10,60,8,"reviews"],[88,17,60,15],[88,26,60,24,"getReviews"],[88,36,60,34],[88,37,60,35],[88,38,60,36],[89,6,61,2],[89,13,61,9,"reviews"],[89,20,61,16],[89,21,61,17,"find"],[89,25,61,21],[89,26,62,5,"r"],[89,27,62,6],[89,31,63,6,"r"],[89,32,63,7],[89,33,63,8,"jobId"],[89,38,63,13],[89,43,63,18,"jobId"],[89,48,63,23],[89,52,64,6,"r"],[89,53,64,7],[89,54,64,8,"workerId"],[89,62,64,16],[89,67,64,21,"workerId"],[89,75,64,29],[89,79,65,6,"r"],[89,80,65,7],[89,81,65,8,"employerId"],[89,91,65,18],[89,96,65,23,"employerId"],[89,106,66,2],[89,107,66,3],[90,4,67,0],[90,5,67,1],[91,4,67,1],[91,11,67,1,"_getReviewForJob"],[91,27,67,1],[91,28,67,1,"apply"],[91,33,67,1],[91,40,67,1,"arguments"],[91,49,67,1],[92,2,67,1],[93,2,72,7],[93,11,72,16,"calculateAverageRating"],[93,33,72,38,"calculateAverageRating"],[93,34,72,39,"reviews"],[93,41,72,56],[93,43,72,66],[94,4,73,2],[94,8,73,6,"reviews"],[94,15,73,13],[94,16,73,14,"length"],[94,22,73,20],[94,27,73,25],[94,28,73,26],[94,30,73,28],[94,37,73,35],[94,38,73,36],[95,4,74,2],[95,8,74,8,"sum"],[95,11,74,11],[95,14,74,14,"reviews"],[95,21,74,21],[95,22,74,22,"reduce"],[95,28,74,28],[95,29,74,29],[95,30,74,30,"acc"],[95,33,74,33],[95,35,74,35,"r"],[95,36,74,36],[95,41,74,41,"acc"],[95,44,74,44],[95,47,74,47,"r"],[95,48,74,48],[95,49,74,49,"rating"],[95,55,74,55],[95,57,74,57],[95,58,74,58],[95,59,74,59],[96,4,75,2],[96,11,75,9,"sum"],[96,14,75,12],[96,17,75,15,"reviews"],[96,24,75,22],[96,25,75,23,"length"],[96,31,75,29],[97,2,76,0],[98,0,76,1],[98,3]],"functionMap":{"names":["<global>","getReviews","addReview","reviews.findIndex$argument_0","getReviewsForWorker","reviews.filter$argument_0","getReviewForJob","reviews.find$argument_0","calculateAverageRating","reviews.reduce$argument_0"],"mappings":"AAA;OCS;CDG;OEO;ICK;wCDG;CFc;OIK;wBCE,8BD;CJC;OMK;ICO;iCDG;CNE;OQK;6BCE,0BD;CRE"},"hasCjsExports":false},"type":"js/module"}]}