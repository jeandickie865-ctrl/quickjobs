{"dependencies":[{"name":"expo-modules-core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":82,"index":82}}],"key":"fU8WLIPqoAGygnPbZ/QJiQQfXEY=","exportNames":["*"],"imports":1}},{"name":"./NotificationsHandlerModule","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":83},"end":{"line":2,"column":70,"index":153}}],"key":"UF+u43m6G1FFZlom/NfKv8+5frg=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"NotificationTimeoutError\", {\n    enumerable: true,\n    get: function () {\n      return NotificationTimeoutError;\n    }\n  });\n  exports.setNotificationHandler = setNotificationHandler;\n  var _expoModulesCore = require(_dependencyMap[0], \"expo-modules-core\");\n  var _NotificationsHandlerModule = require(_dependencyMap[1], \"./NotificationsHandlerModule\");\n  var NotificationsHandlerModule = _interopDefault(_NotificationsHandlerModule);\n  /**\n   * @hidden\n   */\n  class NotificationTimeoutError extends _expoModulesCore.CodedError {\n    constructor(notificationId, notification) {\n      super('ERR_NOTIFICATION_TIMEOUT', `Notification handling timed out for ID ${notificationId}.`);\n      this.info = {\n        id: notificationId,\n        notification\n      };\n    }\n  }\n  // Web uses SyntheticEventEmitter\n  const notificationEmitter = new _expoModulesCore.EventEmitter(NotificationsHandlerModule.default);\n  const handleNotificationEventName = 'onHandleNotification';\n  const handleNotificationTimeoutEventName = 'onHandleNotificationTimeout';\n  let handleSubscription = null;\n  let handleTimeoutSubscription = null;\n  /**\n   * When a notification is received while the app is running, using this function you can set a callback that will decide\n   * whether the notification should be shown to the user or not.\n   *\n   * When a notification is received, `handleNotification` is called with the incoming notification as an argument.\n   * The function should respond with a behavior object within 3 seconds, otherwise, the notification will be discarded.\n   * If the notification is handled successfully, `handleSuccess` is called with the identifier of the notification,\n   * otherwise (or on timeout) `handleError` will be called.\n   *\n   * The default behavior when the handler is not set or does not respond in time is not to show the notification.\n   * @param handler A single parameter which should be either `null` (if you want to clear the handler) or a [`NotificationHandler`](#notificationhandler) object.\n   *\n   * @example Implementing a notification handler that always shows the notification when it is received.\n   * ```jsx\n   * import * as Notifications from 'expo-notifications';\n   *\n   * Notifications.setNotificationHandler({\n   *   handleNotification: async () => ({\n   *     shouldShowAlert: true,\n   *     shouldPlaySound: false,\n   *     shouldSetBadge: false,\n   *   }),\n   * });\n   * ```\n   * @header inForeground\n   */\n  function setNotificationHandler(handler) {\n    if (handleSubscription) {\n      handleSubscription.remove();\n      handleSubscription = null;\n    }\n    if (handleTimeoutSubscription) {\n      handleTimeoutSubscription.remove();\n      handleTimeoutSubscription = null;\n    }\n    if (handler) {\n      handleSubscription = notificationEmitter.addListener(handleNotificationEventName, async ({\n        id,\n        notification\n      }) => {\n        if (!NotificationsHandlerModule.default.handleNotificationAsync) {\n          handler.handleError?.(id, new _expoModulesCore.UnavailabilityError('Notifications', 'handleNotificationAsync'));\n          return;\n        }\n        try {\n          const behavior = await handler.handleNotification(notification);\n          await NotificationsHandlerModule.default.handleNotificationAsync(id, behavior);\n          handler.handleSuccess?.(id);\n        } catch (error) {\n          handler.handleError?.(id, error);\n        }\n      });\n      handleTimeoutSubscription = notificationEmitter.addListener(handleNotificationTimeoutEventName, ({\n        id,\n        notification\n      }) => handler.handleError?.(id, new NotificationTimeoutError(id, notification)));\n    }\n  }\n});","lineCount":98,"map":[[12,2,6,0,"Object"],[12,8,6,0],[12,9,6,0,"defineProperty"],[12,23,6,0],[12,24,6,0,"exports"],[12,31,6,0],[13,4,6,0,"enumerable"],[13,14,6,0],[14,4,6,0,"get"],[14,7,6,0],[14,18,6,0,"get"],[14,19,6,0],[15,6,6,0],[15,13,6,0,"NotificationTimeoutError"],[15,37,6,0],[16,4,6,0],[17,2,6,0],[18,2,45,0,"exports"],[18,9,45,0],[18,10,45,0,"setNotificationHandler"],[18,32,45,0],[18,35,45,0,"setNotificationHandler"],[18,57,45,0],[19,2,1,0],[19,6,1,0,"_expoModulesCore"],[19,22,1,0],[19,25,1,0,"require"],[19,32,1,0],[19,33,1,0,"_dependencyMap"],[19,47,1,0],[20,2,2,0],[20,6,2,0,"_NotificationsHandlerModule"],[20,33,2,0],[20,36,2,0,"require"],[20,43,2,0],[20,44,2,0,"_dependencyMap"],[20,58,2,0],[21,2,2,0],[21,6,2,0,"NotificationsHandlerModule"],[21,32,2,0],[21,35,2,0,"_interopDefault"],[21,50,2,0],[21,51,2,0,"_NotificationsHandlerModule"],[21,78,2,0],[22,2,3,0],[23,0,4,0],[24,0,5,0],[25,2,6,7],[25,8,6,13,"NotificationTimeoutError"],[25,32,6,37],[25,41,6,46,"CodedError"],[25,57,6,56],[25,58,6,56,"CodedError"],[25,68,6,56],[25,69,6,57],[26,4,8,4,"constructor"],[26,15,8,15,"constructor"],[26,16,8,16,"notificationId"],[26,30,8,30],[26,32,8,32,"notification"],[26,44,8,44],[26,46,8,46],[27,6,9,8],[27,11,9,13],[27,12,9,14],[27,38,9,40],[27,40,9,42],[27,82,9,84,"notificationId"],[27,96,9,98],[27,99,9,101],[27,100,9,102],[28,6,10,8],[28,10,10,12],[28,11,10,13,"info"],[28,15,10,17],[28,18,10,20],[29,8,10,22,"id"],[29,10,10,24],[29,12,10,26,"notificationId"],[29,26,10,40],[30,8,10,42,"notification"],[31,6,10,55],[31,7,10,56],[32,4,11,4],[33,2,12,0],[34,2,13,0],[35,2,14,0],[35,8,14,6,"notificationEmitter"],[35,27,14,25],[35,30,14,28],[35,34,14,32,"EventEmitter"],[35,50,14,44],[35,51,14,44,"EventEmitter"],[35,63,14,44],[35,64,14,45,"NotificationsHandlerModule"],[35,90,14,71],[35,91,14,71,"default"],[35,98,14,71],[35,99,14,72],[36,2,15,0],[36,8,15,6,"handleNotificationEventName"],[36,35,15,33],[36,38,15,36],[36,60,15,58],[37,2,16,0],[37,8,16,6,"handleNotificationTimeoutEventName"],[37,42,16,40],[37,45,16,43],[37,74,16,72],[38,2,17,0],[38,6,17,4,"handleSubscription"],[38,24,17,22],[38,27,17,25],[38,31,17,29],[39,2,18,0],[39,6,18,4,"handleTimeoutSubscription"],[39,31,18,29],[39,34,18,32],[39,38,18,36],[40,2,19,0],[41,0,20,0],[42,0,21,0],[43,0,22,0],[44,0,23,0],[45,0,24,0],[46,0,25,0],[47,0,26,0],[48,0,27,0],[49,0,28,0],[50,0,29,0],[51,0,30,0],[52,0,31,0],[53,0,32,0],[54,0,33,0],[55,0,34,0],[56,0,35,0],[57,0,36,0],[58,0,37,0],[59,0,38,0],[60,0,39,0],[61,0,40,0],[62,0,41,0],[63,0,42,0],[64,0,43,0],[65,0,44,0],[66,2,45,7],[66,11,45,16,"setNotificationHandler"],[66,33,45,38,"setNotificationHandler"],[66,34,45,39,"handler"],[66,41,45,46],[66,43,45,48],[67,4,46,4],[67,8,46,8,"handleSubscription"],[67,26,46,26],[67,28,46,28],[68,6,47,8,"handleSubscription"],[68,24,47,26],[68,25,47,27,"remove"],[68,31,47,33],[68,32,47,34],[68,33,47,35],[69,6,48,8,"handleSubscription"],[69,24,48,26],[69,27,48,29],[69,31,48,33],[70,4,49,4],[71,4,50,4],[71,8,50,8,"handleTimeoutSubscription"],[71,33,50,33],[71,35,50,35],[72,6,51,8,"handleTimeoutSubscription"],[72,31,51,33],[72,32,51,34,"remove"],[72,38,51,40],[72,39,51,41],[72,40,51,42],[73,6,52,8,"handleTimeoutSubscription"],[73,31,52,33],[73,34,52,36],[73,38,52,40],[74,4,53,4],[75,4,54,4],[75,8,54,8,"handler"],[75,15,54,15],[75,17,54,17],[76,6,55,8,"handleSubscription"],[76,24,55,26],[76,27,55,29,"notificationEmitter"],[76,46,55,48],[76,47,55,49,"addListener"],[76,58,55,60],[76,59,55,61,"handleNotificationEventName"],[76,86,55,88],[76,88,55,90],[76,95,55,97],[77,8,55,99,"id"],[77,10,55,101],[78,8,55,103,"notification"],[79,6,55,116],[79,7,55,117],[79,12,55,122],[80,8,56,12],[80,12,56,16],[80,13,56,17,"NotificationsHandlerModule"],[80,39,56,43],[80,40,56,43,"default"],[80,47,56,43],[80,48,56,44,"handleNotificationAsync"],[80,71,56,67],[80,73,56,69],[81,10,57,16,"handler"],[81,17,57,23],[81,18,57,24,"handleError"],[81,29,57,35],[81,32,57,38,"id"],[81,34,57,40],[81,36,57,42],[81,40,57,46,"UnavailabilityError"],[81,56,57,65],[81,57,57,65,"UnavailabilityError"],[81,76,57,65],[81,77,57,66],[81,92,57,81],[81,94,57,83],[81,119,57,108],[81,120,57,109],[81,121,57,110],[82,10,58,16],[83,8,59,12],[84,8,60,12],[84,12,60,16],[85,10,61,16],[85,16,61,22,"behavior"],[85,24,61,30],[85,27,61,33],[85,33,61,39,"handler"],[85,40,61,46],[85,41,61,47,"handleNotification"],[85,59,61,65],[85,60,61,66,"notification"],[85,72,61,78],[85,73,61,79],[86,10,62,16],[86,16,62,22,"NotificationsHandlerModule"],[86,42,62,48],[86,43,62,48,"default"],[86,50,62,48],[86,51,62,49,"handleNotificationAsync"],[86,74,62,72],[86,75,62,73,"id"],[86,77,62,75],[86,79,62,77,"behavior"],[86,87,62,85],[86,88,62,86],[87,10,63,16,"handler"],[87,17,63,23],[87,18,63,24,"handleSuccess"],[87,31,63,37],[87,34,63,40,"id"],[87,36,63,42],[87,37,63,43],[88,8,64,12],[88,9,64,13],[88,10,65,12],[88,17,65,19,"error"],[88,22,65,24],[88,24,65,26],[89,10,66,16,"handler"],[89,17,66,23],[89,18,66,24,"handleError"],[89,29,66,35],[89,32,66,38,"id"],[89,34,66,40],[89,36,66,42,"error"],[89,41,66,47],[89,42,66,48],[90,8,67,12],[91,6,68,8],[91,7,68,9],[91,8,68,10],[92,6,69,8,"handleTimeoutSubscription"],[92,31,69,33],[92,34,69,36,"notificationEmitter"],[92,53,69,55],[92,54,69,56,"addListener"],[92,65,69,67],[92,66,69,68,"handleNotificationTimeoutEventName"],[92,100,69,102],[92,102,69,104],[92,103,69,105],[93,8,69,107,"id"],[93,10,69,109],[94,8,69,111,"notification"],[95,6,69,124],[95,7,69,125],[95,12,69,130,"handler"],[95,19,69,137],[95,20,69,138,"handleError"],[95,31,69,149],[95,34,69,152,"id"],[95,36,69,154],[95,38,69,156],[95,42,69,160,"NotificationTimeoutError"],[95,66,69,184],[95,67,69,185,"id"],[95,69,69,187],[95,71,69,189,"notification"],[95,83,69,201],[95,84,69,202],[95,85,69,203],[95,86,69,204],[96,4,70,4],[97,2,71,0],[98,0,71,1],[98,3]],"functionMap":{"names":["<global>","NotificationTimeoutError","NotificationTimeoutError#constructor","setNotificationHandler","notificationEmitter.addListener$argument_1"],"mappings":"AAA;OCK;ICE;KDG;CDC;OGiC;0FCU;SDa;wGCC,mGD;CHE"},"hasCjsExports":false},"type":"js/module"}]}