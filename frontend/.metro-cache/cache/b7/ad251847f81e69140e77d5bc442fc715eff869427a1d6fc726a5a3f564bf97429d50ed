{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"./storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":24},"end":{"line":2,"column":45,"index":69}}],"key":"3rLtLV8J3gSw9c8Ep8Wpc3w/Yxg=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.getReviews = getReviews;\n  exports.addReview = addReview;\n  exports.getReviewsForWorker = getReviewsForWorker;\n  exports.getReviewForJob = getReviewForJob;\n  exports.getReviewsForEmployer = getReviewsForEmployer;\n  exports.calculateAverageRating = calculateAverageRating;\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _storage = require(_dependencyMap[1], \"./storage\");\n  // utils/reviewStore.ts\n\n  var REVIEW_KEY = '@shiftmatch:reviews';\n\n  /**\n   * Alle Reviews aus AsyncStorage laden\n   */\n  function getReviews() {\n    return _getReviews.apply(this, arguments);\n  }\n  /**\n   * Neue Review hinzufügen\n   * Verhindert Duplikate: Wenn bereits eine Review für jobId + workerId + employerId existiert,\n   * wird diese überschrieben\n   */\n  function _getReviews() {\n    _getReviews = (0, _asyncToGenerator.default)(function* () {\n      var reviews = yield (0, _storage.getItem)(REVIEW_KEY);\n      return reviews ?? [];\n    });\n    return _getReviews.apply(this, arguments);\n  }\n  function addReview(_x) {\n    return _addReview.apply(this, arguments);\n  }\n  /**\n   * Alle Reviews für einen bestimmten Worker laden\n   */\n  function _addReview() {\n    _addReview = (0, _asyncToGenerator.default)(function* (review) {\n      var reviews = yield getReviews();\n\n      // Prüfen ob bereits eine Review für diesen Job + Worker + Employer existiert\n      var existingIndex = reviews.findIndex(r => r.jobId === review.jobId && r.workerId === review.workerId && r.employerId === review.employerId);\n      if (existingIndex >= 0) {\n        // Existierende Review überschreiben\n        console.log('⚠️ Review existiert bereits, wird überschrieben');\n        reviews[existingIndex] = review;\n      } else {\n        // Neue Review hinzufügen\n        reviews.push(review);\n      }\n      yield (0, _storage.setItem)(REVIEW_KEY, reviews);\n      console.log('✅ Review gespeichert:', review);\n    });\n    return _addReview.apply(this, arguments);\n  }\n  function getReviewsForWorker(_x2) {\n    return _getReviewsForWorker.apply(this, arguments);\n  }\n  /**\n   * Prüfen ob für einen Job bereits eine Review existiert\n   */\n  function _getReviewsForWorker() {\n    _getReviewsForWorker = (0, _asyncToGenerator.default)(function* (workerId) {\n      var reviews = yield getReviews();\n      return reviews.filter(r => r.workerId === workerId);\n    });\n    return _getReviewsForWorker.apply(this, arguments);\n  }\n  function getReviewForJob(_x3, _x4, _x5) {\n    return _getReviewForJob.apply(this, arguments);\n  }\n  /**\n   * Alle Reviews für einen bestimmten Employer laden\n   */\n  function _getReviewForJob() {\n    _getReviewForJob = (0, _asyncToGenerator.default)(function* (jobId, workerId, employerId) {\n      var reviews = yield getReviews();\n      return reviews.find(r => r.jobId === jobId && r.workerId === workerId && r.employerId === employerId);\n    });\n    return _getReviewForJob.apply(this, arguments);\n  }\n  function getReviewsForEmployer(_x6) {\n    return _getReviewsForEmployer.apply(this, arguments);\n  }\n  /**\n   * Durchschnittliche Bewertung für einen Worker berechnen\n   */\n  function _getReviewsForEmployer() {\n    _getReviewsForEmployer = (0, _asyncToGenerator.default)(function* (employerId) {\n      var reviews = yield getReviews();\n      return reviews.filter(r => r.employerId === employerId);\n    });\n    return _getReviewsForEmployer.apply(this, arguments);\n  }\n  function calculateAverageRating(reviews) {\n    if (reviews.length === 0) return 0;\n    var sum = reviews.reduce((acc, r) => acc + r.rating, 0);\n    return sum / reviews.length;\n  }\n});","lineCount":112,"map":[[12,2,10,0,"exports"],[12,9,10,0],[12,10,10,0,"getReviews"],[12,20,10,0],[12,23,10,0,"getReviews"],[12,33,10,0],[13,2,20,0,"exports"],[13,9,20,0],[13,10,20,0,"addReview"],[13,19,20,0],[13,22,20,0,"addReview"],[13,31,20,0],[14,2,47,0,"exports"],[14,9,47,0],[14,10,47,0,"getReviewsForWorker"],[14,29,47,0],[14,32,47,0,"getReviewsForWorker"],[14,51,47,0],[15,2,55,0,"exports"],[15,9,55,0],[15,10,55,0,"getReviewForJob"],[15,25,55,0],[15,28,55,0,"getReviewForJob"],[15,43,55,0],[16,2,72,0,"exports"],[16,9,72,0],[16,10,72,0,"getReviewsForEmployer"],[16,31,72,0],[16,34,72,0,"getReviewsForEmployer"],[16,55,72,0],[17,2,80,0,"exports"],[17,9,80,0],[17,10,80,0,"calculateAverageRating"],[17,32,80,0],[17,35,80,0,"calculateAverageRating"],[17,57,80,0],[18,2,84,1],[18,6,84,1,"_babelRuntimeHelpersAsyncToGenerator"],[18,42,84,1],[18,45,84,1,"require"],[18,52,84,1],[18,53,84,1,"_dependencyMap"],[18,67,84,1],[19,2,84,1],[19,6,84,1,"_asyncToGenerator"],[19,23,84,1],[19,26,84,1,"_interopDefault"],[19,41,84,1],[19,42,84,1,"_babelRuntimeHelpersAsyncToGenerator"],[19,78,84,1],[20,2,2,0],[20,6,2,0,"_storage"],[20,14,2,0],[20,17,2,0,"require"],[20,24,2,0],[20,25,2,0,"_dependencyMap"],[20,39,2,0],[21,2,1,0],[23,2,5,0],[23,6,5,6,"REVIEW_KEY"],[23,16,5,16],[23,19,5,19],[23,40,5,40],[25,2,7,0],[26,0,8,0],[27,0,9,0],[28,2,7,0],[28,11,10,22,"getReviews"],[28,21,10,32,"getReviews"],[28,22,10,32],[29,4,10,32],[29,11,10,32,"_getReviews"],[29,22,10,32],[29,23,10,32,"apply"],[29,28,10,32],[29,35,10,32,"arguments"],[29,44,10,32],[30,2,10,32],[31,2,15,0],[32,0,16,0],[33,0,17,0],[34,0,18,0],[35,0,19,0],[36,2,15,0],[36,11,15,0,"_getReviews"],[36,23,15,0],[37,4,15,0,"_getReviews"],[37,15,15,0],[37,22,15,0,"_asyncToGenerator"],[37,39,15,0],[37,40,15,0,"default"],[37,47,15,0],[37,49,10,7],[37,62,10,54],[38,6,11,2],[38,10,11,8,"reviews"],[38,17,11,15],[38,26,11,24],[38,30,11,24,"getItem"],[38,38,11,31],[38,39,11,31,"getItem"],[38,46,11,31],[38,48,11,42,"REVIEW_KEY"],[38,58,11,52],[38,59,11,53],[39,6,12,2],[39,13,12,9,"reviews"],[39,20,12,16],[39,24,12,20],[39,26,12,22],[40,4,13,0],[40,5,13,1],[41,4,13,1],[41,11,13,1,"_getReviews"],[41,22,13,1],[41,23,13,1,"apply"],[41,28,13,1],[41,35,13,1,"arguments"],[41,44,13,1],[42,2,13,1],[43,2,13,1],[43,11,20,22,"addReview"],[43,20,20,31,"addReview"],[43,21,20,31,"_x"],[43,23,20,31],[44,4,20,31],[44,11,20,31,"_addReview"],[44,21,20,31],[44,22,20,31,"apply"],[44,27,20,31],[44,34,20,31,"arguments"],[44,43,20,31],[45,2,20,31],[46,2,44,0],[47,0,45,0],[48,0,46,0],[49,2,44,0],[49,11,44,0,"_addReview"],[49,22,44,0],[50,4,44,0,"_addReview"],[50,14,44,0],[50,21,44,0,"_asyncToGenerator"],[50,38,44,0],[50,39,44,0,"default"],[50,46,44,0],[50,48,20,7],[50,59,20,32,"review"],[50,65,20,46],[50,67,20,63],[51,6,21,2],[51,10,21,8,"reviews"],[51,17,21,15],[51,26,21,24,"getReviews"],[51,36,21,34],[51,37,21,35],[51,38,21,36],[53,6,23,2],[54,6,24,2],[54,10,24,8,"existingIndex"],[54,23,24,21],[54,26,24,24,"reviews"],[54,33,24,31],[54,34,24,32,"findIndex"],[54,43,24,41],[54,44,25,5,"r"],[54,45,25,6],[54,49,26,6,"r"],[54,50,26,7],[54,51,26,8,"jobId"],[54,56,26,13],[54,61,26,18,"review"],[54,67,26,24],[54,68,26,25,"jobId"],[54,73,26,30],[54,77,27,6,"r"],[54,78,27,7],[54,79,27,8,"workerId"],[54,87,27,16],[54,92,27,21,"review"],[54,98,27,27],[54,99,27,28,"workerId"],[54,107,27,36],[54,111,28,6,"r"],[54,112,28,7],[54,113,28,8,"employerId"],[54,123,28,18],[54,128,28,23,"review"],[54,134,28,29],[54,135,28,30,"employerId"],[54,145,29,2],[54,146,29,3],[55,6,31,2],[55,10,31,6,"existingIndex"],[55,23,31,19],[55,27,31,23],[55,28,31,24],[55,30,31,26],[56,8,32,4],[57,8,33,4,"console"],[57,15,33,11],[57,16,33,12,"log"],[57,19,33,15],[57,20,33,16],[57,69,33,65],[57,70,33,66],[58,8,34,4,"reviews"],[58,15,34,11],[58,16,34,12,"existingIndex"],[58,29,34,25],[58,30,34,26],[58,33,34,29,"review"],[58,39,34,35],[59,6,35,2],[59,7,35,3],[59,13,35,9],[60,8,36,4],[61,8,37,4,"reviews"],[61,15,37,11],[61,16,37,12,"push"],[61,20,37,16],[61,21,37,17,"review"],[61,27,37,23],[61,28,37,24],[62,6,38,2],[63,6,40,2],[63,12,40,8],[63,16,40,8,"setItem"],[63,24,40,15],[63,25,40,15,"setItem"],[63,32,40,15],[63,34,40,16,"REVIEW_KEY"],[63,44,40,26],[63,46,40,28,"reviews"],[63,53,40,35],[63,54,40,36],[64,6,41,2,"console"],[64,13,41,9],[64,14,41,10,"log"],[64,17,41,13],[64,18,41,14],[64,41,41,37],[64,43,41,39,"review"],[64,49,41,45],[64,50,41,46],[65,4,42,0],[65,5,42,1],[66,4,42,1],[66,11,42,1,"_addReview"],[66,21,42,1],[66,22,42,1,"apply"],[66,27,42,1],[66,34,42,1,"arguments"],[66,43,42,1],[67,2,42,1],[68,2,42,1],[68,11,47,22,"getReviewsForWorker"],[68,30,47,41,"getReviewsForWorker"],[68,31,47,41,"_x2"],[68,34,47,41],[69,4,47,41],[69,11,47,41,"_getReviewsForWorker"],[69,31,47,41],[69,32,47,41,"apply"],[69,37,47,41],[69,44,47,41,"arguments"],[69,53,47,41],[70,2,47,41],[71,2,52,0],[72,0,53,0],[73,0,54,0],[74,2,52,0],[74,11,52,0,"_getReviewsForWorker"],[74,32,52,0],[75,4,52,0,"_getReviewsForWorker"],[75,24,52,0],[75,31,52,0,"_asyncToGenerator"],[75,48,52,0],[75,49,52,0,"default"],[75,56,52,0],[75,58,47,7],[75,69,47,42,"workerId"],[75,77,47,58],[75,79,47,79],[76,6,48,2],[76,10,48,8,"reviews"],[76,17,48,15],[76,26,48,24,"getReviews"],[76,36,48,34],[76,37,48,35],[76,38,48,36],[77,6,49,2],[77,13,49,9,"reviews"],[77,20,49,16],[77,21,49,17,"filter"],[77,27,49,23],[77,28,49,25,"r"],[77,29,49,26],[77,33,49,31,"r"],[77,34,49,32],[77,35,49,33,"workerId"],[77,43,49,41],[77,48,49,46,"workerId"],[77,56,49,54],[77,57,49,55],[78,4,50,0],[78,5,50,1],[79,4,50,1],[79,11,50,1,"_getReviewsForWorker"],[79,31,50,1],[79,32,50,1,"apply"],[79,37,50,1],[79,44,50,1,"arguments"],[79,53,50,1],[80,2,50,1],[81,2,50,1],[81,11,55,22,"getReviewForJob"],[81,26,55,37,"getReviewForJob"],[81,27,55,37,"_x3"],[81,30,55,37],[81,32,55,37,"_x4"],[81,35,55,37],[81,37,55,37,"_x5"],[81,40,55,37],[82,4,55,37],[82,11,55,37,"_getReviewForJob"],[82,27,55,37],[82,28,55,37,"apply"],[82,33,55,37],[82,40,55,37,"arguments"],[82,49,55,37],[83,2,55,37],[84,2,69,0],[85,0,70,0],[86,0,71,0],[87,2,69,0],[87,11,69,0,"_getReviewForJob"],[87,28,69,0],[88,4,69,0,"_getReviewForJob"],[88,20,69,0],[88,27,69,0,"_asyncToGenerator"],[88,44,69,0],[88,45,69,0,"default"],[88,52,69,0],[88,54,55,7],[88,65,56,2,"jobId"],[88,70,56,15],[88,72,57,2,"workerId"],[88,80,57,18],[88,82,58,2,"employerId"],[88,92,58,20],[88,94,59,31],[89,6,60,2],[89,10,60,8,"reviews"],[89,17,60,15],[89,26,60,24,"getReviews"],[89,36,60,34],[89,37,60,35],[89,38,60,36],[90,6,61,2],[90,13,61,9,"reviews"],[90,20,61,16],[90,21,61,17,"find"],[90,25,61,21],[90,26,62,5,"r"],[90,27,62,6],[90,31,63,6,"r"],[90,32,63,7],[90,33,63,8,"jobId"],[90,38,63,13],[90,43,63,18,"jobId"],[90,48,63,23],[90,52,64,6,"r"],[90,53,64,7],[90,54,64,8,"workerId"],[90,62,64,16],[90,67,64,21,"workerId"],[90,75,64,29],[90,79,65,6,"r"],[90,80,65,7],[90,81,65,8,"employerId"],[90,91,65,18],[90,96,65,23,"employerId"],[90,106,66,2],[90,107,66,3],[91,4,67,0],[91,5,67,1],[92,4,67,1],[92,11,67,1,"_getReviewForJob"],[92,27,67,1],[92,28,67,1,"apply"],[92,33,67,1],[92,40,67,1,"arguments"],[92,49,67,1],[93,2,67,1],[94,2,67,1],[94,11,72,22,"getReviewsForEmployer"],[94,32,72,43,"getReviewsForEmployer"],[94,33,72,43,"_x6"],[94,36,72,43],[95,4,72,43],[95,11,72,43,"_getReviewsForEmployer"],[95,33,72,43],[95,34,72,43,"apply"],[95,39,72,43],[95,46,72,43,"arguments"],[95,55,72,43],[96,2,72,43],[97,2,77,0],[98,0,78,0],[99,0,79,0],[100,2,77,0],[100,11,77,0,"_getReviewsForEmployer"],[100,34,77,0],[101,4,77,0,"_getReviewsForEmployer"],[101,26,77,0],[101,33,77,0,"_asyncToGenerator"],[101,50,77,0],[101,51,77,0,"default"],[101,58,77,0],[101,60,72,7],[101,71,72,44,"employerId"],[101,81,72,62],[101,83,72,83],[102,6,73,2],[102,10,73,8,"reviews"],[102,17,73,15],[102,26,73,24,"getReviews"],[102,36,73,34],[102,37,73,35],[102,38,73,36],[103,6,74,2],[103,13,74,9,"reviews"],[103,20,74,16],[103,21,74,17,"filter"],[103,27,74,23],[103,28,74,25,"r"],[103,29,74,26],[103,33,74,31,"r"],[103,34,74,32],[103,35,74,33,"employerId"],[103,45,74,43],[103,50,74,48,"employerId"],[103,60,74,58],[103,61,74,59],[104,4,75,0],[104,5,75,1],[105,4,75,1],[105,11,75,1,"_getReviewsForEmployer"],[105,33,75,1],[105,34,75,1,"apply"],[105,39,75,1],[105,46,75,1,"arguments"],[105,55,75,1],[106,2,75,1],[107,2,80,7],[107,11,80,16,"calculateAverageRating"],[107,33,80,38,"calculateAverageRating"],[107,34,80,39,"reviews"],[107,41,80,56],[107,43,80,66],[108,4,81,2],[108,8,81,6,"reviews"],[108,15,81,13],[108,16,81,14,"length"],[108,22,81,20],[108,27,81,25],[108,28,81,26],[108,30,81,28],[108,37,81,35],[108,38,81,36],[109,4,82,2],[109,8,82,8,"sum"],[109,11,82,11],[109,14,82,14,"reviews"],[109,21,82,21],[109,22,82,22,"reduce"],[109,28,82,28],[109,29,82,29],[109,30,82,30,"acc"],[109,33,82,33],[109,35,82,35,"r"],[109,36,82,36],[109,41,82,41,"acc"],[109,44,82,44],[109,47,82,47,"r"],[109,48,82,48],[109,49,82,49,"rating"],[109,55,82,55],[109,57,82,57],[109,58,82,58],[109,59,82,59],[110,4,83,2],[110,11,83,9,"sum"],[110,14,83,12],[110,17,83,15,"reviews"],[110,24,83,22],[110,25,83,23,"length"],[110,31,83,29],[111,2,84,0],[112,0,84,1],[112,3]],"functionMap":{"names":["<global>","getReviews","addReview","reviews.findIndex$argument_0","getReviewsForWorker","reviews.filter$argument_0","getReviewForJob","reviews.find$argument_0","getReviewsForEmployer","calculateAverageRating","reviews.reduce$argument_0"],"mappings":"AAA;OCS;CDG;OEO;ICK;wCDG;CFc;OIK;wBCE,8BD;CJC;OMK;ICO;iCDG;CNE;OQK;wBHE,kCG;CRC;OSK;6BCE,0BD;CTE"},"hasCjsExports":false},"type":"js/module"}]}