{"dependencies":[{"name":"./storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":57,"index":57}}],"key":"3rLtLV8J3gSw9c8Ep8Wpc3w/Yxg=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.addJob = addJob;\n  exports.getJobs = getJobs;\n  exports.updateJob = updateJob;\n  exports.clearJobs = clearJobs;\n  exports.getAllJobs = getAllJobs;\n  exports.saveJob = saveJob;\n  exports.getEmployerJobs = getEmployerJobs;\n  exports.getOpenJobs = getOpenJobs;\n  exports.getJobById = getJobById;\n  exports.deleteJob = deleteJob;\n  exports.getEmployerAuftr√§ge = getEmployerAuftr√§ge;\n  exports.getEmployerAuftraege = getEmployerAuftraege;\n  var _storage = require(_dependencyMap[0], \"./storage\");\n  const JOBS_KEY = '@shiftmatch:jobs';\n\n  // Internal helper: Load all jobs from storage\n  async function loadJobs() {\n    const stored = await (0, _storage.getItem)(JOBS_KEY);\n    return stored ?? [];\n  }\n\n  // Internal helper: Save all jobs to storage\n  async function saveJobsInternal(jobs) {\n    await (0, _storage.setItem)(JOBS_KEY, jobs);\n  }\n  async function addJob(job) {\n    const jobs = await loadJobs();\n    await saveJobsInternal([...jobs, job]);\n  }\n  async function getJobs() {\n    return await loadJobs();\n  }\n  async function updateJob(id, patch) {\n    const jobs = await loadJobs();\n    const next = jobs.map(j => j.id === id ? {\n      ...j,\n      ...patch\n    } : j);\n    await saveJobsInternal(next);\n  }\n  async function clearJobs() {\n    await (0, _storage.removeItem)(JOBS_KEY);\n  }\n\n  // Legacy/convenience functions\n  async function getAllJobs() {\n    return await getJobs();\n  }\n  async function saveJob(job) {\n    const all = await loadJobs();\n    const existing = all.findIndex(j => j.id === job.id);\n    if (existing >= 0) {\n      await updateJob(job.id, job);\n    } else {\n      await addJob(job);\n    }\n  }\n  async function getEmployerJobs(employerId) {\n    const all = await loadJobs();\n    let needsSave = false;\n\n    // Migration: Fix jobs without employerId\n    const fixed = all.map(job => {\n      // Check if job has no employerId or employerId is undefined\n      if (!job.employerId || job.employerId === 'undefined') {\n        // Check if there's an old ownerId field\n        const legacyOwnerId = job.ownerId;\n        if (legacyOwnerId) {\n          console.log(`üîß Migrating job ${job.id}: ownerId ‚Üí employerId`);\n          job.employerId = legacyOwnerId;\n          needsSave = true;\n        } else if (job.status === 'open' || job.status === 'draft') {\n          // For open/draft jobs without any owner info, assign to current employer\n          console.log(`üîß Assigning job ${job.id} to employer ${employerId}`);\n          job.employerId = employerId;\n          needsSave = true;\n        }\n      }\n      return job;\n    });\n\n    // Save back if we made changes\n    if (needsSave) {\n      console.log('üíæ Saving migrated jobs to storage');\n      await saveJobsInternal(fixed);\n    }\n\n    // Filter jobs for this employer\n    const mine = fixed.filter(j => j.employerId === employerId);\n    console.log(`üìã getEmployerJobs: Found ${mine.length} jobs for employer ${employerId}`);\n    return mine;\n  }\n  async function getOpenJobs() {\n    const all = await loadJobs();\n    return all.filter(j => j.status === 'open');\n  }\n  async function getJobById(id) {\n    const all = await loadJobs();\n    return all.find(j => j.id === id) || null;\n  }\n  async function deleteJob(id) {\n    const jobs = await loadJobs();\n    const next = jobs.filter(j => j.id !== id);\n    await saveJobsInternal(next);\n  }\n\n  // COMPATIBILITY ALIASES - For backwards compatibility\n  // (in case old code or sed replacements created these function calls)\n  async function getEmployerAuftr√§ge(employerId) {\n    console.warn('‚ö†Ô∏è Deprecated: getEmployerAuftr√§ge() is deprecated. Use getEmployerJobs() instead.');\n    return await getEmployerJobs(employerId);\n  }\n  async function getEmployerAuftraege(employerId) {\n    console.warn('‚ö†Ô∏è Deprecated: getEmployerAuftraege() is deprecated. Use getEmployerJobs() instead.');\n    return await getEmployerJobs(employerId);\n  }\n});","lineCount":123,"map":[[7,2,17,0,"exports"],[7,9,17,0],[7,10,17,0,"addJob"],[7,16,17,0],[7,19,17,0,"addJob"],[7,25,17,0],[8,2,22,0,"exports"],[8,9,22,0],[8,10,22,0,"getJobs"],[8,17,22,0],[8,20,22,0,"getJobs"],[8,27,22,0],[9,2,26,0,"exports"],[9,9,26,0],[9,10,26,0,"updateJob"],[9,19,26,0],[9,22,26,0,"updateJob"],[9,31,26,0],[10,2,32,0,"exports"],[10,9,32,0],[10,10,32,0,"clearJobs"],[10,19,32,0],[10,22,32,0,"clearJobs"],[10,31,32,0],[11,2,37,0,"exports"],[11,9,37,0],[11,10,37,0,"getAllJobs"],[11,20,37,0],[11,23,37,0,"getAllJobs"],[11,33,37,0],[12,2,41,0,"exports"],[12,9,41,0],[12,10,41,0,"saveJob"],[12,17,41,0],[12,20,41,0,"saveJob"],[12,27,41,0],[13,2,51,0,"exports"],[13,9,51,0],[13,10,51,0,"getEmployerJobs"],[13,25,51,0],[13,28,51,0,"getEmployerJobs"],[13,43,51,0],[14,2,89,0,"exports"],[14,9,89,0],[14,10,89,0,"getOpenJobs"],[14,21,89,0],[14,24,89,0,"getOpenJobs"],[14,35,89,0],[15,2,94,0,"exports"],[15,9,94,0],[15,10,94,0,"getJobById"],[15,20,94,0],[15,23,94,0,"getJobById"],[15,33,94,0],[16,2,99,0,"exports"],[16,9,99,0],[16,10,99,0,"deleteJob"],[16,19,99,0],[16,22,99,0,"deleteJob"],[16,31,99,0],[17,2,107,0,"exports"],[17,9,107,0],[17,10,107,0,"getEmployerAuftr√§ge"],[17,29,107,0],[17,32,107,0,"getEmployerAuftr√§ge"],[17,51,107,0],[18,2,112,0,"exports"],[18,9,112,0],[18,10,112,0,"getEmployerAuftraege"],[18,30,112,0],[18,33,112,0,"getEmployerAuftraege"],[18,53,112,0],[19,2,1,0],[19,6,1,0,"_storage"],[19,14,1,0],[19,17,1,0,"require"],[19,24,1,0],[19,25,1,0,"_dependencyMap"],[19,39,1,0],[20,2,4,0],[20,8,4,6,"JOBS_KEY"],[20,16,4,14],[20,19,4,17],[20,37,4,35],[22,2,6,0],[23,2,7,0],[23,17,7,15,"loadJobs"],[23,25,7,23,"loadJobs"],[23,26,7,23],[23,28,7,42],[24,4,8,2],[24,10,8,8,"stored"],[24,16,8,14],[24,19,8,17],[24,25,8,23],[24,29,8,23,"getItem"],[24,37,8,30],[24,38,8,30,"getItem"],[24,45,8,30],[24,47,8,38,"JOBS_KEY"],[24,55,8,46],[24,56,8,47],[25,4,9,2],[25,11,9,9,"stored"],[25,17,9,15],[25,21,9,19],[25,23,9,21],[26,2,10,0],[28,2,12,0],[29,2,13,0],[29,17,13,15,"saveJobsInternal"],[29,33,13,31,"saveJobsInternal"],[29,34,13,32,"jobs"],[29,38,13,43],[29,40,13,60],[30,4,14,2],[30,10,14,8],[30,14,14,8,"setItem"],[30,22,14,15],[30,23,14,15,"setItem"],[30,30,14,15],[30,32,14,23,"JOBS_KEY"],[30,40,14,31],[30,42,14,33,"jobs"],[30,46,14,37],[30,47,14,38],[31,2,15,0],[32,2,17,7],[32,17,17,22,"addJob"],[32,23,17,28,"addJob"],[32,24,17,29,"job"],[32,27,17,37],[32,29,17,54],[33,4,18,2],[33,10,18,8,"jobs"],[33,14,18,12],[33,17,18,15],[33,23,18,21,"loadJobs"],[33,31,18,29],[33,32,18,30],[33,33,18,31],[34,4,19,2],[34,10,19,8,"saveJobsInternal"],[34,26,19,24],[34,27,19,25],[34,28,19,26],[34,31,19,29,"jobs"],[34,35,19,33],[34,37,19,35,"job"],[34,40,19,38],[34,41,19,39],[34,42,19,40],[35,2,20,0],[36,2,22,7],[36,17,22,22,"getJobs"],[36,24,22,29,"getJobs"],[36,25,22,29],[36,27,22,48],[37,4,23,2],[37,11,23,9],[37,17,23,15,"loadJobs"],[37,25,23,23],[37,26,23,24],[37,27,23,25],[38,2,24,0],[39,2,26,7],[39,17,26,22,"updateJob"],[39,26,26,31,"updateJob"],[39,27,26,32,"id"],[39,29,26,42],[39,31,26,44,"patch"],[39,36,26,63],[39,38,26,80],[40,4,27,2],[40,10,27,8,"jobs"],[40,14,27,12],[40,17,27,15],[40,23,27,21,"loadJobs"],[40,31,27,29],[40,32,27,30],[40,33,27,31],[41,4,28,2],[41,10,28,8,"next"],[41,14,28,12],[41,17,28,15,"jobs"],[41,21,28,19],[41,22,28,20,"map"],[41,25,28,23],[41,26,28,24,"j"],[41,27,28,25],[41,31,28,30,"j"],[41,32,28,31],[41,33,28,32,"id"],[41,35,28,34],[41,40,28,39,"id"],[41,42,28,41],[41,45,28,44],[42,6,28,46],[42,9,28,49,"j"],[42,10,28,50],[43,6,28,52],[43,9,28,55,"patch"],[44,4,28,61],[44,5,28,62],[44,8,28,65,"j"],[44,9,28,67],[44,10,28,68],[45,4,29,2],[45,10,29,8,"saveJobsInternal"],[45,26,29,24],[45,27,29,25,"next"],[45,31,29,29],[45,32,29,30],[46,2,30,0],[47,2,32,7],[47,17,32,22,"clearJobs"],[47,26,32,31,"clearJobs"],[47,27,32,31],[47,29,32,49],[48,4,33,2],[48,10,33,8],[48,14,33,8,"removeItem"],[48,22,33,18],[48,23,33,18,"removeItem"],[48,33,33,18],[48,35,33,19,"JOBS_KEY"],[48,43,33,27],[48,44,33,28],[49,2,34,0],[51,2,36,0],[52,2,37,7],[52,17,37,22,"getAllJobs"],[52,27,37,32,"getAllJobs"],[52,28,37,32],[52,30,37,51],[53,4,38,2],[53,11,38,9],[53,17,38,15,"getJobs"],[53,24,38,22],[53,25,38,23],[53,26,38,24],[54,2,39,0],[55,2,41,7],[55,17,41,22,"saveJob"],[55,24,41,29,"saveJob"],[55,25,41,30,"job"],[55,28,41,38],[55,30,41,55],[56,4,42,2],[56,10,42,8,"all"],[56,13,42,11],[56,16,42,14],[56,22,42,20,"loadJobs"],[56,30,42,28],[56,31,42,29],[56,32,42,30],[57,4,43,2],[57,10,43,8,"existing"],[57,18,43,16],[57,21,43,19,"all"],[57,24,43,22],[57,25,43,23,"findIndex"],[57,34,43,32],[57,35,43,33,"j"],[57,36,43,34],[57,40,43,38,"j"],[57,41,43,39],[57,42,43,40,"id"],[57,44,43,42],[57,49,43,47,"job"],[57,52,43,50],[57,53,43,51,"id"],[57,55,43,53],[57,56,43,54],[58,4,44,2],[58,8,44,6,"existing"],[58,16,44,14],[58,20,44,18],[58,21,44,19],[58,23,44,21],[59,6,45,4],[59,12,45,10,"updateJob"],[59,21,45,19],[59,22,45,20,"job"],[59,25,45,23],[59,26,45,24,"id"],[59,28,45,26],[59,30,45,28,"job"],[59,33,45,31],[59,34,45,32],[60,4,46,2],[60,5,46,3],[60,11,46,9],[61,6,47,4],[61,12,47,10,"addJob"],[61,18,47,16],[61,19,47,17,"job"],[61,22,47,20],[61,23,47,21],[62,4,48,2],[63,2,49,0],[64,2,51,7],[64,17,51,22,"getEmployerJobs"],[64,32,51,37,"getEmployerJobs"],[64,33,51,38,"employerId"],[64,43,51,56],[64,45,51,74],[65,4,52,2],[65,10,52,8,"all"],[65,13,52,11],[65,16,52,14],[65,22,52,20,"loadJobs"],[65,30,52,28],[65,31,52,29],[65,32,52,30],[66,4,53,2],[66,8,53,6,"needsSave"],[66,17,53,15],[66,20,53,18],[66,25,53,23],[68,4,55,2],[69,4,56,2],[69,10,56,8,"fixed"],[69,15,56,13],[69,18,56,16,"all"],[69,21,56,19],[69,22,56,20,"map"],[69,25,56,23],[69,26,56,24,"job"],[69,29,56,27],[69,33,56,31],[70,6,57,4],[71,6,58,4],[71,10,58,8],[71,11,58,9,"job"],[71,14,58,12],[71,15,58,13,"employerId"],[71,25,58,23],[71,29,58,27,"job"],[71,32,58,30],[71,33,58,31,"employerId"],[71,43,58,41],[71,48,58,46],[71,59,58,57],[71,61,58,59],[72,8,59,6],[73,8,60,6],[73,14,60,12,"legacyOwnerId"],[73,27,60,25],[73,30,60,29,"job"],[73,33,60,32],[73,34,60,41,"ownerId"],[73,41,60,48],[74,8,62,6],[74,12,62,10,"legacyOwnerId"],[74,25,62,23],[74,27,62,25],[75,10,63,8,"console"],[75,17,63,15],[75,18,63,16,"log"],[75,21,63,19],[75,22,63,20],[75,42,63,40,"job"],[75,45,63,43],[75,46,63,44,"id"],[75,48,63,46],[75,72,63,70],[75,73,63,71],[76,10,64,8,"job"],[76,13,64,11],[76,14,64,12,"employerId"],[76,24,64,22],[76,27,64,25,"legacyOwnerId"],[76,40,64,38],[77,10,65,8,"needsSave"],[77,19,65,17],[77,22,65,20],[77,26,65,24],[78,8,66,6],[78,9,66,7],[78,15,66,13],[78,19,66,17,"job"],[78,22,66,20],[78,23,66,21,"status"],[78,29,66,27],[78,34,66,32],[78,40,66,38],[78,44,66,42,"job"],[78,47,66,45],[78,48,66,46,"status"],[78,54,66,52],[78,59,66,57],[78,66,66,64],[78,68,66,66],[79,10,67,8],[80,10,68,8,"console"],[80,17,68,15],[80,18,68,16,"log"],[80,21,68,19],[80,22,68,20],[80,42,68,40,"job"],[80,45,68,43],[80,46,68,44,"id"],[80,48,68,46],[80,64,68,62,"employerId"],[80,74,68,72],[80,76,68,74],[80,77,68,75],[81,10,69,8,"job"],[81,13,69,11],[81,14,69,12,"employerId"],[81,24,69,22],[81,27,69,25,"employerId"],[81,37,69,35],[82,10,70,8,"needsSave"],[82,19,70,17],[82,22,70,20],[82,26,70,24],[83,8,71,6],[84,6,72,4],[85,6,73,4],[85,13,73,11,"job"],[85,16,73,14],[86,4,74,2],[86,5,74,3],[86,6,74,4],[88,4,76,2],[89,4,77,2],[89,8,77,6,"needsSave"],[89,17,77,15],[89,19,77,17],[90,6,78,4,"console"],[90,13,78,11],[90,14,78,12,"log"],[90,17,78,15],[90,18,78,16],[90,54,78,52],[90,55,78,53],[91,6,79,4],[91,12,79,10,"saveJobsInternal"],[91,28,79,26],[91,29,79,27,"fixed"],[91,34,79,32],[91,35,79,33],[92,4,80,2],[94,4,82,2],[95,4,83,2],[95,10,83,8,"mine"],[95,14,83,12],[95,17,83,15,"fixed"],[95,22,83,20],[95,23,83,21,"filter"],[95,29,83,27],[95,30,83,28,"j"],[95,31,83,29],[95,35,83,33,"j"],[95,36,83,34],[95,37,83,35,"employerId"],[95,47,83,45],[95,52,83,50,"employerId"],[95,62,83,60],[95,63,83,61],[96,4,84,2,"console"],[96,11,84,9],[96,12,84,10,"log"],[96,15,84,13],[96,16,84,14],[96,45,84,43,"mine"],[96,49,84,47],[96,50,84,48,"length"],[96,56,84,54],[96,78,84,76,"employerId"],[96,88,84,86],[96,90,84,88],[96,91,84,89],[97,4,86,2],[97,11,86,9,"mine"],[97,15,86,13],[98,2,87,0],[99,2,89,7],[99,17,89,22,"getOpenJobs"],[99,28,89,33,"getOpenJobs"],[99,29,89,33],[99,31,89,52],[100,4,90,2],[100,10,90,8,"all"],[100,13,90,11],[100,16,90,14],[100,22,90,20,"loadJobs"],[100,30,90,28],[100,31,90,29],[100,32,90,30],[101,4,91,2],[101,11,91,9,"all"],[101,14,91,12],[101,15,91,13,"filter"],[101,21,91,19],[101,22,91,20,"j"],[101,23,91,21],[101,27,91,25,"j"],[101,28,91,26],[101,29,91,27,"status"],[101,35,91,33],[101,40,91,38],[101,46,91,44],[101,47,91,45],[102,2,92,0],[103,2,94,7],[103,17,94,22,"getJobById"],[103,27,94,32,"getJobById"],[103,28,94,33,"id"],[103,30,94,43],[103,32,94,66],[104,4,95,2],[104,10,95,8,"all"],[104,13,95,11],[104,16,95,14],[104,22,95,20,"loadJobs"],[104,30,95,28],[104,31,95,29],[104,32,95,30],[105,4,96,2],[105,11,96,9,"all"],[105,14,96,12],[105,15,96,13,"find"],[105,19,96,17],[105,20,96,18,"j"],[105,21,96,19],[105,25,96,23,"j"],[105,26,96,24],[105,27,96,25,"id"],[105,29,96,27],[105,34,96,32,"id"],[105,36,96,34],[105,37,96,35],[105,41,96,39],[105,45,96,43],[106,2,97,0],[107,2,99,7],[107,17,99,22,"deleteJob"],[107,26,99,31,"deleteJob"],[107,27,99,32,"id"],[107,29,99,42],[107,31,99,59],[108,4,100,2],[108,10,100,8,"jobs"],[108,14,100,12],[108,17,100,15],[108,23,100,21,"loadJobs"],[108,31,100,29],[108,32,100,30],[108,33,100,31],[109,4,101,2],[109,10,101,8,"next"],[109,14,101,12],[109,17,101,15,"jobs"],[109,21,101,19],[109,22,101,20,"filter"],[109,28,101,26],[109,29,101,27,"j"],[109,30,101,28],[109,34,101,32,"j"],[109,35,101,33],[109,36,101,34,"id"],[109,38,101,36],[109,43,101,41,"id"],[109,45,101,43],[109,46,101,44],[110,4,102,2],[110,10,102,8,"saveJobsInternal"],[110,26,102,24],[110,27,102,25,"next"],[110,31,102,29],[110,32,102,30],[111,2,103,0],[113,2,105,0],[114,2,106,0],[115,2,107,7],[115,17,107,22,"getEmployerAuftr√§ge"],[115,36,107,41,"getEmployerAuftr√§ge"],[115,37,107,42,"employerId"],[115,47,107,60],[115,49,107,78],[116,4,108,2,"console"],[116,11,108,9],[116,12,108,10,"warn"],[116,16,108,14],[116,17,108,15],[116,101,108,99],[116,102,108,100],[117,4,109,2],[117,11,109,9],[117,17,109,15,"getEmployerJobs"],[117,32,109,30],[117,33,109,31,"employerId"],[117,43,109,41],[117,44,109,42],[118,2,110,0],[119,2,112,7],[119,17,112,22,"getEmployerAuftraege"],[119,37,112,42,"getEmployerAuftraege"],[119,38,112,43,"employerId"],[119,48,112,61],[119,50,112,79],[120,4,113,2,"console"],[120,11,113,9],[120,12,113,10,"warn"],[120,16,113,14],[120,17,113,15],[120,102,113,100],[120,103,113,101],[121,4,114,2],[121,11,114,9],[121,17,114,15,"getEmployerJobs"],[121,32,114,30],[121,33,114,31,"employerId"],[121,43,114,41],[121,44,114,42],[122,2,115,0],[123,0,115,1],[123,3]],"functionMap":{"names":["<global>","loadJobs","saveJobsInternal","addJob","getJobs","updateJob","jobs.map$argument_0","clearJobs","getAllJobs","saveJob","all.findIndex$argument_0","getEmployerJobs","all.map$argument_0","fixed.filter$argument_0","getOpenJobs","all.filter$argument_0","getJobById","all.find$argument_0","deleteJob","jobs.filter$argument_0","getEmployerAuftr√§ge","getEmployerAuftraege"],"mappings":"AAA;ACM;CDG;AEG;CFE;OGE;CHG;OIE;CJE;OKE;wBCE,2CD;CLE;OOE;CPE;OQG;CRE;OSE;iCCE,oBD;CTM;OWE;wBCK;GDkB;4BES,gCF;CXI;OcE;oBCE,wBD;CdC;OgBE;kBCE,gBD;ChBC;OkBE;2BCE,gBD;ClBE;OoBI;CpBG;OqBE;CrBG"},"hasCjsExports":false},"type":"js/module"}]}