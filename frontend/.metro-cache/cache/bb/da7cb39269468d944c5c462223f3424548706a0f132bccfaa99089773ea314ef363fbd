{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"../utils/storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":43,"index":133}}],"key":"rswhtWQFlk40P6/ZSXiz3NZSC0I=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _utilsStorage = require(_dependencyMap[1], \"../utils/storage\");\n  var _reactJsxDevRuntime = require(_dependencyMap[2], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(null);\n  const USER_KEY = '@shiftmatch:user';\n  const AUTH_USERS_KEY = '@shiftmatch:auth_users';\n  const AuthProvider = ({\n    children\n  }) => {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      loadUser();\n    }, []);\n    const loadUser = async () => {\n      try {\n        const storedUser = await _utilsStorage.storage.getItem(USER_KEY);\n        setUser(storedUser);\n      } catch (error) {\n        console.error('Error loading user:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const getAuthUsers = async () => {\n      const users = await _utilsStorage.storage.getItem(AUTH_USERS_KEY);\n      return users || [];\n    };\n    const saveAuthUsers = async users => {\n      await _utilsStorage.storage.setItem(AUTH_USERS_KEY, users);\n    };\n    const signUp = async (email, password) => {\n      const users = await getAuthUsers();\n\n      // Check if email already exists\n      if (users.some(u => u.email === email)) {\n        throw new Error('E-Mail bereits registriert');\n      }\n\n      // Create new user\n      const newAuthUser = {\n        id: `u-${Date.now()}`,\n        email,\n        password // In production, hash this!\n      };\n      users.push(newAuthUser);\n      await saveAuthUsers(users);\n\n      // Set current user (without role yet)\n      const currentUser = {\n        id: newAuthUser.id,\n        email: newAuthUser.email\n      };\n      setUser(currentUser);\n      await _utilsStorage.storage.setItem(USER_KEY, currentUser);\n    };\n    const signIn = async (email, password) => {\n      const users = await getAuthUsers();\n      const authUser = users.find(u => u.email === email && u.password === password);\n      if (!authUser) {\n        throw new Error('Falsche E-Mail oder Passwort');\n      }\n      const currentUser = {\n        id: authUser.id,\n        email: authUser.email,\n        role: authUser.role\n      };\n      setUser(currentUser);\n      await _utilsStorage.storage.setItem(USER_KEY, currentUser);\n    };\n    const signOut = async () => {\n      setUser(null);\n      await _utilsStorage.storage.removeItem(USER_KEY);\n    };\n    const setRole = async role => {\n      if (!user) {\n        throw new Error('Kein User angemeldet');\n      }\n\n      // Update user in context\n      const updatedUser = {\n        ...user,\n        role\n      };\n      setUser(updatedUser);\n      await _utilsStorage.storage.setItem(USER_KEY, updatedUser);\n\n      // Update auth users storage\n      const users = await getAuthUsers();\n      const index = users.findIndex(u => u.id === user.id);\n      if (index !== -1) {\n        users[index].role = role;\n        await saveAuthUsers(users);\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        isLoading,\n        signUp,\n        signIn,\n        signOut,\n        setRole\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 5\n    }, this);\n  };\n  const useAuth = () => {\n    const context = (0, _react.useContext)(AuthContext);\n    if (!context) {\n      throw new Error('useAuth must be used within AuthProvider');\n    }\n    return context;\n  };\n});","lineCount":138,"map":[[8,2,33,0,"Object"],[8,8,33,0],[8,9,33,0,"defineProperty"],[8,23,33,0],[8,24,33,0,"exports"],[8,31,33,0],[9,4,33,0,"enumerable"],[9,14,33,0],[10,4,33,0,"get"],[10,7,33,0],[10,18,33,0,"get"],[10,19,33,0],[11,6,33,0],[11,13,33,0,"AuthProvider"],[11,25,33,0],[12,4,33,0],[13,2,33,0],[14,2,136,0,"Object"],[14,8,136,0],[14,9,136,0,"defineProperty"],[14,23,136,0],[14,24,136,0,"exports"],[14,31,136,0],[15,4,136,0,"enumerable"],[15,14,136,0],[16,4,136,0,"get"],[16,7,136,0],[16,18,136,0,"get"],[16,19,136,0],[17,6,136,0],[17,13,136,0,"useAuth"],[17,20,136,0],[18,4,136,0],[19,2,136,0],[20,2,1,0],[20,6,1,0,"_react"],[20,12,1,0],[20,15,1,0,"require"],[20,22,1,0],[20,23,1,0,"_dependencyMap"],[20,37,1,0],[21,2,2,0],[21,6,2,0,"_utilsStorage"],[21,19,2,0],[21,22,2,0,"require"],[21,29,2,0],[21,30,2,0,"_dependencyMap"],[21,44,2,0],[22,2,2,43],[22,6,2,43,"_reactJsxDevRuntime"],[22,25,2,43],[22,28,2,43,"require"],[22,35,2,43],[22,36,2,43,"_dependencyMap"],[22,50,2,43],[23,2,21,0],[23,8,21,6,"AuthContext"],[23,19,21,17],[23,35,21,20],[23,39,21,20,"createContext"],[23,45,21,33],[23,46,21,33,"createContext"],[23,59,21,33],[23,61,21,59],[23,65,21,63],[23,66,21,64],[24,2,23,0],[24,8,23,6,"USER_KEY"],[24,16,23,14],[24,19,23,17],[24,37,23,35],[25,2,24,0],[25,8,24,6,"AUTH_USERS_KEY"],[25,22,24,20],[25,25,24,23],[25,49,24,47],[26,2,33,7],[26,8,33,13,"AuthProvider"],[26,20,33,60],[26,23,33,63,"AuthProvider"],[26,24,33,64],[27,4,33,66,"children"],[28,2,33,75],[28,3,33,76],[28,8,33,81],[29,4,34,2],[29,10,34,8],[29,11,34,9,"user"],[29,15,34,13],[29,17,34,15,"setUser"],[29,24,34,22],[29,25,34,23],[29,28,34,26],[29,32,34,26,"useState"],[29,38,34,34],[29,39,34,34,"useState"],[29,47,34,34],[29,49,34,48],[29,53,34,52],[29,54,34,53],[30,4,35,2],[30,10,35,8],[30,11,35,9,"isLoading"],[30,20,35,18],[30,22,35,20,"setIsLoading"],[30,34,35,32],[30,35,35,33],[30,38,35,36],[30,42,35,36,"useState"],[30,48,35,44],[30,49,35,44,"useState"],[30,57,35,44],[30,59,35,45],[30,63,35,49],[30,64,35,50],[31,4,37,2],[31,8,37,2,"useEffect"],[31,14,37,11],[31,15,37,11,"useEffect"],[31,24,37,11],[31,26,37,12],[31,32,37,18],[32,6,38,4,"loadUser"],[32,14,38,12],[32,15,38,13],[32,16,38,14],[33,4,39,2],[33,5,39,3],[33,7,39,5],[33,9,39,7],[33,10,39,8],[34,4,41,2],[34,10,41,8,"loadUser"],[34,18,41,16],[34,21,41,19],[34,27,41,19,"loadUser"],[34,28,41,19],[34,33,41,31],[35,6,42,4],[35,10,42,8],[36,8,43,6],[36,14,43,12,"storedUser"],[36,24,43,22],[36,27,43,25],[36,33,43,31,"storage"],[36,46,43,38],[36,47,43,38,"storage"],[36,54,43,38],[36,55,43,39,"getItem"],[36,62,43,46],[36,63,43,53,"USER_KEY"],[36,71,43,61],[36,72,43,62],[37,8,44,6,"setUser"],[37,15,44,13],[37,16,44,14,"storedUser"],[37,26,44,24],[37,27,44,25],[38,6,45,4],[38,7,45,5],[38,8,45,6],[38,15,45,13,"error"],[38,20,45,18],[38,22,45,20],[39,8,46,6,"console"],[39,15,46,13],[39,16,46,14,"error"],[39,21,46,19],[39,22,46,20],[39,43,46,41],[39,45,46,43,"error"],[39,50,46,48],[39,51,46,49],[40,6,47,4],[40,7,47,5],[40,16,47,14],[41,8,48,6,"setIsLoading"],[41,20,48,18],[41,21,48,19],[41,26,48,24],[41,27,48,25],[42,6,49,4],[43,4,50,2],[43,5,50,3],[44,4,52,2],[44,10,52,8,"getAuthUsers"],[44,22,52,20],[44,25,52,23],[44,31,52,23,"getAuthUsers"],[44,32,52,23],[44,37,52,62],[45,6,53,4],[45,12,53,10,"users"],[45,17,53,15],[45,20,53,18],[45,26,53,24,"storage"],[45,39,53,31],[45,40,53,31,"storage"],[45,47,53,31],[45,48,53,32,"getItem"],[45,55,53,39],[45,56,53,58,"AUTH_USERS_KEY"],[45,70,53,72],[45,71,53,73],[46,6,54,4],[46,13,54,11,"users"],[46,18,54,16],[46,22,54,20],[46,24,54,22],[47,4,55,2],[47,5,55,3],[48,4,57,2],[48,10,57,8,"saveAuthUsers"],[48,23,57,21],[48,26,57,24],[48,32,57,31,"users"],[48,37,57,54],[48,41,57,74],[49,6,58,4],[49,12,58,10,"storage"],[49,25,58,17],[49,26,58,17,"storage"],[49,33,58,17],[49,34,58,18,"setItem"],[49,41,58,25],[49,42,58,26,"AUTH_USERS_KEY"],[49,56,58,40],[49,58,58,42,"users"],[49,63,58,47],[49,64,58,48],[50,4,59,2],[50,5,59,3],[51,4,61,2],[51,10,61,8,"signUp"],[51,16,61,14],[51,19,61,17],[51,25,61,17,"signUp"],[51,26,61,24,"email"],[51,31,61,37],[51,33,61,39,"password"],[51,41,61,55],[51,46,61,75],[52,6,62,4],[52,12,62,10,"users"],[52,17,62,15],[52,20,62,18],[52,26,62,24,"getAuthUsers"],[52,38,62,36],[52,39,62,37],[52,40,62,38],[54,6,64,4],[55,6,65,4],[55,10,65,8,"users"],[55,15,65,13],[55,16,65,14,"some"],[55,20,65,18],[55,21,65,19,"u"],[55,22,65,20],[55,26,65,24,"u"],[55,27,65,25],[55,28,65,26,"email"],[55,33,65,31],[55,38,65,36,"email"],[55,43,65,41],[55,44,65,42],[55,46,65,44],[56,8,66,6],[56,14,66,12],[56,18,66,16,"Error"],[56,23,66,21],[56,24,66,22],[56,52,66,50],[56,53,66,51],[57,6,67,4],[59,6,69,4],[60,6,70,4],[60,12,70,10,"newAuthUser"],[60,23,70,37],[60,26,70,40],[61,8,71,6,"id"],[61,10,71,8],[61,12,71,10],[61,17,71,15,"Date"],[61,21,71,19],[61,22,71,20,"now"],[61,25,71,23],[61,26,71,24],[61,27,71,25],[61,29,71,27],[62,8,72,6,"email"],[62,13,72,11],[63,8,73,6,"password"],[63,16,73,14],[63,17,73,16],[64,6,74,4],[64,7,74,5],[65,6,76,4,"users"],[65,11,76,9],[65,12,76,10,"push"],[65,16,76,14],[65,17,76,15,"newAuthUser"],[65,28,76,26],[65,29,76,27],[66,6,77,4],[66,12,77,10,"saveAuthUsers"],[66,25,77,23],[66,26,77,24,"users"],[66,31,77,29],[66,32,77,30],[68,6,79,4],[69,6,80,4],[69,12,80,10,"currentUser"],[69,23,80,27],[69,26,80,30],[70,8,81,6,"id"],[70,10,81,8],[70,12,81,10,"newAuthUser"],[70,23,81,21],[70,24,81,22,"id"],[70,26,81,24],[71,8,82,6,"email"],[71,13,82,11],[71,15,82,13,"newAuthUser"],[71,26,82,24],[71,27,82,25,"email"],[72,6,83,4],[72,7,83,5],[73,6,84,4,"setUser"],[73,13,84,11],[73,14,84,12,"currentUser"],[73,25,84,23],[73,26,84,24],[74,6,85,4],[74,12,85,10,"storage"],[74,25,85,17],[74,26,85,17,"storage"],[74,33,85,17],[74,34,85,18,"setItem"],[74,41,85,25],[74,42,85,26,"USER_KEY"],[74,50,85,34],[74,52,85,36,"currentUser"],[74,63,85,47],[74,64,85,48],[75,4,86,2],[75,5,86,3],[76,4,88,2],[76,10,88,8,"signIn"],[76,16,88,14],[76,19,88,17],[76,25,88,17,"signIn"],[76,26,88,24,"email"],[76,31,88,37],[76,33,88,39,"password"],[76,41,88,55],[76,46,88,75],[77,6,89,4],[77,12,89,10,"users"],[77,17,89,15],[77,20,89,18],[77,26,89,24,"getAuthUsers"],[77,38,89,36],[77,39,89,37],[77,40,89,38],[78,6,91,4],[78,12,91,10,"authUser"],[78,20,91,18],[78,23,91,21,"users"],[78,28,91,26],[78,29,91,27,"find"],[78,33,91,31],[78,34,91,32,"u"],[78,35,91,33],[78,39,91,37,"u"],[78,40,91,38],[78,41,91,39,"email"],[78,46,91,44],[78,51,91,49,"email"],[78,56,91,54],[78,60,91,58,"u"],[78,61,91,59],[78,62,91,60,"password"],[78,70,91,68],[78,75,91,73,"password"],[78,83,91,81],[78,84,91,82],[79,6,92,4],[79,10,92,8],[79,11,92,9,"authUser"],[79,19,92,17],[79,21,92,19],[80,8,93,6],[80,14,93,12],[80,18,93,16,"Error"],[80,23,93,21],[80,24,93,22],[80,54,93,52],[80,55,93,53],[81,6,94,4],[82,6,96,4],[82,12,96,10,"currentUser"],[82,23,96,27],[82,26,96,30],[83,8,97,6,"id"],[83,10,97,8],[83,12,97,10,"authUser"],[83,20,97,18],[83,21,97,19,"id"],[83,23,97,21],[84,8,98,6,"email"],[84,13,98,11],[84,15,98,13,"authUser"],[84,23,98,21],[84,24,98,22,"email"],[84,29,98,27],[85,8,99,6,"role"],[85,12,99,10],[85,14,99,12,"authUser"],[85,22,99,20],[85,23,99,21,"role"],[86,6,100,4],[86,7,100,5],[87,6,101,4,"setUser"],[87,13,101,11],[87,14,101,12,"currentUser"],[87,25,101,23],[87,26,101,24],[88,6,102,4],[88,12,102,10,"storage"],[88,25,102,17],[88,26,102,17,"storage"],[88,33,102,17],[88,34,102,18,"setItem"],[88,41,102,25],[88,42,102,26,"USER_KEY"],[88,50,102,34],[88,52,102,36,"currentUser"],[88,63,102,47],[88,64,102,48],[89,4,103,2],[89,5,103,3],[90,4,105,2],[90,10,105,8,"signOut"],[90,17,105,15],[90,20,105,18],[90,26,105,18,"signOut"],[90,27,105,18],[90,32,105,45],[91,6,106,4,"setUser"],[91,13,106,11],[91,14,106,12],[91,18,106,16],[91,19,106,17],[92,6,107,4],[92,12,107,10,"storage"],[92,25,107,17],[92,26,107,17,"storage"],[92,33,107,17],[92,34,107,18,"removeItem"],[92,44,107,28],[92,45,107,29,"USER_KEY"],[92,53,107,37],[92,54,107,38],[93,4,108,2],[93,5,108,3],[94,4,110,2],[94,10,110,8,"setRole"],[94,17,110,15],[94,20,110,18],[94,26,110,25,"role"],[94,30,110,39],[94,34,110,59],[95,6,111,4],[95,10,111,8],[95,11,111,9,"user"],[95,15,111,13],[95,17,111,15],[96,8,112,6],[96,14,112,12],[96,18,112,16,"Error"],[96,23,112,21],[96,24,112,22],[96,46,112,44],[96,47,112,45],[97,6,113,4],[99,6,115,4],[100,6,116,4],[100,12,116,10,"updatedUser"],[100,23,116,27],[100,26,116,30],[101,8,116,32],[101,11,116,35,"user"],[101,15,116,39],[102,8,116,41,"role"],[103,6,116,46],[103,7,116,47],[104,6,117,4,"setUser"],[104,13,117,11],[104,14,117,12,"updatedUser"],[104,25,117,23],[104,26,117,24],[105,6,118,4],[105,12,118,10,"storage"],[105,25,118,17],[105,26,118,17,"storage"],[105,33,118,17],[105,34,118,18,"setItem"],[105,41,118,25],[105,42,118,26,"USER_KEY"],[105,50,118,34],[105,52,118,36,"updatedUser"],[105,63,118,47],[105,64,118,48],[107,6,120,4],[108,6,121,4],[108,12,121,10,"users"],[108,17,121,15],[108,20,121,18],[108,26,121,24,"getAuthUsers"],[108,38,121,36],[108,39,121,37],[108,40,121,38],[109,6,122,4],[109,12,122,10,"index"],[109,17,122,15],[109,20,122,18,"users"],[109,25,122,23],[109,26,122,24,"findIndex"],[109,35,122,33],[109,36,122,34,"u"],[109,37,122,35],[109,41,122,39,"u"],[109,42,122,40],[109,43,122,41,"id"],[109,45,122,43],[109,50,122,48,"user"],[109,54,122,52],[109,55,122,53,"id"],[109,57,122,55],[109,58,122,56],[110,6,123,4],[110,10,123,8,"index"],[110,15,123,13],[110,20,123,18],[110,21,123,19],[110,22,123,20],[110,24,123,22],[111,8,124,6,"users"],[111,13,124,11],[111,14,124,12,"index"],[111,19,124,17],[111,20,124,18],[111,21,124,19,"role"],[111,25,124,23],[111,28,124,26,"role"],[111,32,124,30],[112,8,125,6],[112,14,125,12,"saveAuthUsers"],[112,27,125,25],[112,28,125,26,"users"],[112,33,125,31],[112,34,125,32],[113,6,126,4],[114,4,127,2],[114,5,127,3],[115,4,129,2],[115,24,130,4],[115,28,130,4,"_reactJsxDevRuntime"],[115,47,130,4],[115,48,130,4,"jsxDEV"],[115,54,130,4],[115,56,130,5,"AuthContext"],[115,67,130,16],[115,68,130,17,"Provider"],[115,76,130,25],[116,6,130,26,"value"],[116,11,130,31],[116,13,130,33],[117,8,130,35,"user"],[117,12,130,39],[118,8,130,41,"isLoading"],[118,17,130,50],[119,8,130,52,"signUp"],[119,14,130,58],[120,8,130,60,"signIn"],[120,14,130,66],[121,8,130,68,"signOut"],[121,15,130,75],[122,8,130,77,"setRole"],[123,6,130,85],[123,7,130,87],[124,6,130,87,"children"],[124,14,130,87],[124,16,131,7,"children"],[125,4,131,15],[126,6,131,15,"fileName"],[126,14,131,15],[126,16,131,15,"_jsxFileName"],[126,28,131,15],[127,6,131,15,"lineNumber"],[127,16,131,15],[128,6,131,15,"columnNumber"],[128,18,131,15],[129,4,131,15],[129,11,132,26],[129,12,132,27],[130,2,134,0],[130,3,134,1],[131,2,136,7],[131,8,136,13,"useAuth"],[131,15,136,20],[131,18,136,23,"useAuth"],[131,19,136,23],[131,24,136,47],[132,4,137,2],[132,10,137,8,"context"],[132,17,137,15],[132,20,137,18],[132,24,137,18,"useContext"],[132,30,137,28],[132,31,137,28,"useContext"],[132,41,137,28],[132,43,137,29,"AuthContext"],[132,54,137,40],[132,55,137,41],[133,4,138,2],[133,8,138,6],[133,9,138,7,"context"],[133,16,138,14],[133,18,138,16],[134,6,139,4],[134,12,139,10],[134,16,139,14,"Error"],[134,21,139,19],[134,22,139,20],[134,64,139,62],[134,65,139,63],[135,4,140,2],[136,4,141,2],[136,11,141,9,"context"],[136,18,141,16],[137,2,142,0],[137,3,142,1],[138,0,142,2],[138,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadUser","getAuthUsers","saveAuthUsers","signUp","users.some$argument_0","signIn","users.find$argument_0","signOut","setRole","users.findIndex$argument_0","useAuth"],"mappings":"AAA;+DCgC;YCI;GDE;mBEE;GFS;uBGE;GHG;wBIE;GJE;iBKE;mBCI,sBD;GLqB;iBOE;gCCG,iDD;GPY;kBSE;GTG;kBUE;kCCY,qBD;GVK;CDO;uBaE;CbM"},"hasCjsExports":false},"type":"js/module"}]}