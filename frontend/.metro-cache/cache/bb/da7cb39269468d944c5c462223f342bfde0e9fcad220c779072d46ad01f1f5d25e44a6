{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":28},"end":{"line":2,"column":78,"index":106}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":107},"end":{"line":3,"column":69,"index":176}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\"; // contexts/AuthContext.tsx\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _reactJsxDevRuntime = require(_dependencyMap[2], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n\n  // Keys\n  const USER_KEY = '@shiftmatch:user';\n  const USER_DB_KEY = '@shiftmatch:users_database';\n  const AuthProvider = ({\n    children\n  }) => {\n    const [user, setUser] = (0, _react.useState)(null);\n\n    // App Start â†’ Benutzer laden\n    (0, _react.useEffect)(() => {\n      (async () => {\n        const stored = await AsyncStorage.default.getItem(USER_KEY);\n        if (stored) setUser(JSON.parse(stored));\n      })();\n    }, []);\n\n    // -----------------------------\n    // Hilfsfunktionen\n    // -----------------------------\n\n    const normalizeEmail = email => {\n      return email.trim().toLowerCase();\n    };\n    const loadUserDB = async () => {\n      const stored = await AsyncStorage.default.getItem(USER_DB_KEY);\n      return stored ? JSON.parse(stored) : {};\n    };\n    const saveUserDB = async db => {\n      await AsyncStorage.default.setItem(USER_DB_KEY, JSON.stringify(db));\n    };\n\n    // -----------------------------\n    // SIGN IN (LOGIN)\n    // -----------------------------\n    const signIn = async (email, password) => {\n      const normalized = normalizeEmail(email);\n      const db = await loadUserDB();\n      const existing = db[normalized];\n      if (!existing) {\n        throw new Error('Diese E-Mail ist nicht registriert.');\n      }\n      if (existing.password !== password) {\n        throw new Error('E-Mail oder Passwort falsch.');\n      }\n\n      // Login OK\n      await AsyncStorage.default.setItem(USER_KEY, JSON.stringify(existing));\n      setUser(existing);\n      return existing;\n    };\n\n    // -----------------------------\n    // SIGN UP (REGISTRIEREN)\n    // -----------------------------\n    const signUp = async (email, password) => {\n      const normalized = normalizeEmail(email);\n      const db = await loadUserDB();\n      if (db[normalized]) {\n        throw new Error('Diese E-Mail ist bereits registriert. Bitte logge dich ein.');\n      }\n      const newUser = {\n        id: 'u-' + Date.now().toString(),\n        email: normalized,\n        password\n      };\n      db[normalized] = newUser;\n      await saveUserDB(db);\n\n      // Direkt einloggen\n      await AsyncStorage.default.setItem(USER_KEY, JSON.stringify(newUser));\n      setUser(newUser);\n      return newUser;\n    };\n\n    // -----------------------------\n    // ROLLE SPEICHERN\n    // -----------------------------\n    const setRole = async role => {\n      if (!user) return;\n      const updated = {\n        ...user,\n        role\n      };\n      const db = await loadUserDB();\n      db[user.email] = updated;\n      await saveUserDB(db);\n      await AsyncStorage.default.setItem(USER_KEY, JSON.stringify(updated));\n      setUser(updated);\n    };\n\n    // -----------------------------\n    // LOGOUT\n    // -----------------------------\n    const signOut = async () => {\n      await AsyncStorage.default.removeItem(USER_KEY);\n      setUser(null);\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        signIn,\n        signUp,\n        signOut,\n        setRole\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 5\n    }, this);\n  };\n  const useAuth = () => {\n    const ctx = (0, _react.useContext)(AuthContext);\n    if (!ctx) throw new Error('useAuth must be used inside AuthProvider');\n    return ctx;\n  };\n});","lineCount":148,"map":[[4,63,1,0],[5,2,1,0,"Object"],[5,8,1,0],[5,9,1,0,"defineProperty"],[5,23,1,0],[5,24,1,0,"exports"],[5,31,1,0],[6,4,1,0,"value"],[6,9,1,0],[7,2,1,0],[8,2,1,0],[8,11,1,0,"_interopDefault"],[8,27,1,0,"e"],[8,28,1,0],[9,4,1,0],[9,11,1,0,"e"],[9,12,1,0],[9,16,1,0,"e"],[9,17,1,0],[9,18,1,0,"__esModule"],[9,28,1,0],[9,31,1,0,"e"],[9,32,1,0],[10,6,1,0,"default"],[10,13,1,0],[10,15,1,0,"e"],[11,4,1,0],[12,2,1,0],[13,2,26,0,"Object"],[13,8,26,0],[13,9,26,0,"defineProperty"],[13,23,26,0],[13,24,26,0,"exports"],[13,31,26,0],[14,4,26,0,"enumerable"],[14,14,26,0],[15,4,26,0,"get"],[15,7,26,0],[15,18,26,0,"get"],[15,19,26,0],[16,6,26,0],[16,13,26,0,"AuthProvider"],[16,25,26,0],[17,4,26,0],[18,2,26,0],[19,2,136,0,"Object"],[19,8,136,0],[19,9,136,0,"defineProperty"],[19,23,136,0],[19,24,136,0,"exports"],[19,31,136,0],[20,4,136,0,"enumerable"],[20,14,136,0],[21,4,136,0,"get"],[21,7,136,0],[21,18,136,0,"get"],[21,19,136,0],[22,6,136,0],[22,13,136,0,"useAuth"],[22,20,136,0],[23,4,136,0],[24,2,136,0],[25,2,2,0],[25,6,2,0,"_react"],[25,12,2,0],[25,15,2,0,"require"],[25,22,2,0],[25,23,2,0,"_dependencyMap"],[25,37,2,0],[26,2,3,0],[26,6,3,0,"_reactNativeAsyncStorageAsyncStorage"],[26,42,3,0],[26,45,3,0,"require"],[26,52,3,0],[26,53,3,0,"_dependencyMap"],[26,67,3,0],[27,2,3,0],[27,6,3,0,"AsyncStorage"],[27,18,3,0],[27,21,3,0,"_interopDefault"],[27,36,3,0],[27,37,3,0,"_reactNativeAsyncStorageAsyncStorage"],[27,73,3,0],[28,2,3,69],[28,6,3,69,"_reactJsxDevRuntime"],[28,25,3,69],[28,28,3,69,"require"],[28,35,3,69],[28,36,3,69,"_dependencyMap"],[28,50,3,69],[29,2,20,0],[29,8,20,6,"AuthContext"],[29,19,20,17],[29,35,20,20],[29,39,20,20,"createContext"],[29,45,20,33],[29,46,20,33,"createContext"],[29,59,20,33],[29,61,20,63,"undefined"],[29,70,20,72],[29,71,20,73],[31,2,22,0],[32,2,23,0],[32,8,23,6,"USER_KEY"],[32,16,23,14],[32,19,23,17],[32,37,23,35],[33,2,24,0],[33,8,24,6,"USER_DB_KEY"],[33,19,24,17],[33,22,24,20],[33,50,24,48],[34,2,26,7],[34,8,26,13,"AuthProvider"],[34,20,26,25],[34,23,26,28,"AuthProvider"],[34,24,26,29],[35,4,26,31,"children"],[36,2,26,71],[36,3,26,72],[36,8,26,77],[37,4,27,2],[37,10,27,8],[37,11,27,9,"user"],[37,15,27,13],[37,17,27,15,"setUser"],[37,24,27,22],[37,25,27,23],[37,28,27,26],[37,32,27,26,"useState"],[37,38,27,34],[37,39,27,34,"useState"],[37,47,27,34],[37,49,27,48],[37,53,27,52],[37,54,27,53],[39,4,29,2],[40,4,30,2],[40,8,30,2,"useEffect"],[40,14,30,11],[40,15,30,11,"useEffect"],[40,24,30,11],[40,26,30,12],[40,32,30,18],[41,6,31,4],[41,7,31,5],[41,19,31,17],[42,8,32,6],[42,14,32,12,"stored"],[42,20,32,18],[42,23,32,21],[42,29,32,27,"AsyncStorage"],[42,41,32,39],[42,42,32,39,"default"],[42,49,32,39],[42,50,32,40,"getItem"],[42,57,32,47],[42,58,32,48,"USER_KEY"],[42,66,32,56],[42,67,32,57],[43,8,33,6],[43,12,33,10,"stored"],[43,18,33,16],[43,20,33,18,"setUser"],[43,27,33,25],[43,28,33,26,"JSON"],[43,32,33,30],[43,33,33,31,"parse"],[43,38,33,36],[43,39,33,37,"stored"],[43,45,33,43],[43,46,33,44],[43,47,33,45],[44,6,34,4],[44,7,34,5],[44,9,34,7],[44,10,34,8],[45,4,35,2],[45,5,35,3],[45,7,35,5],[45,9,35,7],[45,10,35,8],[47,4,37,2],[48,4,38,2],[49,4,39,2],[51,4,41,2],[51,10,41,8,"normalizeEmail"],[51,24,41,22],[51,27,41,26,"email"],[51,32,41,39],[51,36,41,44],[52,6,42,4],[52,13,42,11,"email"],[52,18,42,16],[52,19,42,17,"trim"],[52,23,42,21],[52,24,42,22],[52,25,42,23],[52,26,42,24,"toLowerCase"],[52,37,42,35],[52,38,42,36],[52,39,42,37],[53,4,43,2],[53,5,43,3],[54,4,45,2],[54,10,45,8,"loadUserDB"],[54,20,45,18],[54,23,45,21],[54,29,45,21,"loadUserDB"],[54,30,45,21],[54,35,45,64],[55,6,46,4],[55,12,46,10,"stored"],[55,18,46,16],[55,21,46,19],[55,27,46,25,"AsyncStorage"],[55,39,46,37],[55,40,46,37,"default"],[55,47,46,37],[55,48,46,38,"getItem"],[55,55,46,45],[55,56,46,46,"USER_DB_KEY"],[55,67,46,57],[55,68,46,58],[56,6,47,4],[56,13,47,11,"stored"],[56,19,47,17],[56,22,47,20,"JSON"],[56,26,47,24],[56,27,47,25,"parse"],[56,32,47,30],[56,33,47,31,"stored"],[56,39,47,37],[56,40,47,38],[56,43,47,41],[56,44,47,42],[56,45,47,43],[57,4,48,2],[57,5,48,3],[58,4,50,2],[58,10,50,8,"saveUserDB"],[58,20,50,18],[58,23,50,21],[58,29,50,28,"db"],[58,31,50,52],[58,35,50,57],[59,6,51,4],[59,12,51,10,"AsyncStorage"],[59,24,51,22],[59,25,51,22,"default"],[59,32,51,22],[59,33,51,23,"setItem"],[59,40,51,30],[59,41,51,31,"USER_DB_KEY"],[59,52,51,42],[59,54,51,44,"JSON"],[59,58,51,48],[59,59,51,49,"stringify"],[59,68,51,58],[59,69,51,59,"db"],[59,71,51,61],[59,72,51,62],[59,73,51,63],[60,4,52,2],[60,5,52,3],[62,4,54,2],[63,4,55,2],[64,4,56,2],[65,4,57,2],[65,10,57,8,"signIn"],[65,16,57,14],[65,19,57,17],[65,25,57,17,"signIn"],[65,26,57,24,"email"],[65,31,57,37],[65,33,57,39,"password"],[65,41,57,55],[65,46,57,75],[66,6,58,4],[66,12,58,10,"normalized"],[66,22,58,20],[66,25,58,23,"normalizeEmail"],[66,39,58,37],[66,40,58,38,"email"],[66,45,58,43],[66,46,58,44],[67,6,59,4],[67,12,59,10,"db"],[67,14,59,12],[67,17,59,15],[67,23,59,21,"loadUserDB"],[67,33,59,31],[67,34,59,32],[67,35,59,33],[68,6,61,4],[68,12,61,10,"existing"],[68,20,61,18],[68,23,61,21,"db"],[68,25,61,23],[68,26,61,24,"normalized"],[68,36,61,34],[68,37,61,35],[69,6,63,4],[69,10,63,8],[69,11,63,9,"existing"],[69,19,63,17],[69,21,63,19],[70,8,64,6],[70,14,64,12],[70,18,64,16,"Error"],[70,23,64,21],[70,24,64,22],[70,61,64,59],[70,62,64,60],[71,6,65,4],[72,6,67,4],[72,10,67,8,"existing"],[72,18,67,16],[72,19,67,17,"password"],[72,27,67,25],[72,32,67,30,"password"],[72,40,67,38],[72,42,67,40],[73,8,68,6],[73,14,68,12],[73,18,68,16,"Error"],[73,23,68,21],[73,24,68,22],[73,54,68,52],[73,55,68,53],[74,6,69,4],[76,6,71,4],[77,6,72,4],[77,12,72,10,"AsyncStorage"],[77,24,72,22],[77,25,72,22,"default"],[77,32,72,22],[77,33,72,23,"setItem"],[77,40,72,30],[77,41,72,31,"USER_KEY"],[77,49,72,39],[77,51,72,41,"JSON"],[77,55,72,45],[77,56,72,46,"stringify"],[77,65,72,55],[77,66,72,56,"existing"],[77,74,72,64],[77,75,72,65],[77,76,72,66],[78,6,73,4,"setUser"],[78,13,73,11],[78,14,73,12,"existing"],[78,22,73,20],[78,23,73,21],[79,6,75,4],[79,13,75,11,"existing"],[79,21,75,19],[80,4,76,2],[80,5,76,3],[82,4,78,2],[83,4,79,2],[84,4,80,2],[85,4,81,2],[85,10,81,8,"signUp"],[85,16,81,14],[85,19,81,17],[85,25,81,17,"signUp"],[85,26,81,24,"email"],[85,31,81,37],[85,33,81,39,"password"],[85,41,81,55],[85,46,81,75],[86,6,82,4],[86,12,82,10,"normalized"],[86,22,82,20],[86,25,82,23,"normalizeEmail"],[86,39,82,37],[86,40,82,38,"email"],[86,45,82,43],[86,46,82,44],[87,6,83,4],[87,12,83,10,"db"],[87,14,83,12],[87,17,83,15],[87,23,83,21,"loadUserDB"],[87,33,83,31],[87,34,83,32],[87,35,83,33],[88,6,85,4],[88,10,85,8,"db"],[88,12,85,10],[88,13,85,11,"normalized"],[88,23,85,21],[88,24,85,22],[88,26,85,24],[89,8,86,6],[89,14,86,12],[89,18,86,16,"Error"],[89,23,86,21],[89,24,86,22],[89,85,86,83],[89,86,86,84],[90,6,87,4],[91,6,89,4],[91,12,89,10,"newUser"],[91,19,89,23],[91,22,89,26],[92,8,90,6,"id"],[92,10,90,8],[92,12,90,10],[92,16,90,14],[92,19,90,17,"Date"],[92,23,90,21],[92,24,90,22,"now"],[92,27,90,25],[92,28,90,26],[92,29,90,27],[92,30,90,28,"toString"],[92,38,90,36],[92,39,90,37],[92,40,90,38],[93,8,91,6,"email"],[93,13,91,11],[93,15,91,13,"normalized"],[93,25,91,23],[94,8,92,6,"password"],[95,6,93,4],[95,7,93,5],[96,6,95,4,"db"],[96,8,95,6],[96,9,95,7,"normalized"],[96,19,95,17],[96,20,95,18],[96,23,95,21,"newUser"],[96,30,95,28],[97,6,96,4],[97,12,96,10,"saveUserDB"],[97,22,96,20],[97,23,96,21,"db"],[97,25,96,23],[97,26,96,24],[99,6,98,4],[100,6,99,4],[100,12,99,10,"AsyncStorage"],[100,24,99,22],[100,25,99,22,"default"],[100,32,99,22],[100,33,99,23,"setItem"],[100,40,99,30],[100,41,99,31,"USER_KEY"],[100,49,99,39],[100,51,99,41,"JSON"],[100,55,99,45],[100,56,99,46,"stringify"],[100,65,99,55],[100,66,99,56,"newUser"],[100,73,99,63],[100,74,99,64],[100,75,99,65],[101,6,100,4,"setUser"],[101,13,100,11],[101,14,100,12,"newUser"],[101,21,100,19],[101,22,100,20],[102,6,102,4],[102,13,102,11,"newUser"],[102,20,102,18],[103,4,103,2],[103,5,103,3],[105,4,105,2],[106,4,106,2],[107,4,107,2],[108,4,108,2],[108,10,108,8,"setRole"],[108,17,108,15],[108,20,108,18],[108,26,108,25,"role"],[108,30,108,52],[108,34,108,57],[109,6,109,4],[109,10,109,8],[109,11,109,9,"user"],[109,15,109,13],[109,17,109,15],[110,6,111,4],[110,12,111,10,"updated"],[110,19,111,17],[110,22,111,20],[111,8,111,22],[111,11,111,25,"user"],[111,15,111,29],[112,8,111,31,"role"],[113,6,111,36],[113,7,111,37],[114,6,113,4],[114,12,113,10,"db"],[114,14,113,12],[114,17,113,15],[114,23,113,21,"loadUserDB"],[114,33,113,31],[114,34,113,32],[114,35,113,33],[115,6,114,4,"db"],[115,8,114,6],[115,9,114,7,"user"],[115,13,114,11],[115,14,114,12,"email"],[115,19,114,17],[115,20,114,18],[115,23,114,21,"updated"],[115,30,114,28],[116,6,115,4],[116,12,115,10,"saveUserDB"],[116,22,115,20],[116,23,115,21,"db"],[116,25,115,23],[116,26,115,24],[117,6,117,4],[117,12,117,10,"AsyncStorage"],[117,24,117,22],[117,25,117,22,"default"],[117,32,117,22],[117,33,117,23,"setItem"],[117,40,117,30],[117,41,117,31,"USER_KEY"],[117,49,117,39],[117,51,117,41,"JSON"],[117,55,117,45],[117,56,117,46,"stringify"],[117,65,117,55],[117,66,117,56,"updated"],[117,73,117,63],[117,74,117,64],[117,75,117,65],[118,6,118,4,"setUser"],[118,13,118,11],[118,14,118,12,"updated"],[118,21,118,19],[118,22,118,20],[119,4,119,2],[119,5,119,3],[121,4,121,2],[122,4,122,2],[123,4,123,2],[124,4,124,2],[124,10,124,8,"signOut"],[124,17,124,15],[124,20,124,18],[124,26,124,18,"signOut"],[124,27,124,18],[124,32,124,30],[125,6,125,4],[125,12,125,10,"AsyncStorage"],[125,24,125,22],[125,25,125,22,"default"],[125,32,125,22],[125,33,125,23,"removeItem"],[125,43,125,33],[125,44,125,34,"USER_KEY"],[125,52,125,42],[125,53,125,43],[126,6,126,4,"setUser"],[126,13,126,11],[126,14,126,12],[126,18,126,16],[126,19,126,17],[127,4,127,2],[127,5,127,3],[128,4,129,2],[128,24,130,4],[128,28,130,4,"_reactJsxDevRuntime"],[128,47,130,4],[128,48,130,4,"jsxDEV"],[128,54,130,4],[128,56,130,5,"AuthContext"],[128,67,130,16],[128,68,130,17,"Provider"],[128,76,130,25],[129,6,130,26,"value"],[129,11,130,31],[129,13,130,33],[130,8,130,35,"user"],[130,12,130,39],[131,8,130,41,"signIn"],[131,14,130,47],[132,8,130,49,"signUp"],[132,14,130,55],[133,8,130,57,"signOut"],[133,15,130,64],[134,8,130,66,"setRole"],[135,6,130,74],[135,7,130,76],[136,6,130,76,"children"],[136,14,130,76],[136,16,131,7,"children"],[137,4,131,15],[138,6,131,15,"fileName"],[138,14,131,15],[138,16,131,15,"_jsxFileName"],[138,28,131,15],[139,6,131,15,"lineNumber"],[139,16,131,15],[140,6,131,15,"columnNumber"],[140,18,131,15],[141,4,131,15],[141,11,132,26],[141,12,132,27],[142,2,134,0],[142,3,134,1],[143,2,136,7],[143,8,136,13,"useAuth"],[143,15,136,20],[143,18,136,23,"useAuth"],[143,19,136,23],[143,24,136,46],[144,4,137,2],[144,10,137,8,"ctx"],[144,13,137,11],[144,16,137,14],[144,20,137,14,"useContext"],[144,26,137,24],[144,27,137,24,"useContext"],[144,37,137,24],[144,39,137,25,"AuthContext"],[144,50,137,36],[144,51,137,37],[145,4,138,2],[145,8,138,6],[145,9,138,7,"ctx"],[145,12,138,10],[145,14,138,12],[145,20,138,18],[145,24,138,22,"Error"],[145,29,138,27],[145,30,138,28],[145,72,138,70],[145,73,138,71],[146,4,139,2],[146,11,139,9,"ctx"],[146,14,139,12],[147,2,140,0],[147,3,140,1],[148,0,140,2],[148,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","<anonymous>","normalizeEmail","loadUserDB","saveUserDB","signIn","signUp","setRole","signOut","useAuth"],"mappings":"AAA;4BCyB;YCI;KCC;KDG;GDC;yBGM;GHE;qBIE;GJG;qBKE;GLE;iBMK;GNmB;iBOK;GPsB;kBQK;GRW;kBSK;GTG;CDO;uBWE;CXI"},"hasCjsExports":false},"type":"js/module"}]}