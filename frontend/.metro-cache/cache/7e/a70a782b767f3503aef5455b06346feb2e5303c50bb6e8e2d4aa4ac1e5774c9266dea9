{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../config","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":149},"end":{"line":3,"column":36,"index":185}}],"key":"pHqFJJBAh3HI9ZCkK8fFRwPv3x0=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _config = require(_dependencyMap[2], \"../config\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)({\n    user: null,\n    token: null,\n    loading: true,\n    login: async () => false,\n    logout: async () => {}\n  });\n  function AuthProvider({\n    children\n  }) {\n    const [token, setToken] = (0, _react.useState)(null);\n    const [user, setUser] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    async function loadSession() {\n      const storedToken = await AsyncStorage.default.getItem(\"token\");\n      if (storedToken) {\n        setToken(storedToken);\n        const me = await fetch(`${_config.API_URL}/auth/me`, {\n          headers: {\n            Authorization: `Bearer ${storedToken}`\n          }\n        });\n        const data = await me.json();\n        // Backend gibt userId zurück, aber Frontend erwartet id\n        const user = {\n          ...data,\n          id: data.userId\n        };\n        setUser(user);\n      }\n      setLoading(false);\n    }\n    (0, _react.useEffect)(() => {\n      loadSession();\n    }, []);\n    async function login(email, password) {\n      const res = await fetch(`${_config.API_URL}/auth/login`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          email,\n          password\n        })\n      });\n      if (!res.ok) return false;\n      const data = await res.json();\n      await AsyncStorage.default.setItem(\"token\", data.token);\n      setToken(data.token);\n      const me = await fetch(`${_config.API_URL}/auth/me`, {\n        headers: {\n          Authorization: `Bearer ${data.token}`\n        }\n      });\n      const userData = await me.json();\n\n      // Backend gibt userId zurück, aber Frontend erwartet id\n      const user = {\n        ...userData,\n        id: userData.userId\n      };\n      setUser(user);\n      return true;\n    }\n    async function signUp(email, password, role) {\n      const res = await fetch(`${_config.API_URL}/auth/signup`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          email,\n          password,\n          role\n        })\n      });\n      if (!res.ok) {\n        const error = await res.json();\n        throw new Error(error.detail || \"Registrierung fehlgeschlagen\");\n      }\n      const data = await res.json();\n      await AsyncStorage.default.setItem(\"token\", data.token);\n      setToken(data.token);\n      const me = await fetch(`${_config.API_URL}/auth/me`, {\n        headers: {\n          Authorization: `Bearer ${data.token}`\n        }\n      });\n      const userData = await me.json();\n\n      // Backend gibt userId zurück, aber Frontend erwartet id\n      const user = {\n        ...userData,\n        id: userData.userId\n      };\n      setUser(user);\n      return true;\n    }\n    async function logout() {\n      await AsyncStorage.default.removeItem(\"token\");\n      setUser(null);\n      setToken(null);\n    }\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        loading,\n        login,\n        signUp,\n        logout\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 5\n    }, this);\n  }\n  function useAuth() {\n    return (0, _react.useContext)(AuthContext);\n  }\n});","lineCount":143,"map":[[13,2,22,0,"exports"],[13,9,22,0],[13,10,22,0,"AuthProvider"],[13,22,22,0],[13,25,22,0,"AuthProvider"],[13,37,22,0],[14,2,112,0,"exports"],[14,9,112,0],[14,10,112,0,"useAuth"],[14,17,112,0],[14,20,112,0,"useAuth"],[14,27,112,0],[15,2,1,0],[15,6,1,0,"_react"],[15,12,1,0],[15,15,1,0,"require"],[15,22,1,0],[15,23,1,0,"_dependencyMap"],[15,37,1,0],[16,2,2,0],[16,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[16,42,2,0],[16,45,2,0,"require"],[16,52,2,0],[16,53,2,0,"_dependencyMap"],[16,67,2,0],[17,2,2,0],[17,6,2,0,"AsyncStorage"],[17,18,2,0],[17,21,2,0,"_interopDefault"],[17,36,2,0],[17,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[17,73,2,0],[18,2,3,0],[18,6,3,0,"_config"],[18,13,3,0],[18,16,3,0,"require"],[18,23,3,0],[18,24,3,0,"_dependencyMap"],[18,38,3,0],[19,2,3,36],[19,6,3,36,"_reactJsxDevRuntime"],[19,25,3,36],[19,28,3,36,"require"],[19,35,3,36],[19,36,3,36,"_dependencyMap"],[19,50,3,36],[20,2,14,0],[20,8,14,6,"AuthContext"],[20,19,14,17],[20,35,14,20],[20,39,14,20,"createContext"],[20,45,14,33],[20,46,14,33,"createContext"],[20,59,14,33],[20,61,14,52],[21,4,15,2,"user"],[21,8,15,6],[21,10,15,8],[21,14,15,12],[22,4,16,2,"token"],[22,9,16,7],[22,11,16,9],[22,15,16,13],[23,4,17,2,"loading"],[23,11,17,9],[23,13,17,11],[23,17,17,15],[24,4,18,2,"login"],[24,9,18,7],[24,11,18,9],[24,17,18,9,"login"],[24,18,18,9],[24,23,18,21],[24,28,18,26],[25,4,19,2,"logout"],[25,10,19,8],[25,12,19,10],[25,18,19,10,"logout"],[25,19,19,10],[25,24,19,22],[25,25,19,23],[26,2,20,0],[26,3,20,1],[26,4,20,2],[27,2,22,7],[27,11,22,16,"AuthProvider"],[27,23,22,28,"AuthProvider"],[27,24,22,29],[28,4,22,31,"children"],[29,2,22,40],[29,3,22,41],[29,5,22,43],[30,4,23,2],[30,10,23,8],[30,11,23,9,"token"],[30,16,23,14],[30,18,23,16,"setToken"],[30,26,23,24],[30,27,23,25],[30,30,23,28],[30,34,23,28,"useState"],[30,40,23,36],[30,41,23,36,"useState"],[30,49,23,36],[30,51,23,52],[30,55,23,56],[30,56,23,57],[31,4,24,2],[31,10,24,8],[31,11,24,9,"user"],[31,15,24,13],[31,17,24,15,"setUser"],[31,24,24,22],[31,25,24,23],[31,28,24,26],[31,32,24,26,"useState"],[31,38,24,34],[31,39,24,34,"useState"],[31,47,24,34],[31,49,24,40],[31,53,24,44],[31,54,24,45],[32,4,25,2],[32,10,25,8],[32,11,25,9,"loading"],[32,18,25,16],[32,20,25,18,"setLoading"],[32,30,25,28],[32,31,25,29],[32,34,25,32],[32,38,25,32,"useState"],[32,44,25,40],[32,45,25,40,"useState"],[32,53,25,40],[32,55,25,41],[32,59,25,45],[32,60,25,46],[33,4,27,2],[33,19,27,17,"loadSession"],[33,30,27,28,"loadSession"],[33,31,27,28],[33,33,27,31],[34,6,28,4],[34,12,28,10,"storedToken"],[34,23,28,21],[34,26,28,24],[34,32,28,30,"AsyncStorage"],[34,44,28,42],[34,45,28,42,"default"],[34,52,28,42],[34,53,28,43,"getItem"],[34,60,28,50],[34,61,28,51],[34,68,28,58],[34,69,28,59],[35,6,30,4],[35,10,30,8,"storedToken"],[35,21,30,19],[35,23,30,21],[36,8,31,6,"setToken"],[36,16,31,14],[36,17,31,15,"storedToken"],[36,28,31,26],[36,29,31,27],[37,8,32,6],[37,14,32,12,"me"],[37,16,32,14],[37,19,32,17],[37,25,32,23,"fetch"],[37,30,32,28],[37,31,32,29],[37,34,32,32,"API_URL"],[37,41,32,39],[37,42,32,39,"API_URL"],[37,49,32,39],[37,59,32,49],[37,61,32,51],[38,10,33,8,"headers"],[38,17,33,15],[38,19,33,17],[39,12,33,19,"Authorization"],[39,25,33,32],[39,27,33,34],[39,37,33,44,"storedToken"],[39,48,33,55],[40,10,33,58],[41,8,34,6],[41,9,34,7],[41,10,34,8],[42,8,35,6],[42,14,35,12,"data"],[42,18,35,16],[42,21,35,19],[42,27,35,25,"me"],[42,29,35,27],[42,30,35,28,"json"],[42,34,35,32],[42,35,35,33],[42,36,35,34],[43,8,36,6],[44,8,37,6],[44,14,37,12,"user"],[44,18,37,16],[44,21,37,19],[45,10,37,21],[45,13,37,24,"data"],[45,17,37,28],[46,10,37,30,"id"],[46,12,37,32],[46,14,37,34,"data"],[46,18,37,38],[46,19,37,39,"userId"],[47,8,37,46],[47,9,37,47],[48,8,38,6,"setUser"],[48,15,38,13],[48,16,38,14,"user"],[48,20,38,18],[48,21,38,19],[49,6,39,4],[50,6,41,4,"setLoading"],[50,16,41,14],[50,17,41,15],[50,22,41,20],[50,23,41,21],[51,4,42,2],[52,4,44,2],[52,8,44,2,"useEffect"],[52,14,44,11],[52,15,44,11,"useEffect"],[52,24,44,11],[52,26,44,12],[52,32,44,18],[53,6,45,4,"loadSession"],[53,17,45,15],[53,18,45,16],[53,19,45,17],[54,4,46,2],[54,5,46,3],[54,7,46,5],[54,9,46,7],[54,10,46,8],[55,4,48,2],[55,19,48,17,"login"],[55,24,48,22,"login"],[55,25,48,23,"email"],[55,30,48,36],[55,32,48,38,"password"],[55,40,48,54],[55,42,48,56],[56,6,49,4],[56,12,49,10,"res"],[56,15,49,13],[56,18,49,16],[56,24,49,22,"fetch"],[56,29,49,27],[56,30,49,28],[56,33,49,31,"API_URL"],[56,40,49,38],[56,41,49,38,"API_URL"],[56,48,49,38],[56,61,49,51],[56,63,49,53],[57,8,50,6,"method"],[57,14,50,12],[57,16,50,14],[57,22,50,20],[58,8,51,6,"headers"],[58,15,51,13],[58,17,51,15],[59,10,51,17],[59,24,51,31],[59,26,51,33],[60,8,51,52],[60,9,51,53],[61,8,52,6,"body"],[61,12,52,10],[61,14,52,12,"JSON"],[61,18,52,16],[61,19,52,17,"stringify"],[61,28,52,26],[61,29,52,27],[62,10,52,29,"email"],[62,15,52,34],[63,10,52,36,"password"],[64,8,52,45],[64,9,52,46],[65,6,53,4],[65,7,53,5],[65,8,53,6],[66,6,55,4],[66,10,55,8],[66,11,55,9,"res"],[66,14,55,12],[66,15,55,13,"ok"],[66,17,55,15],[66,19,55,17],[66,26,55,24],[66,31,55,29],[67,6,57,4],[67,12,57,10,"data"],[67,16,57,14],[67,19,57,17],[67,25,57,23,"res"],[67,28,57,26],[67,29,57,27,"json"],[67,33,57,31],[67,34,57,32],[67,35,57,33],[68,6,58,4],[68,12,58,10,"AsyncStorage"],[68,24,58,22],[68,25,58,22,"default"],[68,32,58,22],[68,33,58,23,"setItem"],[68,40,58,30],[68,41,58,31],[68,48,58,38],[68,50,58,40,"data"],[68,54,58,44],[68,55,58,45,"token"],[68,60,58,50],[68,61,58,51],[69,6,59,4,"setToken"],[69,14,59,12],[69,15,59,13,"data"],[69,19,59,17],[69,20,59,18,"token"],[69,25,59,23],[69,26,59,24],[70,6,61,4],[70,12,61,10,"me"],[70,14,61,12],[70,17,61,15],[70,23,61,21,"fetch"],[70,28,61,26],[70,29,61,27],[70,32,61,30,"API_URL"],[70,39,61,37],[70,40,61,37,"API_URL"],[70,47,61,37],[70,57,61,47],[70,59,61,49],[71,8,62,6,"headers"],[71,15,62,13],[71,17,62,15],[72,10,62,17,"Authorization"],[72,23,62,30],[72,25,62,32],[72,35,62,42,"data"],[72,39,62,46],[72,40,62,47,"token"],[72,45,62,52],[73,8,62,55],[74,6,63,4],[74,7,63,5],[74,8,63,6],[75,6,64,4],[75,12,64,10,"userData"],[75,20,64,18],[75,23,64,21],[75,29,64,27,"me"],[75,31,64,29],[75,32,64,30,"json"],[75,36,64,34],[75,37,64,35],[75,38,64,36],[77,6,66,4],[78,6,67,4],[78,12,67,10,"user"],[78,16,67,14],[78,19,67,17],[79,8,67,19],[79,11,67,22,"userData"],[79,19,67,30],[80,8,67,32,"id"],[80,10,67,34],[80,12,67,36,"userData"],[80,20,67,44],[80,21,67,45,"userId"],[81,6,67,52],[81,7,67,53],[82,6,68,4,"setUser"],[82,13,68,11],[82,14,68,12,"user"],[82,18,68,16],[82,19,68,17],[83,6,69,4],[83,13,69,11],[83,17,69,15],[84,4,70,2],[85,4,72,2],[85,19,72,17,"signUp"],[85,25,72,23,"signUp"],[85,26,72,24,"email"],[85,31,72,37],[85,33,72,39,"password"],[85,41,72,55],[85,43,72,57,"role"],[85,47,72,69],[85,49,72,71],[86,6,73,4],[86,12,73,10,"res"],[86,15,73,13],[86,18,73,16],[86,24,73,22,"fetch"],[86,29,73,27],[86,30,73,28],[86,33,73,31,"API_URL"],[86,40,73,38],[86,41,73,38,"API_URL"],[86,48,73,38],[86,62,73,52],[86,64,73,54],[87,8,74,6,"method"],[87,14,74,12],[87,16,74,14],[87,22,74,20],[88,8,75,6,"headers"],[88,15,75,13],[88,17,75,15],[89,10,75,17],[89,24,75,31],[89,26,75,33],[90,8,75,52],[90,9,75,53],[91,8,76,6,"body"],[91,12,76,10],[91,14,76,12,"JSON"],[91,18,76,16],[91,19,76,17,"stringify"],[91,28,76,26],[91,29,76,27],[92,10,76,29,"email"],[92,15,76,34],[93,10,76,36,"password"],[93,18,76,44],[94,10,76,46,"role"],[95,8,76,51],[95,9,76,52],[96,6,77,4],[96,7,77,5],[96,8,77,6],[97,6,79,4],[97,10,79,8],[97,11,79,9,"res"],[97,14,79,12],[97,15,79,13,"ok"],[97,17,79,15],[97,19,79,17],[98,8,80,6],[98,14,80,12,"error"],[98,19,80,17],[98,22,80,20],[98,28,80,26,"res"],[98,31,80,29],[98,32,80,30,"json"],[98,36,80,34],[98,37,80,35],[98,38,80,36],[99,8,81,6],[99,14,81,12],[99,18,81,16,"Error"],[99,23,81,21],[99,24,81,22,"error"],[99,29,81,27],[99,30,81,28,"detail"],[99,36,81,34],[99,40,81,38],[99,70,81,68],[99,71,81,69],[100,6,82,4],[101,6,84,4],[101,12,84,10,"data"],[101,16,84,14],[101,19,84,17],[101,25,84,23,"res"],[101,28,84,26],[101,29,84,27,"json"],[101,33,84,31],[101,34,84,32],[101,35,84,33],[102,6,85,4],[102,12,85,10,"AsyncStorage"],[102,24,85,22],[102,25,85,22,"default"],[102,32,85,22],[102,33,85,23,"setItem"],[102,40,85,30],[102,41,85,31],[102,48,85,38],[102,50,85,40,"data"],[102,54,85,44],[102,55,85,45,"token"],[102,60,85,50],[102,61,85,51],[103,6,86,4,"setToken"],[103,14,86,12],[103,15,86,13,"data"],[103,19,86,17],[103,20,86,18,"token"],[103,25,86,23],[103,26,86,24],[104,6,88,4],[104,12,88,10,"me"],[104,14,88,12],[104,17,88,15],[104,23,88,21,"fetch"],[104,28,88,26],[104,29,88,27],[104,32,88,30,"API_URL"],[104,39,88,37],[104,40,88,37,"API_URL"],[104,47,88,37],[104,57,88,47],[104,59,88,49],[105,8,89,6,"headers"],[105,15,89,13],[105,17,89,15],[106,10,89,17,"Authorization"],[106,23,89,30],[106,25,89,32],[106,35,89,42,"data"],[106,39,89,46],[106,40,89,47,"token"],[106,45,89,52],[107,8,89,55],[108,6,90,4],[108,7,90,5],[108,8,90,6],[109,6,91,4],[109,12,91,10,"userData"],[109,20,91,18],[109,23,91,21],[109,29,91,27,"me"],[109,31,91,29],[109,32,91,30,"json"],[109,36,91,34],[109,37,91,35],[109,38,91,36],[111,6,93,4],[112,6,94,4],[112,12,94,10,"user"],[112,16,94,14],[112,19,94,17],[113,8,94,19],[113,11,94,22,"userData"],[113,19,94,30],[114,8,94,32,"id"],[114,10,94,34],[114,12,94,36,"userData"],[114,20,94,44],[114,21,94,45,"userId"],[115,6,94,52],[115,7,94,53],[116,6,95,4,"setUser"],[116,13,95,11],[116,14,95,12,"user"],[116,18,95,16],[116,19,95,17],[117,6,96,4],[117,13,96,11],[117,17,96,15],[118,4,97,2],[119,4,99,2],[119,19,99,17,"logout"],[119,25,99,23,"logout"],[119,26,99,23],[119,28,99,26],[120,6,100,4],[120,12,100,10,"AsyncStorage"],[120,24,100,22],[120,25,100,22,"default"],[120,32,100,22],[120,33,100,23,"removeItem"],[120,43,100,33],[120,44,100,34],[120,51,100,41],[120,52,100,42],[121,6,101,4,"setUser"],[121,13,101,11],[121,14,101,12],[121,18,101,16],[121,19,101,17],[122,6,102,4,"setToken"],[122,14,102,12],[122,15,102,13],[122,19,102,17],[122,20,102,18],[123,4,103,2],[124,4,105,2],[124,24,106,4],[124,28,106,4,"_reactJsxDevRuntime"],[124,47,106,4],[124,48,106,4,"jsxDEV"],[124,54,106,4],[124,56,106,5,"AuthContext"],[124,67,106,16],[124,68,106,17,"Provider"],[124,76,106,25],[125,6,106,26,"value"],[125,11,106,31],[125,13,106,33],[126,8,106,35,"user"],[126,12,106,39],[127,8,106,41,"token"],[127,13,106,46],[128,8,106,48,"loading"],[128,15,106,55],[129,8,106,57,"login"],[129,13,106,62],[130,8,106,64,"signUp"],[130,14,106,70],[131,8,106,72,"logout"],[132,6,106,79],[132,7,106,81],[133,6,106,81,"children"],[133,14,106,81],[133,16,107,7,"children"],[134,4,107,15],[135,6,107,15,"fileName"],[135,14,107,15],[135,16,107,15,"_jsxFileName"],[135,28,107,15],[136,6,107,15,"lineNumber"],[136,16,107,15],[137,6,107,15,"columnNumber"],[137,18,107,15],[138,4,107,15],[138,11,108,26],[138,12,108,27],[139,2,110,0],[140,2,112,7],[140,11,112,16,"useAuth"],[140,18,112,23,"useAuth"],[140,19,112,23],[140,21,112,26],[141,4,113,2],[141,11,113,9],[141,15,113,9,"useContext"],[141,21,113,19],[141,22,113,19,"useContext"],[141,32,113,19],[141,34,113,20,"AuthContext"],[141,45,113,31],[141,46,113,32],[142,2,114,0],[143,0,114,1],[143,3]],"functionMap":{"names":["<global>","createContext$argument_0.login","createContext$argument_0.logout","AuthProvider","loadSession","useEffect$argument_0","login","signUp","logout","useAuth"],"mappings":"AAA;SCiB,iBD;UEC,cF;OGG;ECK;GDe;YEE;GFE;EGE;GHsB;EIE;GJyB;EKE;GLI;CHO;OSE;CTE"},"hasCjsExports":false},"type":"js/module"}]}