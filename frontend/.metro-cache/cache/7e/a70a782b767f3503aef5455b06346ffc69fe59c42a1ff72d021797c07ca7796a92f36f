{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../config","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":149},"end":{"line":3,"column":36,"index":185}}],"key":"pHqFJJBAh3HI9ZCkK8fFRwPv3x0=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _config = require(_dependencyMap[2], \"../config\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)({\n    user: null,\n    token: null,\n    loading: true,\n    login: async () => false,\n    logout: async () => {}\n  });\n  function AuthProvider({\n    children\n  }) {\n    const [token, setToken] = (0, _react.useState)(null);\n    const [user, setUser] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    async function loadSession() {\n      const storedToken = await AsyncStorage.default.getItem(\"token\");\n      if (storedToken) {\n        setToken(storedToken);\n        const me = await fetch(`${_config.API_URL}/auth/me`, {\n          headers: {\n            Authorization: `Bearer ${storedToken}`\n          }\n        });\n        const data = await me.json();\n        setUser(data);\n      }\n      setLoading(false);\n    }\n    (0, _react.useEffect)(() => {\n      loadSession();\n    }, []);\n    async function login(email, password) {\n      const res = await fetch(`${_config.API_URL}/auth/login`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          email,\n          password\n        })\n      });\n      if (!res.ok) return false;\n      const data = await res.json();\n      await AsyncStorage.default.setItem(\"token\", data.token);\n      setToken(data.token);\n      const me = await fetch(`${_config.API_URL}/auth/me`, {\n        headers: {\n          Authorization: `Bearer ${data.token}`\n        }\n      });\n      const user = await me.json();\n      setUser(user);\n      return true;\n    }\n    async function logout() {\n      await AsyncStorage.default.removeItem(\"token\");\n      setUser(null);\n      setToken(null);\n    }\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        loading,\n        login,\n        logout\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 5\n    }, this);\n  }\n  function useAuth() {\n    return (0, _react.useContext)(AuthContext);\n  }\n});","lineCount":97,"map":[[13,2,21,0,"exports"],[13,9,21,0],[13,10,21,0,"AuthProvider"],[13,22,21,0],[13,25,21,0,"AuthProvider"],[13,37,21,0],[14,2,80,0,"exports"],[14,9,80,0],[14,10,80,0,"useAuth"],[14,17,80,0],[14,20,80,0,"useAuth"],[14,27,80,0],[15,2,1,0],[15,6,1,0,"_react"],[15,12,1,0],[15,15,1,0,"require"],[15,22,1,0],[15,23,1,0,"_dependencyMap"],[15,37,1,0],[16,2,2,0],[16,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[16,42,2,0],[16,45,2,0,"require"],[16,52,2,0],[16,53,2,0,"_dependencyMap"],[16,67,2,0],[17,2,2,0],[17,6,2,0,"AsyncStorage"],[17,18,2,0],[17,21,2,0,"_interopDefault"],[17,36,2,0],[17,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[17,73,2,0],[18,2,3,0],[18,6,3,0,"_config"],[18,13,3,0],[18,16,3,0,"require"],[18,23,3,0],[18,24,3,0,"_dependencyMap"],[18,38,3,0],[19,2,3,36],[19,6,3,36,"_reactJsxDevRuntime"],[19,25,3,36],[19,28,3,36,"require"],[19,35,3,36],[19,36,3,36,"_dependencyMap"],[19,50,3,36],[20,2,13,0],[20,8,13,6,"AuthContext"],[20,19,13,17],[20,35,13,20],[20,39,13,20,"createContext"],[20,45,13,33],[20,46,13,33,"createContext"],[20,59,13,33],[20,61,13,52],[21,4,14,2,"user"],[21,8,14,6],[21,10,14,8],[21,14,14,12],[22,4,15,2,"token"],[22,9,15,7],[22,11,15,9],[22,15,15,13],[23,4,16,2,"loading"],[23,11,16,9],[23,13,16,11],[23,17,16,15],[24,4,17,2,"login"],[24,9,17,7],[24,11,17,9],[24,17,17,9,"login"],[24,18,17,9],[24,23,17,21],[24,28,17,26],[25,4,18,2,"logout"],[25,10,18,8],[25,12,18,10],[25,18,18,10,"logout"],[25,19,18,10],[25,24,18,22],[25,25,18,23],[26,2,19,0],[26,3,19,1],[26,4,19,2],[27,2,21,7],[27,11,21,16,"AuthProvider"],[27,23,21,28,"AuthProvider"],[27,24,21,29],[28,4,21,31,"children"],[29,2,21,40],[29,3,21,41],[29,5,21,43],[30,4,22,2],[30,10,22,8],[30,11,22,9,"token"],[30,16,22,14],[30,18,22,16,"setToken"],[30,26,22,24],[30,27,22,25],[30,30,22,28],[30,34,22,28,"useState"],[30,40,22,36],[30,41,22,36,"useState"],[30,49,22,36],[30,51,22,52],[30,55,22,56],[30,56,22,57],[31,4,23,2],[31,10,23,8],[31,11,23,9,"user"],[31,15,23,13],[31,17,23,15,"setUser"],[31,24,23,22],[31,25,23,23],[31,28,23,26],[31,32,23,26,"useState"],[31,38,23,34],[31,39,23,34,"useState"],[31,47,23,34],[31,49,23,40],[31,53,23,44],[31,54,23,45],[32,4,24,2],[32,10,24,8],[32,11,24,9,"loading"],[32,18,24,16],[32,20,24,18,"setLoading"],[32,30,24,28],[32,31,24,29],[32,34,24,32],[32,38,24,32,"useState"],[32,44,24,40],[32,45,24,40,"useState"],[32,53,24,40],[32,55,24,41],[32,59,24,45],[32,60,24,46],[33,4,26,2],[33,19,26,17,"loadSession"],[33,30,26,28,"loadSession"],[33,31,26,28],[33,33,26,31],[34,6,27,4],[34,12,27,10,"storedToken"],[34,23,27,21],[34,26,27,24],[34,32,27,30,"AsyncStorage"],[34,44,27,42],[34,45,27,42,"default"],[34,52,27,42],[34,53,27,43,"getItem"],[34,60,27,50],[34,61,27,51],[34,68,27,58],[34,69,27,59],[35,6,29,4],[35,10,29,8,"storedToken"],[35,21,29,19],[35,23,29,21],[36,8,30,6,"setToken"],[36,16,30,14],[36,17,30,15,"storedToken"],[36,28,30,26],[36,29,30,27],[37,8,31,6],[37,14,31,12,"me"],[37,16,31,14],[37,19,31,17],[37,25,31,23,"fetch"],[37,30,31,28],[37,31,31,29],[37,34,31,32,"API_URL"],[37,41,31,39],[37,42,31,39,"API_URL"],[37,49,31,39],[37,59,31,49],[37,61,31,51],[38,10,32,8,"headers"],[38,17,32,15],[38,19,32,17],[39,12,32,19,"Authorization"],[39,25,32,32],[39,27,32,34],[39,37,32,44,"storedToken"],[39,48,32,55],[40,10,32,58],[41,8,33,6],[41,9,33,7],[41,10,33,8],[42,8,34,6],[42,14,34,12,"data"],[42,18,34,16],[42,21,34,19],[42,27,34,25,"me"],[42,29,34,27],[42,30,34,28,"json"],[42,34,34,32],[42,35,34,33],[42,36,34,34],[43,8,35,6,"setUser"],[43,15,35,13],[43,16,35,14,"data"],[43,20,35,18],[43,21,35,19],[44,6,36,4],[45,6,38,4,"setLoading"],[45,16,38,14],[45,17,38,15],[45,22,38,20],[45,23,38,21],[46,4,39,2],[47,4,41,2],[47,8,41,2,"useEffect"],[47,14,41,11],[47,15,41,11,"useEffect"],[47,24,41,11],[47,26,41,12],[47,32,41,18],[48,6,42,4,"loadSession"],[48,17,42,15],[48,18,42,16],[48,19,42,17],[49,4,43,2],[49,5,43,3],[49,7,43,5],[49,9,43,7],[49,10,43,8],[50,4,45,2],[50,19,45,17,"login"],[50,24,45,22,"login"],[50,25,45,23,"email"],[50,30,45,36],[50,32,45,38,"password"],[50,40,45,54],[50,42,45,56],[51,6,46,4],[51,12,46,10,"res"],[51,15,46,13],[51,18,46,16],[51,24,46,22,"fetch"],[51,29,46,27],[51,30,46,28],[51,33,46,31,"API_URL"],[51,40,46,38],[51,41,46,38,"API_URL"],[51,48,46,38],[51,61,46,51],[51,63,46,53],[52,8,47,6,"method"],[52,14,47,12],[52,16,47,14],[52,22,47,20],[53,8,48,6,"headers"],[53,15,48,13],[53,17,48,15],[54,10,48,17],[54,24,48,31],[54,26,48,33],[55,8,48,52],[55,9,48,53],[56,8,49,6,"body"],[56,12,49,10],[56,14,49,12,"JSON"],[56,18,49,16],[56,19,49,17,"stringify"],[56,28,49,26],[56,29,49,27],[57,10,49,29,"email"],[57,15,49,34],[58,10,49,36,"password"],[59,8,49,45],[59,9,49,46],[60,6,50,4],[60,7,50,5],[60,8,50,6],[61,6,52,4],[61,10,52,8],[61,11,52,9,"res"],[61,14,52,12],[61,15,52,13,"ok"],[61,17,52,15],[61,19,52,17],[61,26,52,24],[61,31,52,29],[62,6,54,4],[62,12,54,10,"data"],[62,16,54,14],[62,19,54,17],[62,25,54,23,"res"],[62,28,54,26],[62,29,54,27,"json"],[62,33,54,31],[62,34,54,32],[62,35,54,33],[63,6,55,4],[63,12,55,10,"AsyncStorage"],[63,24,55,22],[63,25,55,22,"default"],[63,32,55,22],[63,33,55,23,"setItem"],[63,40,55,30],[63,41,55,31],[63,48,55,38],[63,50,55,40,"data"],[63,54,55,44],[63,55,55,45,"token"],[63,60,55,50],[63,61,55,51],[64,6,56,4,"setToken"],[64,14,56,12],[64,15,56,13,"data"],[64,19,56,17],[64,20,56,18,"token"],[64,25,56,23],[64,26,56,24],[65,6,58,4],[65,12,58,10,"me"],[65,14,58,12],[65,17,58,15],[65,23,58,21,"fetch"],[65,28,58,26],[65,29,58,27],[65,32,58,30,"API_URL"],[65,39,58,37],[65,40,58,37,"API_URL"],[65,47,58,37],[65,57,58,47],[65,59,58,49],[66,8,59,6,"headers"],[66,15,59,13],[66,17,59,15],[67,10,59,17,"Authorization"],[67,23,59,30],[67,25,59,32],[67,35,59,42,"data"],[67,39,59,46],[67,40,59,47,"token"],[67,45,59,52],[68,8,59,55],[69,6,60,4],[69,7,60,5],[69,8,60,6],[70,6,61,4],[70,12,61,10,"user"],[70,16,61,14],[70,19,61,17],[70,25,61,23,"me"],[70,27,61,25],[70,28,61,26,"json"],[70,32,61,30],[70,33,61,31],[70,34,61,32],[71,6,63,4,"setUser"],[71,13,63,11],[71,14,63,12,"user"],[71,18,63,16],[71,19,63,17],[72,6,64,4],[72,13,64,11],[72,17,64,15],[73,4,65,2],[74,4,67,2],[74,19,67,17,"logout"],[74,25,67,23,"logout"],[74,26,67,23],[74,28,67,26],[75,6,68,4],[75,12,68,10,"AsyncStorage"],[75,24,68,22],[75,25,68,22,"default"],[75,32,68,22],[75,33,68,23,"removeItem"],[75,43,68,33],[75,44,68,34],[75,51,68,41],[75,52,68,42],[76,6,69,4,"setUser"],[76,13,69,11],[76,14,69,12],[76,18,69,16],[76,19,69,17],[77,6,70,4,"setToken"],[77,14,70,12],[77,15,70,13],[77,19,70,17],[77,20,70,18],[78,4,71,2],[79,4,73,2],[79,24,74,4],[79,28,74,4,"_reactJsxDevRuntime"],[79,47,74,4],[79,48,74,4,"jsxDEV"],[79,54,74,4],[79,56,74,5,"AuthContext"],[79,67,74,16],[79,68,74,17,"Provider"],[79,76,74,25],[80,6,74,26,"value"],[80,11,74,31],[80,13,74,33],[81,8,74,35,"user"],[81,12,74,39],[82,8,74,41,"token"],[82,13,74,46],[83,8,74,48,"loading"],[83,15,74,55],[84,8,74,57,"login"],[84,13,74,62],[85,8,74,64,"logout"],[86,6,74,71],[86,7,74,73],[87,6,74,73,"children"],[87,14,74,73],[87,16,75,7,"children"],[88,4,75,15],[89,6,75,15,"fileName"],[89,14,75,15],[89,16,75,15,"_jsxFileName"],[89,28,75,15],[90,6,75,15,"lineNumber"],[90,16,75,15],[91,6,75,15,"columnNumber"],[91,18,75,15],[92,4,75,15],[92,11,76,26],[92,12,76,27],[93,2,78,0],[94,2,80,7],[94,11,80,16,"useAuth"],[94,18,80,23,"useAuth"],[94,19,80,23],[94,21,80,26],[95,4,81,2],[95,11,81,9],[95,15,81,9,"useContext"],[95,21,81,19],[95,22,81,19,"useContext"],[95,32,81,19],[95,34,81,20,"AuthContext"],[95,45,81,31],[95,46,81,32],[96,2,82,0],[97,0,82,1],[97,3]],"functionMap":{"names":["<global>","createContext$argument_0.login","createContext$argument_0.logout","AuthProvider","loadSession","useEffect$argument_0","login","logout","useAuth"],"mappings":"AAA;SCgB,iBD;UEC,cF;OGG;ECK;GDa;YEE;GFE;EGE;GHoB;EIE;GJI;CHO;OQE;CRE"},"hasCjsExports":false},"type":"js/module"}]}