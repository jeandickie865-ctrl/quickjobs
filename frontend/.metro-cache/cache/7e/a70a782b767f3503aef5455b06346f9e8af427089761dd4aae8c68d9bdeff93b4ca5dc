{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../config","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":149},"end":{"line":3,"column":36,"index":185}}],"key":"pHqFJJBAh3HI9ZCkK8fFRwPv3x0=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _config = require(_dependencyMap[2], \"../config\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)({\n    user: null,\n    token: null,\n    loading: true,\n    login: async () => false,\n    logout: async () => {}\n  });\n  function AuthProvider({\n    children\n  }) {\n    const [token, setToken] = (0, _react.useState)(null);\n    const [user, setUser] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    async function loadSession() {\n      const storedToken = await AsyncStorage.default.getItem(\"token\");\n      if (storedToken) {\n        setToken(storedToken);\n        const me = await fetch(`${_config.API_URL}/auth/me`, {\n          headers: {\n            Authorization: `Bearer ${storedToken}`\n          }\n        });\n        const data = await me.json();\n        // Backend gibt userId zurück, aber Frontend erwartet id\n        const user = {\n          ...data,\n          id: data.userId\n        };\n        setUser(user);\n      }\n      setLoading(false);\n    }\n    (0, _react.useEffect)(() => {\n      loadSession();\n    }, []);\n    async function login(email, password) {\n      const res = await fetch(`${_config.API_URL}/auth/login`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          email,\n          password\n        })\n      });\n      if (!res.ok) return false;\n      const data = await res.json();\n      await AsyncStorage.default.setItem(\"token\", data.token);\n      setToken(data.token);\n      const me = await fetch(`${_config.API_URL}/auth/me`, {\n        headers: {\n          Authorization: `Bearer ${data.token}`\n        }\n      });\n      const userData = await me.json();\n\n      // Backend gibt userId zurück, aber Frontend erwartet id\n      const user = {\n        ...userData,\n        id: userData.userId\n      };\n      setUser(user);\n      return true;\n    }\n    async function logout() {\n      await AsyncStorage.default.removeItem(\"token\");\n      setUser(null);\n      setToken(null);\n    }\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        loading,\n        login,\n        logout\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 5\n    }, this);\n  }\n  function useAuth() {\n    return (0, _react.useContext)(AuthContext);\n  }\n});","lineCount":108,"map":[[13,2,21,0,"exports"],[13,9,21,0],[13,10,21,0,"AuthProvider"],[13,22,21,0],[13,25,21,0,"AuthProvider"],[13,37,21,0],[14,2,84,0,"exports"],[14,9,84,0],[14,10,84,0,"useAuth"],[14,17,84,0],[14,20,84,0,"useAuth"],[14,27,84,0],[15,2,1,0],[15,6,1,0,"_react"],[15,12,1,0],[15,15,1,0,"require"],[15,22,1,0],[15,23,1,0,"_dependencyMap"],[15,37,1,0],[16,2,2,0],[16,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[16,42,2,0],[16,45,2,0,"require"],[16,52,2,0],[16,53,2,0,"_dependencyMap"],[16,67,2,0],[17,2,2,0],[17,6,2,0,"AsyncStorage"],[17,18,2,0],[17,21,2,0,"_interopDefault"],[17,36,2,0],[17,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[17,73,2,0],[18,2,3,0],[18,6,3,0,"_config"],[18,13,3,0],[18,16,3,0,"require"],[18,23,3,0],[18,24,3,0,"_dependencyMap"],[18,38,3,0],[19,2,3,36],[19,6,3,36,"_reactJsxDevRuntime"],[19,25,3,36],[19,28,3,36,"require"],[19,35,3,36],[19,36,3,36,"_dependencyMap"],[19,50,3,36],[20,2,13,0],[20,8,13,6,"AuthContext"],[20,19,13,17],[20,35,13,20],[20,39,13,20,"createContext"],[20,45,13,33],[20,46,13,33,"createContext"],[20,59,13,33],[20,61,13,52],[21,4,14,2,"user"],[21,8,14,6],[21,10,14,8],[21,14,14,12],[22,4,15,2,"token"],[22,9,15,7],[22,11,15,9],[22,15,15,13],[23,4,16,2,"loading"],[23,11,16,9],[23,13,16,11],[23,17,16,15],[24,4,17,2,"login"],[24,9,17,7],[24,11,17,9],[24,17,17,9,"login"],[24,18,17,9],[24,23,17,21],[24,28,17,26],[25,4,18,2,"logout"],[25,10,18,8],[25,12,18,10],[25,18,18,10,"logout"],[25,19,18,10],[25,24,18,22],[25,25,18,23],[26,2,19,0],[26,3,19,1],[26,4,19,2],[27,2,21,7],[27,11,21,16,"AuthProvider"],[27,23,21,28,"AuthProvider"],[27,24,21,29],[28,4,21,31,"children"],[29,2,21,40],[29,3,21,41],[29,5,21,43],[30,4,22,2],[30,10,22,8],[30,11,22,9,"token"],[30,16,22,14],[30,18,22,16,"setToken"],[30,26,22,24],[30,27,22,25],[30,30,22,28],[30,34,22,28,"useState"],[30,40,22,36],[30,41,22,36,"useState"],[30,49,22,36],[30,51,22,52],[30,55,22,56],[30,56,22,57],[31,4,23,2],[31,10,23,8],[31,11,23,9,"user"],[31,15,23,13],[31,17,23,15,"setUser"],[31,24,23,22],[31,25,23,23],[31,28,23,26],[31,32,23,26,"useState"],[31,38,23,34],[31,39,23,34,"useState"],[31,47,23,34],[31,49,23,40],[31,53,23,44],[31,54,23,45],[32,4,24,2],[32,10,24,8],[32,11,24,9,"loading"],[32,18,24,16],[32,20,24,18,"setLoading"],[32,30,24,28],[32,31,24,29],[32,34,24,32],[32,38,24,32,"useState"],[32,44,24,40],[32,45,24,40,"useState"],[32,53,24,40],[32,55,24,41],[32,59,24,45],[32,60,24,46],[33,4,26,2],[33,19,26,17,"loadSession"],[33,30,26,28,"loadSession"],[33,31,26,28],[33,33,26,31],[34,6,27,4],[34,12,27,10,"storedToken"],[34,23,27,21],[34,26,27,24],[34,32,27,30,"AsyncStorage"],[34,44,27,42],[34,45,27,42,"default"],[34,52,27,42],[34,53,27,43,"getItem"],[34,60,27,50],[34,61,27,51],[34,68,27,58],[34,69,27,59],[35,6,29,4],[35,10,29,8,"storedToken"],[35,21,29,19],[35,23,29,21],[36,8,30,6,"setToken"],[36,16,30,14],[36,17,30,15,"storedToken"],[36,28,30,26],[36,29,30,27],[37,8,31,6],[37,14,31,12,"me"],[37,16,31,14],[37,19,31,17],[37,25,31,23,"fetch"],[37,30,31,28],[37,31,31,29],[37,34,31,32,"API_URL"],[37,41,31,39],[37,42,31,39,"API_URL"],[37,49,31,39],[37,59,31,49],[37,61,31,51],[38,10,32,8,"headers"],[38,17,32,15],[38,19,32,17],[39,12,32,19,"Authorization"],[39,25,32,32],[39,27,32,34],[39,37,32,44,"storedToken"],[39,48,32,55],[40,10,32,58],[41,8,33,6],[41,9,33,7],[41,10,33,8],[42,8,34,6],[42,14,34,12,"data"],[42,18,34,16],[42,21,34,19],[42,27,34,25,"me"],[42,29,34,27],[42,30,34,28,"json"],[42,34,34,32],[42,35,34,33],[42,36,34,34],[43,8,35,6],[44,8,36,6],[44,14,36,12,"user"],[44,18,36,16],[44,21,36,19],[45,10,36,21],[45,13,36,24,"data"],[45,17,36,28],[46,10,36,30,"id"],[46,12,36,32],[46,14,36,34,"data"],[46,18,36,38],[46,19,36,39,"userId"],[47,8,36,46],[47,9,36,47],[48,8,37,6,"setUser"],[48,15,37,13],[48,16,37,14,"user"],[48,20,37,18],[48,21,37,19],[49,6,38,4],[50,6,40,4,"setLoading"],[50,16,40,14],[50,17,40,15],[50,22,40,20],[50,23,40,21],[51,4,41,2],[52,4,43,2],[52,8,43,2,"useEffect"],[52,14,43,11],[52,15,43,11,"useEffect"],[52,24,43,11],[52,26,43,12],[52,32,43,18],[53,6,44,4,"loadSession"],[53,17,44,15],[53,18,44,16],[53,19,44,17],[54,4,45,2],[54,5,45,3],[54,7,45,5],[54,9,45,7],[54,10,45,8],[55,4,47,2],[55,19,47,17,"login"],[55,24,47,22,"login"],[55,25,47,23,"email"],[55,30,47,36],[55,32,47,38,"password"],[55,40,47,54],[55,42,47,56],[56,6,48,4],[56,12,48,10,"res"],[56,15,48,13],[56,18,48,16],[56,24,48,22,"fetch"],[56,29,48,27],[56,30,48,28],[56,33,48,31,"API_URL"],[56,40,48,38],[56,41,48,38,"API_URL"],[56,48,48,38],[56,61,48,51],[56,63,48,53],[57,8,49,6,"method"],[57,14,49,12],[57,16,49,14],[57,22,49,20],[58,8,50,6,"headers"],[58,15,50,13],[58,17,50,15],[59,10,50,17],[59,24,50,31],[59,26,50,33],[60,8,50,52],[60,9,50,53],[61,8,51,6,"body"],[61,12,51,10],[61,14,51,12,"JSON"],[61,18,51,16],[61,19,51,17,"stringify"],[61,28,51,26],[61,29,51,27],[62,10,51,29,"email"],[62,15,51,34],[63,10,51,36,"password"],[64,8,51,45],[64,9,51,46],[65,6,52,4],[65,7,52,5],[65,8,52,6],[66,6,54,4],[66,10,54,8],[66,11,54,9,"res"],[66,14,54,12],[66,15,54,13,"ok"],[66,17,54,15],[66,19,54,17],[66,26,54,24],[66,31,54,29],[67,6,56,4],[67,12,56,10,"data"],[67,16,56,14],[67,19,56,17],[67,25,56,23,"res"],[67,28,56,26],[67,29,56,27,"json"],[67,33,56,31],[67,34,56,32],[67,35,56,33],[68,6,57,4],[68,12,57,10,"AsyncStorage"],[68,24,57,22],[68,25,57,22,"default"],[68,32,57,22],[68,33,57,23,"setItem"],[68,40,57,30],[68,41,57,31],[68,48,57,38],[68,50,57,40,"data"],[68,54,57,44],[68,55,57,45,"token"],[68,60,57,50],[68,61,57,51],[69,6,58,4,"setToken"],[69,14,58,12],[69,15,58,13,"data"],[69,19,58,17],[69,20,58,18,"token"],[69,25,58,23],[69,26,58,24],[70,6,60,4],[70,12,60,10,"me"],[70,14,60,12],[70,17,60,15],[70,23,60,21,"fetch"],[70,28,60,26],[70,29,60,27],[70,32,60,30,"API_URL"],[70,39,60,37],[70,40,60,37,"API_URL"],[70,47,60,37],[70,57,60,47],[70,59,60,49],[71,8,61,6,"headers"],[71,15,61,13],[71,17,61,15],[72,10,61,17,"Authorization"],[72,23,61,30],[72,25,61,32],[72,35,61,42,"data"],[72,39,61,46],[72,40,61,47,"token"],[72,45,61,52],[73,8,61,55],[74,6,62,4],[74,7,62,5],[74,8,62,6],[75,6,63,4],[75,12,63,10,"userData"],[75,20,63,18],[75,23,63,21],[75,29,63,27,"me"],[75,31,63,29],[75,32,63,30,"json"],[75,36,63,34],[75,37,63,35],[75,38,63,36],[77,6,65,4],[78,6,66,4],[78,12,66,10,"user"],[78,16,66,14],[78,19,66,17],[79,8,66,19],[79,11,66,22,"userData"],[79,19,66,30],[80,8,66,32,"id"],[80,10,66,34],[80,12,66,36,"userData"],[80,20,66,44],[80,21,66,45,"userId"],[81,6,66,52],[81,7,66,53],[82,6,67,4,"setUser"],[82,13,67,11],[82,14,67,12,"user"],[82,18,67,16],[82,19,67,17],[83,6,68,4],[83,13,68,11],[83,17,68,15],[84,4,69,2],[85,4,71,2],[85,19,71,17,"logout"],[85,25,71,23,"logout"],[85,26,71,23],[85,28,71,26],[86,6,72,4],[86,12,72,10,"AsyncStorage"],[86,24,72,22],[86,25,72,22,"default"],[86,32,72,22],[86,33,72,23,"removeItem"],[86,43,72,33],[86,44,72,34],[86,51,72,41],[86,52,72,42],[87,6,73,4,"setUser"],[87,13,73,11],[87,14,73,12],[87,18,73,16],[87,19,73,17],[88,6,74,4,"setToken"],[88,14,74,12],[88,15,74,13],[88,19,74,17],[88,20,74,18],[89,4,75,2],[90,4,77,2],[90,24,78,4],[90,28,78,4,"_reactJsxDevRuntime"],[90,47,78,4],[90,48,78,4,"jsxDEV"],[90,54,78,4],[90,56,78,5,"AuthContext"],[90,67,78,16],[90,68,78,17,"Provider"],[90,76,78,25],[91,6,78,26,"value"],[91,11,78,31],[91,13,78,33],[92,8,78,35,"user"],[92,12,78,39],[93,8,78,41,"token"],[93,13,78,46],[94,8,78,48,"loading"],[94,15,78,55],[95,8,78,57,"login"],[95,13,78,62],[96,8,78,64,"logout"],[97,6,78,71],[97,7,78,73],[98,6,78,73,"children"],[98,14,78,73],[98,16,79,7,"children"],[99,4,79,15],[100,6,79,15,"fileName"],[100,14,79,15],[100,16,79,15,"_jsxFileName"],[100,28,79,15],[101,6,79,15,"lineNumber"],[101,16,79,15],[102,6,79,15,"columnNumber"],[102,18,79,15],[103,4,79,15],[103,11,80,26],[103,12,80,27],[104,2,82,0],[105,2,84,7],[105,11,84,16,"useAuth"],[105,18,84,23,"useAuth"],[105,19,84,23],[105,21,84,26],[106,4,85,2],[106,11,85,9],[106,15,85,9,"useContext"],[106,21,85,19],[106,22,85,19,"useContext"],[106,32,85,19],[106,34,85,20,"AuthContext"],[106,45,85,31],[106,46,85,32],[107,2,86,0],[108,0,86,1],[108,3]],"functionMap":{"names":["<global>","createContext$argument_0.login","createContext$argument_0.logout","AuthProvider","loadSession","useEffect$argument_0","login","logout","useAuth"],"mappings":"AAA;SCgB,iBD;UEC,cF;OGG;ECK;GDe;YEE;GFE;EGE;GHsB;EIE;GJI;CHO;OQE;CRE"},"hasCjsExports":false},"type":"js/module"}]}