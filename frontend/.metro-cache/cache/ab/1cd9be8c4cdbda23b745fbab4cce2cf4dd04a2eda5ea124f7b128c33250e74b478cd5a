{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":72,"column":48,"index":3310}}],"key":"7kvm5yrOpz4NYiDi6sn4qxa8DVQ="}},{"name":"expo-modules-core","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":82,"index":82}}],"key":"ka0FS6s7ZmvhJq+hEjGkLLrGpyo="}},{"name":"./NotificationsHandlerModule","data":{"asyncType":null,"locs":[{"start":{"line":2,"column":0,"index":83},"end":{"line":2,"column":70,"index":153}}],"key":"aEk9K/VuGbWW/Hc3/gzn36PBpNs="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.NotificationTimeoutError = void 0;\n  exports.setNotificationHandler = setNotificationHandler;\n  var _expoModulesCore = require(_dependencyMap[1], \"expo-modules-core\");\n  var _NotificationsHandlerModule = _interopRequireDefault(require(_dependencyMap[2], \"./NotificationsHandlerModule\"));\n  /**\n   * @hidden\n   */\n  class NotificationTimeoutError extends _expoModulesCore.CodedError {\n    constructor(notificationId, notification) {\n      super('ERR_NOTIFICATION_TIMEOUT', `Notification handling timed out for ID ${notificationId}.`);\n      this.info = {\n        id: notificationId,\n        notification\n      };\n    }\n  }\n  // Web uses SyntheticEventEmitter\n  exports.NotificationTimeoutError = NotificationTimeoutError;\n  const notificationEmitter = new _expoModulesCore.EventEmitter(_NotificationsHandlerModule.default);\n  const handleNotificationEventName = 'onHandleNotification';\n  const handleNotificationTimeoutEventName = 'onHandleNotificationTimeout';\n  let handleSubscription = null;\n  let handleTimeoutSubscription = null;\n  /**\n   * When a notification is received while the app is running, using this function you can set a callback that will decide\n   * whether the notification should be shown to the user or not.\n   *\n   * When a notification is received, `handleNotification` is called with the incoming notification as an argument.\n   * The function should respond with a behavior object within 3 seconds, otherwise, the notification will be discarded.\n   * If the notification is handled successfully, `handleSuccess` is called with the identifier of the notification,\n   * otherwise (or on timeout) `handleError` will be called.\n   *\n   * The default behavior when the handler is not set or does not respond in time is not to show the notification.\n   * @param handler A single parameter which should be either `null` (if you want to clear the handler) or a [`NotificationHandler`](#notificationhandler) object.\n   *\n   * @example Implementing a notification handler that always shows the notification when it is received.\n   * ```jsx\n   * import * as Notifications from 'expo-notifications';\n   *\n   * Notifications.setNotificationHandler({\n   *   handleNotification: async () => ({\n   *     shouldShowAlert: true,\n   *     shouldPlaySound: false,\n   *     shouldSetBadge: false,\n   *   }),\n   * });\n   * ```\n   * @header inForeground\n   */\n  function setNotificationHandler(handler) {\n    if (handleSubscription) {\n      handleSubscription.remove();\n      handleSubscription = null;\n    }\n    if (handleTimeoutSubscription) {\n      handleTimeoutSubscription.remove();\n      handleTimeoutSubscription = null;\n    }\n    if (handler) {\n      handleSubscription = notificationEmitter.addListener(handleNotificationEventName, async ({\n        id,\n        notification\n      }) => {\n        if (!_NotificationsHandlerModule.default.handleNotificationAsync) {\n          handler.handleError?.(id, new _expoModulesCore.UnavailabilityError('Notifications', 'handleNotificationAsync'));\n          return;\n        }\n        try {\n          const behavior = await handler.handleNotification(notification);\n          await _NotificationsHandlerModule.default.handleNotificationAsync(id, behavior);\n          handler.handleSuccess?.(id);\n        } catch (error) {\n          handler.handleError?.(id, error);\n        }\n      });\n      handleTimeoutSubscription = notificationEmitter.addListener(handleNotificationTimeoutEventName, ({\n        id,\n        notification\n      }) => handler.handleError?.(id, new NotificationTimeoutError(id, notification)));\n    }\n  }\n});","lineCount":87,"map":[[8,2,1,0],[8,6,1,0,"_expoModulesCore"],[8,22,1,0],[8,25,1,0,"require"],[8,32,1,0],[8,33,1,0,"_dependencyMap"],[8,47,1,0],[9,2,2,0],[9,6,2,0,"_NotificationsHandlerModule"],[9,33,2,0],[9,36,2,0,"_interopRequireDefault"],[9,58,2,0],[9,59,2,0,"require"],[9,66,2,0],[9,67,2,0,"_dependencyMap"],[9,81,2,0],[10,2,3,0],[11,0,4,0],[12,0,5,0],[13,2,6,7],[13,8,6,13,"NotificationTimeoutError"],[13,32,6,37],[13,41,6,46,"CodedError"],[13,68,6,56],[13,69,6,57],[14,4,8,4,"constructor"],[14,15,8,15,"constructor"],[14,16,8,16,"notificationId"],[14,30,8,30],[14,32,8,32,"notification"],[14,44,8,44],[14,46,8,46],[15,6,9,8],[15,11,9,13],[15,12,9,14],[15,38,9,40],[15,40,9,42],[15,82,9,84,"notificationId"],[15,96,9,98],[15,99,9,101],[15,100,9,102],[16,6,10,8],[16,10,10,12],[16,11,10,13,"info"],[16,15,10,17],[16,18,10,20],[17,8,10,22,"id"],[17,10,10,24],[17,12,10,26,"notificationId"],[17,26,10,40],[18,8,10,42,"notification"],[19,6,10,55],[19,7,10,56],[20,4,11,4],[21,2,12,0],[22,2,13,0],[23,2,13,0,"exports"],[23,9,13,0],[23,10,13,0,"NotificationTimeoutError"],[23,34,13,0],[23,37,13,0,"NotificationTimeoutError"],[23,61,13,0],[24,2,14,0],[24,8,14,6,"notificationEmitter"],[24,27,14,25],[24,30,14,28],[24,34,14,32,"EventEmitter"],[24,63,14,44],[24,64,14,45,"NotificationsHandlerModule"],[24,99,14,71],[24,100,14,72],[25,2,15,0],[25,8,15,6,"handleNotificationEventName"],[25,35,15,33],[25,38,15,36],[25,60,15,58],[26,2,16,0],[26,8,16,6,"handleNotificationTimeoutEventName"],[26,42,16,40],[26,45,16,43],[26,74,16,72],[27,2,17,0],[27,6,17,4,"handleSubscription"],[27,24,17,22],[27,27,17,25],[27,31,17,29],[28,2,18,0],[28,6,18,4,"handleTimeoutSubscription"],[28,31,18,29],[28,34,18,32],[28,38,18,36],[29,2,19,0],[30,0,20,0],[31,0,21,0],[32,0,22,0],[33,0,23,0],[34,0,24,0],[35,0,25,0],[36,0,26,0],[37,0,27,0],[38,0,28,0],[39,0,29,0],[40,0,30,0],[41,0,31,0],[42,0,32,0],[43,0,33,0],[44,0,34,0],[45,0,35,0],[46,0,36,0],[47,0,37,0],[48,0,38,0],[49,0,39,0],[50,0,40,0],[51,0,41,0],[52,0,42,0],[53,0,43,0],[54,0,44,0],[55,2,45,7],[55,11,45,16,"setNotificationHandler"],[55,33,45,38,"setNotificationHandler"],[55,34,45,39,"handler"],[55,41,45,46],[55,43,45,48],[56,4,46,4],[56,8,46,8,"handleSubscription"],[56,26,46,26],[56,28,46,28],[57,6,47,8,"handleSubscription"],[57,24,47,26],[57,25,47,27,"remove"],[57,31,47,33],[57,32,47,34],[57,33,47,35],[58,6,48,8,"handleSubscription"],[58,24,48,26],[58,27,48,29],[58,31,48,33],[59,4,49,4],[60,4,50,4],[60,8,50,8,"handleTimeoutSubscription"],[60,33,50,33],[60,35,50,35],[61,6,51,8,"handleTimeoutSubscription"],[61,31,51,33],[61,32,51,34,"remove"],[61,38,51,40],[61,39,51,41],[61,40,51,42],[62,6,52,8,"handleTimeoutSubscription"],[62,31,52,33],[62,34,52,36],[62,38,52,40],[63,4,53,4],[64,4,54,4],[64,8,54,8,"handler"],[64,15,54,15],[64,17,54,17],[65,6,55,8,"handleSubscription"],[65,24,55,26],[65,27,55,29,"notificationEmitter"],[65,46,55,48],[65,47,55,49,"addListener"],[65,58,55,60],[65,59,55,61,"handleNotificationEventName"],[65,86,55,88],[65,88,55,90],[65,95,55,97],[66,8,55,99,"id"],[66,10,55,101],[67,8,55,103,"notification"],[68,6,55,116],[68,7,55,117],[68,12,55,122],[69,8,56,12],[69,12,56,16],[69,13,56,17,"NotificationsHandlerModule"],[69,48,56,43],[69,49,56,44,"handleNotificationAsync"],[69,72,56,67],[69,74,56,69],[70,10,57,16,"handler"],[70,17,57,23],[70,18,57,24,"handleError"],[70,29,57,35],[70,32,57,38,"id"],[70,34,57,40],[70,36,57,42],[70,40,57,46,"UnavailabilityError"],[70,76,57,65],[70,77,57,66],[70,92,57,81],[70,94,57,83],[70,119,57,108],[70,120,57,109],[70,121,57,110],[71,10,58,16],[72,8,59,12],[73,8,60,12],[73,12,60,16],[74,10,61,16],[74,16,61,22,"behavior"],[74,24,61,30],[74,27,61,33],[74,33,61,39,"handler"],[74,40,61,46],[74,41,61,47,"handleNotification"],[74,59,61,65],[74,60,61,66,"notification"],[74,72,61,78],[74,73,61,79],[75,10,62,16],[75,16,62,22,"NotificationsHandlerModule"],[75,51,62,48],[75,52,62,49,"handleNotificationAsync"],[75,75,62,72],[75,76,62,73,"id"],[75,78,62,75],[75,80,62,77,"behavior"],[75,88,62,85],[75,89,62,86],[76,10,63,16,"handler"],[76,17,63,23],[76,18,63,24,"handleSuccess"],[76,31,63,37],[76,34,63,40,"id"],[76,36,63,42],[76,37,63,43],[77,8,64,12],[77,9,64,13],[77,10,65,12],[77,17,65,19,"error"],[77,22,65,24],[77,24,65,26],[78,10,66,16,"handler"],[78,17,66,23],[78,18,66,24,"handleError"],[78,29,66,35],[78,32,66,38,"id"],[78,34,66,40],[78,36,66,42,"error"],[78,41,66,47],[78,42,66,48],[79,8,67,12],[80,6,68,8],[80,7,68,9],[80,8,68,10],[81,6,69,8,"handleTimeoutSubscription"],[81,31,69,33],[81,34,69,36,"notificationEmitter"],[81,53,69,55],[81,54,69,56,"addListener"],[81,65,69,67],[81,66,69,68,"handleNotificationTimeoutEventName"],[81,100,69,102],[81,102,69,104],[81,103,69,105],[82,8,69,107,"id"],[82,10,69,109],[83,8,69,111,"notification"],[84,6,69,124],[84,7,69,125],[84,12,69,130,"handler"],[84,19,69,137],[84,20,69,138,"handleError"],[84,31,69,149],[84,34,69,152,"id"],[84,36,69,154],[84,38,69,156],[84,42,69,160,"NotificationTimeoutError"],[84,66,69,184],[84,67,69,185,"id"],[84,69,69,187],[84,71,69,189,"notification"],[84,83,69,201],[84,84,69,202],[84,85,69,203],[84,86,69,204],[85,4,70,4],[86,2,71,0],[87,0,71,1]],"functionMap":{"names":["<global>","NotificationTimeoutError","NotificationTimeoutError#constructor","setNotificationHandler","notificationEmitter.addListener$argument_1"],"mappings":"AAA;OCK;ICE;KDG;CDC;OGiC;0FCU;SDa;wGCC,mGD;CHE"}},"type":"js/module"}]}