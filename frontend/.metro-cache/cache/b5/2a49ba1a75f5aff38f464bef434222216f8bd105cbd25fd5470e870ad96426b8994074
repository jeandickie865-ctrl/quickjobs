{"dependencies":[{"name":"./storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":45,"index":45}}],"key":"3rLtLV8J3gSw9c8Ep8Wpc3w/Yxg=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.addApplication = addApplication;\n  exports.getApplicationsForJob = getApplicationsForJob;\n  exports.getApplicationsForWorker = getApplicationsForWorker;\n  exports.acceptApplication = acceptApplication;\n  exports.updateApplicationStatus = updateApplicationStatus;\n  var _storage = require(_dependencyMap[0], \"./storage\");\n  const APPLICATIONS_KEY = '@shiftmatch:applications';\n  async function loadApplications() {\n    const stored = await (0, _storage.getItem)(APPLICATIONS_KEY);\n    return stored ?? [];\n  }\n  async function saveApplications(apps) {\n    await (0, _storage.setItem)(APPLICATIONS_KEY, apps);\n  }\n  async function addApplication(jobId, workerId, employerId) {\n    const apps = await loadApplications();\n    const existing = apps.find(a => a.jobId === jobId && a.workerId === workerId);\n    if (existing) {\n      console.log('ðŸ“‹ Application already exists', {\n        jobId,\n        workerId,\n        appId: existing.id\n      });\n      return existing;\n    }\n    const app = {\n      id: 'app-' + Date.now().toString() + '-' + Math.random().toString(36).slice(2),\n      jobId,\n      workerId,\n      employerId,\n      createdAt: new Date().toISOString(),\n      status: 'pending'\n    };\n    const next = [...apps, app];\n    await saveApplications(next);\n    console.log('âœ… New application created', {\n      appId: app.id,\n      jobId,\n      workerId,\n      employerId\n    });\n    return app;\n  }\n  async function getApplicationsForJob(jobId) {\n    const apps = await loadApplications();\n    return apps.filter(a => a.jobId === jobId);\n  }\n  async function getApplicationsForWorker(workerId) {\n    const apps = await loadApplications();\n    return apps.filter(a => a.workerId === workerId);\n  }\n  async function acceptApplication(jobId, applicationId) {\n    const apps = await loadApplications();\n    const next = apps.map(app => {\n      if (app.jobId !== jobId) return app;\n      if (app.id === applicationId) {\n        return Object.assign({}, app, {\n          status: 'accepted'\n        });\n      }\n      if (app.status === 'pending') {\n        return Object.assign({}, app, {\n          status: 'rejected'\n        });\n      }\n      return app;\n    });\n    await saveApplications(next);\n  }\n  async function updateApplicationStatus(id, status) {\n    const apps = await loadApplications();\n    const next = apps.map(app => app.id === id ? Object.assign({}, app, {\n      status\n    }) : app);\n    await saveApplications(next);\n  }\n});","lineCount":83,"map":[[7,2,15,0,"exports"],[7,9,15,0],[7,10,15,0,"addApplication"],[7,24,15,0],[7,27,15,0,"addApplication"],[7,41,15,0],[8,2,41,0,"exports"],[8,9,41,0],[8,10,41,0,"getApplicationsForJob"],[8,31,41,0],[8,34,41,0,"getApplicationsForJob"],[8,55,41,0],[9,2,46,0,"exports"],[9,9,46,0],[9,10,46,0,"getApplicationsForWorker"],[9,34,46,0],[9,37,46,0,"getApplicationsForWorker"],[9,61,46,0],[10,2,51,0,"exports"],[10,9,51,0],[10,10,51,0,"acceptApplication"],[10,27,51,0],[10,30,51,0,"acceptApplication"],[10,47,51,0],[11,2,66,0,"exports"],[11,9,66,0],[11,10,66,0,"updateApplicationStatus"],[11,33,66,0],[11,36,66,0,"updateApplicationStatus"],[11,59,66,0],[12,2,1,0],[12,6,1,0,"_storage"],[12,14,1,0],[12,17,1,0,"require"],[12,24,1,0],[12,25,1,0,"_dependencyMap"],[12,39,1,0],[13,2,4,0],[13,8,4,6,"APPLICATIONS_KEY"],[13,24,4,22],[13,27,4,25],[13,53,4,51],[14,2,6,0],[14,17,6,15,"loadApplications"],[14,33,6,31,"loadApplications"],[14,34,6,31],[14,36,6,61],[15,4,7,2],[15,10,7,8,"stored"],[15,16,7,14],[15,19,7,17],[15,25,7,23],[15,29,7,23,"getItem"],[15,37,7,30],[15,38,7,30,"getItem"],[15,45,7,30],[15,47,7,49,"APPLICATIONS_KEY"],[15,63,7,65],[15,64,7,66],[16,4,8,2],[16,11,8,9,"stored"],[16,17,8,15],[16,21,8,19],[16,23,8,21],[17,2,9,0],[18,2,11,0],[18,17,11,15,"saveApplications"],[18,33,11,31,"saveApplications"],[18,34,11,32,"apps"],[18,38,11,54],[18,40,11,71],[19,4,12,2],[19,10,12,8],[19,14,12,8,"setItem"],[19,22,12,15],[19,23,12,15,"setItem"],[19,30,12,15],[19,32,12,34,"APPLICATIONS_KEY"],[19,48,12,50],[19,50,12,52,"apps"],[19,54,12,56],[19,55,12,57],[20,2,13,0],[21,2,15,7],[21,17,15,22,"addApplication"],[21,31,15,36,"addApplication"],[21,32,16,2,"jobId"],[21,37,16,15],[21,39,17,2,"workerId"],[21,47,17,18],[21,49,18,2,"employerId"],[21,59,18,20],[21,61,19,27],[22,4,20,2],[22,10,20,8,"apps"],[22,14,20,12],[22,17,20,15],[22,23,20,21,"loadApplications"],[22,39,20,37],[22,40,20,38],[22,41,20,39],[23,4,21,2],[23,10,21,8,"existing"],[23,18,21,16],[23,21,21,19,"apps"],[23,25,21,23],[23,26,21,24,"find"],[23,30,21,28],[23,31,21,29,"a"],[23,32,21,30],[23,36,21,34,"a"],[23,37,21,35],[23,38,21,36,"jobId"],[23,43,21,41],[23,48,21,46,"jobId"],[23,53,21,51],[23,57,21,55,"a"],[23,58,21,56],[23,59,21,57,"workerId"],[23,67,21,65],[23,72,21,70,"workerId"],[23,80,21,78],[23,81,21,79],[24,4,22,2],[24,8,22,6,"existing"],[24,16,22,14],[24,18,22,16],[25,6,23,4,"console"],[25,13,23,11],[25,14,23,12,"log"],[25,17,23,15],[25,18,23,16],[25,49,23,47],[25,51,23,49],[26,8,23,51,"jobId"],[26,13,23,56],[27,8,23,58,"workerId"],[27,16,23,66],[28,8,23,68,"appId"],[28,13,23,73],[28,15,23,75,"existing"],[28,23,23,83],[28,24,23,84,"id"],[29,6,23,87],[29,7,23,88],[29,8,23,89],[30,6,24,4],[30,13,24,11,"existing"],[30,21,24,19],[31,4,25,2],[32,4,27,2],[32,10,27,8,"app"],[32,13,27,27],[32,16,27,30],[33,6,28,4,"id"],[33,8,28,6],[33,10,28,8],[33,16,28,14],[33,19,28,17,"Date"],[33,23,28,21],[33,24,28,22,"now"],[33,27,28,25],[33,28,28,26],[33,29,28,27],[33,30,28,28,"toString"],[33,38,28,36],[33,39,28,37],[33,40,28,38],[33,43,28,41],[33,46,28,44],[33,49,28,47,"Math"],[33,53,28,51],[33,54,28,52,"random"],[33,60,28,58],[33,61,28,59],[33,62,28,60],[33,63,28,61,"toString"],[33,71,28,69],[33,72,28,70],[33,74,28,72],[33,75,28,73],[33,76,28,74,"slice"],[33,81,28,79],[33,82,28,80],[33,83,28,81],[33,84,28,82],[34,6,29,4,"jobId"],[34,11,29,9],[35,6,30,4,"workerId"],[35,14,30,12],[36,6,31,4,"employerId"],[36,16,31,14],[37,6,32,4,"createdAt"],[37,15,32,13],[37,17,32,15],[37,21,32,19,"Date"],[37,25,32,23],[37,26,32,24],[37,27,32,25],[37,28,32,26,"toISOString"],[37,39,32,37],[37,40,32,38],[37,41,32,39],[38,6,33,4,"status"],[38,12,33,10],[38,14,33,12],[39,4,34,2],[39,5,34,3],[40,4,35,2],[40,10,35,8,"next"],[40,14,35,12],[40,17,35,15],[40,18,35,16],[40,21,35,19,"apps"],[40,25,35,23],[40,27,35,25,"app"],[40,30,35,28],[40,31,35,29],[41,4,36,2],[41,10,36,8,"saveApplications"],[41,26,36,24],[41,27,36,25,"next"],[41,31,36,29],[41,32,36,30],[42,4,37,2,"console"],[42,11,37,9],[42,12,37,10,"log"],[42,15,37,13],[42,16,37,14],[42,43,37,41],[42,45,37,43],[43,6,37,45,"appId"],[43,11,37,50],[43,13,37,52,"app"],[43,16,37,55],[43,17,37,56,"id"],[43,19,37,58],[44,6,37,60,"jobId"],[44,11,37,65],[45,6,37,67,"workerId"],[45,14,37,75],[46,6,37,77,"employerId"],[47,4,37,88],[47,5,37,89],[47,6,37,90],[48,4,38,2],[48,11,38,9,"app"],[48,14,38,12],[49,2,39,0],[50,2,41,7],[50,17,41,22,"getApplicationsForJob"],[50,38,41,43,"getApplicationsForJob"],[50,39,41,44,"jobId"],[50,44,41,57],[50,46,41,86],[51,4,42,2],[51,10,42,8,"apps"],[51,14,42,12],[51,17,42,15],[51,23,42,21,"loadApplications"],[51,39,42,37],[51,40,42,38],[51,41,42,39],[52,4,43,2],[52,11,43,9,"apps"],[52,15,43,13],[52,16,43,14,"filter"],[52,22,43,20],[52,23,43,21,"a"],[52,24,43,22],[52,28,43,26,"a"],[52,29,43,27],[52,30,43,28,"jobId"],[52,35,43,33],[52,40,43,38,"jobId"],[52,45,43,43],[52,46,43,44],[53,2,44,0],[54,2,46,7],[54,17,46,22,"getApplicationsForWorker"],[54,41,46,46,"getApplicationsForWorker"],[54,42,46,47,"workerId"],[54,50,46,63],[54,52,46,92],[55,4,47,2],[55,10,47,8,"apps"],[55,14,47,12],[55,17,47,15],[55,23,47,21,"loadApplications"],[55,39,47,37],[55,40,47,38],[55,41,47,39],[56,4,48,2],[56,11,48,9,"apps"],[56,15,48,13],[56,16,48,14,"filter"],[56,22,48,20],[56,23,48,21,"a"],[56,24,48,22],[56,28,48,26,"a"],[56,29,48,27],[56,30,48,28,"workerId"],[56,38,48,36],[56,43,48,41,"workerId"],[56,51,48,49],[56,52,48,50],[57,2,49,0],[58,2,51,7],[58,17,51,22,"acceptApplication"],[58,34,51,39,"acceptApplication"],[58,35,51,40,"jobId"],[58,40,51,53],[58,42,51,55,"applicationId"],[58,55,51,76],[58,57,51,93],[59,4,52,2],[59,10,52,8,"apps"],[59,14,52,12],[59,17,52,15],[59,23,52,21,"loadApplications"],[59,39,52,37],[59,40,52,38],[59,41,52,39],[60,4,53,2],[60,10,53,8,"next"],[60,14,53,12],[60,17,53,15,"apps"],[60,21,53,19],[60,22,53,20,"map"],[60,25,53,23],[60,26,53,24,"app"],[60,29,53,27],[60,33,53,31],[61,6,54,4],[61,10,54,8,"app"],[61,13,54,11],[61,14,54,12,"jobId"],[61,19,54,17],[61,24,54,22,"jobId"],[61,29,54,27],[61,31,54,29],[61,38,54,36,"app"],[61,41,54,39],[62,6,55,4],[62,10,55,8,"app"],[62,13,55,11],[62,14,55,12,"id"],[62,16,55,14],[62,21,55,19,"applicationId"],[62,34,55,32],[62,36,55,34],[63,8,56,6],[63,15,56,6,"Object"],[63,21,56,6],[63,22,56,6,"assign"],[63,28,56,6],[63,33,56,18,"app"],[63,36,56,21],[64,10,56,23,"status"],[64,16,56,29],[64,18,56,31],[65,8,56,62],[66,6,57,4],[67,6,58,4],[67,10,58,8,"app"],[67,13,58,11],[67,14,58,12,"status"],[67,20,58,18],[67,25,58,23],[67,34,58,32],[67,36,58,34],[68,8,59,6],[68,15,59,6,"Object"],[68,21,59,6],[68,22,59,6,"assign"],[68,28,59,6],[68,33,59,18,"app"],[68,36,59,21],[69,10,59,23,"status"],[69,16,59,29],[69,18,59,31],[70,8,59,62],[71,6,60,4],[72,6,61,4],[72,13,61,11,"app"],[72,16,61,14],[73,4,62,2],[73,5,62,3],[73,6,62,4],[74,4,63,2],[74,10,63,8,"saveApplications"],[74,26,63,24],[74,27,63,25,"next"],[74,31,63,29],[74,32,63,30],[75,2,64,0],[76,2,66,7],[76,17,66,22,"updateApplicationStatus"],[76,40,66,45,"updateApplicationStatus"],[76,41,66,46,"id"],[76,43,66,56],[76,45,66,58,"status"],[76,51,66,83],[76,53,66,100],[77,4,67,2],[77,10,67,8,"apps"],[77,14,67,12],[77,17,67,15],[77,23,67,21,"loadApplications"],[77,39,67,37],[77,40,67,38],[77,41,67,39],[78,4,68,2],[78,10,68,8,"next"],[78,14,68,12],[78,17,68,15,"apps"],[78,21,68,19],[78,22,68,20,"map"],[78,25,68,23],[78,26,68,24,"app"],[78,29,68,27],[78,33,68,32,"app"],[78,36,68,35],[78,37,68,36,"id"],[78,39,68,38],[78,44,68,43,"id"],[78,46,68,45],[78,49,68,45,"Object"],[78,55,68,45],[78,56,68,45,"assign"],[78,62,68,45],[78,67,68,53,"app"],[78,70,68,56],[79,6,68,58,"status"],[80,4,68,64],[80,9,68,69,"app"],[80,12,68,73],[80,13,68,74],[81,4,69,2],[81,10,69,8,"saveApplications"],[81,26,69,24],[81,27,69,25,"next"],[81,31,69,29],[81,32,69,30],[82,2,70,0],[83,0,70,1],[83,3]],"functionMap":{"names":["<global>","loadApplications","saveApplications","addApplication","apps.find$argument_0","getApplicationsForJob","apps.filter$argument_0","getApplicationsForWorker","acceptApplication","apps.map$argument_0","updateApplicationStatus"],"mappings":"AAA;ACK;CDG;AEE;CFE;OGE;6BCM,iDD;CHkB;OKE;qBCE,sBD;CLC;OOE;qBDE,4BC;CPC;OQE;wBCE;GDS;CRE;OUE;wBDE,iDC;CVE"},"hasCjsExports":false},"type":"js/module"}]}