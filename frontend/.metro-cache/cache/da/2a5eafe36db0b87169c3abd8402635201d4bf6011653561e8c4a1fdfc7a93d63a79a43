{"dependencies":[{"name":"./distance","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":159},"end":{"line":4,"column":47,"index":206}}],"key":"iycZ8wRItk4OOQEBVmvrrq3ooL8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.simpleMatch = simpleMatch;\n  exports.getMatchingJobs = getMatchingJobs;\n  exports.debugMatch = debugMatch;\n  var _distance = require(_dependencyMap[0], \"./distance\");\n  // utils/matchingSimple.ts - SUPER SIMPLE MATCHING - FUNKTIONIERT IMMER!\n\n  /**\n   * EINFACHSTES MATCHING - NUR DAS N√ñTIGSTE\n   * \n   * REGEL 1: Job ist offen\n   * REGEL 2: Kategorie passt\n   * FERTIG!\n   */\n  function simpleMatch(job, worker) {\n    // Sicherheitscheck: Daten existieren\n    if (!job || !worker) {\n      console.log('‚ùå Job oder Worker fehlt');\n      return false;\n    }\n\n    // REGEL 1: Job muss offen sein\n    if (job.status !== 'open' && job.status !== 'pending') {\n      console.log(`‚ùå Job \"${job.title}\" ist nicht offen (Status: ${job.status})`);\n      return false;\n    }\n\n    // REGEL 2: Job darf noch nicht matched sein\n    if (job.matchedWorkerId) {\n      console.log(`‚ùå Job \"${job.title}\" hat bereits einen Worker`);\n      return false;\n    }\n\n    // REGEL 3: Distanz-Check (WICHTIG!)\n    if (worker.homeLat && worker.homeLon && job.lat && job.lon) {\n      var distance = (0, _distance.calculateDistance)({\n        lat: job.lat,\n        lon: job.lon\n      }, {\n        lat: worker.homeLat,\n        lon: worker.homeLon\n      });\n      if (distance > worker.radiusKm) {\n        console.log(`‚ùå Job \"${job.title}\" ist ${distance.toFixed(1)} km entfernt (Radius: ${worker.radiusKm} km)`);\n        return false;\n      }\n    }\n\n    // REGEL 4: Kategorie-Match\n    var jobCategory = job.category || '';\n    var workerCategories = worker.categories || [];\n    if (workerCategories.length === 0) {\n      console.log(`‚ö†Ô∏è Worker hat keine Kategorien - KEIN MATCH f√ºr \"${job.title}\"`);\n      return false;\n    }\n    var categoryMatches = workerCategories.includes(jobCategory);\n    if (!categoryMatches) {\n      console.log(`‚ùå Kategorie \"${jobCategory}\" nicht in Worker-Kategorien [${workerCategories.join(', ')}]`);\n      return false;\n    }\n\n    // MATCH! üéâ\n    console.log(`‚úÖ JOB MATCHED! \"${job.title}\" (${jobCategory}) passt zu Worker mit [${workerCategories.join(', ')}]`);\n    return true;\n  }\n\n  /**\n   * Filtert Jobs f√ºr einen Worker - SUPER EINFACH\n   */\n  function getMatchingJobs(allJobs, worker) {\n    var _worker$categories;\n    console.log('\\nüîç === SIMPLE MATCHING START ===');\n    console.log(`üìä Pr√ºfe ${allJobs.length} Jobs`);\n    console.log(`üë§ Worker-Kategorien: [${((_worker$categories = worker.categories) == null ? void 0 : _worker$categories.join(', ')) || 'KEINE'}]`);\n    var matches = [];\n    for (var job of allJobs) {\n      var matched = simpleMatch(job, worker);\n      if (matched) {\n        matches.push(job);\n      }\n    }\n    console.log(`\\n‚úÖ ERGEBNIS: ${matches.length} von ${allJobs.length} Jobs matchen`);\n    console.log('üîç === SIMPLE MATCHING END ===\\n');\n    return matches;\n  }\n\n  /**\n   * Noch einfachere Version - NUR f√ºr Debugging\n   * Zeigt JEDEN Schritt\n   */\n  function debugMatch(job, worker) {\n    var result = {\n      matches: false,\n      reason: '',\n      details: {}\n    };\n\n    // Check 1: Daten vorhanden?\n    if (!job || !worker) {\n      result.reason = 'Job oder Worker fehlt';\n      result.details.jobExists = !!job;\n      result.details.workerExists = !!worker;\n      return result;\n    }\n    result.details.jobTitle = job.title;\n    result.details.jobStatus = job.status;\n    result.details.jobCategory = job.category;\n    result.details.workerCategories = worker.categories || [];\n\n    // Check 2: Job offen?\n    if (job.status !== 'open' && job.status !== 'pending') {\n      result.reason = `Job-Status ist \"${job.status}\" (nicht open/pending)`;\n      return result;\n    }\n\n    // Check 3: Bereits matched?\n    if (job.matchedWorkerId) {\n      result.reason = 'Job hat bereits einen Worker';\n      result.details.matchedWorkerId = job.matchedWorkerId;\n      return result;\n    }\n\n    // Check 4: Kategorie-Match\n    var workerCategories = worker.categories || [];\n    var categoryMatches = workerCategories.includes(job.category || '');\n    result.details.categoryCheck = {\n      jobCategory: job.category,\n      workerCategories: workerCategories,\n      matches: categoryMatches\n    };\n    if (!categoryMatches) {\n      result.reason = `Kategorie \"${job.category}\" nicht in [${workerCategories.join(', ')}]`;\n      return result;\n    }\n\n    // MATCH!\n    result.matches = true;\n    result.reason = 'Alle Checks bestanden - MATCH!';\n    return result;\n  }\n});","lineCount":146,"map":[[7,2,13,0,"exports"],[7,9,13,0],[7,10,13,0,"simpleMatch"],[7,21,13,0],[7,24,13,0,"simpleMatch"],[7,35,13,0],[8,2,69,0,"exports"],[8,9,69,0],[8,10,69,0,"getMatchingJobs"],[8,25,69,0],[8,28,69,0,"getMatchingJobs"],[8,43,69,0],[9,2,93,0,"exports"],[9,9,93,0],[9,10,93,0,"debugMatch"],[9,20,93,0],[9,23,93,0,"debugMatch"],[9,33,93,0],[10,2,4,0],[10,6,4,0,"_distance"],[10,15,4,0],[10,18,4,0,"require"],[10,25,4,0],[10,26,4,0,"_dependencyMap"],[10,40,4,0],[11,2,1,0],[13,2,6,0],[14,0,7,0],[15,0,8,0],[16,0,9,0],[17,0,10,0],[18,0,11,0],[19,0,12,0],[20,2,13,7],[20,11,13,16,"simpleMatch"],[20,22,13,27,"simpleMatch"],[20,23,13,28,"job"],[20,26,13,36],[20,28,13,38,"worker"],[20,34,13,59],[20,36,13,70],[21,4,14,2],[22,4,15,2],[22,8,15,6],[22,9,15,7,"job"],[22,12,15,10],[22,16,15,14],[22,17,15,15,"worker"],[22,23,15,21],[22,25,15,23],[23,6,16,4,"console"],[23,13,16,11],[23,14,16,12,"log"],[23,17,16,15],[23,18,16,16],[23,43,16,41],[23,44,16,42],[24,6,17,4],[24,13,17,11],[24,18,17,16],[25,4,18,2],[27,4,20,2],[28,4,21,2],[28,8,21,6,"job"],[28,11,21,9],[28,12,21,10,"status"],[28,18,21,16],[28,23,21,21],[28,29,21,27],[28,33,21,31,"job"],[28,36,21,34],[28,37,21,35,"status"],[28,43,21,41],[28,48,21,46],[28,57,21,55],[28,59,21,57],[29,6,22,4,"console"],[29,13,22,11],[29,14,22,12,"log"],[29,17,22,15],[29,18,22,16],[29,28,22,26,"job"],[29,31,22,29],[29,32,22,30,"title"],[29,37,22,35],[29,67,22,65,"job"],[29,70,22,68],[29,71,22,69,"status"],[29,77,22,75],[29,80,22,78],[29,81,22,79],[30,6,23,4],[30,13,23,11],[30,18,23,16],[31,4,24,2],[33,4,26,2],[34,4,27,2],[34,8,27,6,"job"],[34,11,27,9],[34,12,27,10,"matchedWorkerId"],[34,27,27,25],[34,29,27,27],[35,6,28,4,"console"],[35,13,28,11],[35,14,28,12,"log"],[35,17,28,15],[35,18,28,16],[35,28,28,26,"job"],[35,31,28,29],[35,32,28,30,"title"],[35,37,28,35],[35,65,28,63],[35,66,28,64],[36,6,29,4],[36,13,29,11],[36,18,29,16],[37,4,30,2],[39,4,32,2],[40,4,33,2],[40,8,33,6,"worker"],[40,14,33,12],[40,15,33,13,"homeLat"],[40,22,33,20],[40,26,33,24,"worker"],[40,32,33,30],[40,33,33,31,"homeLon"],[40,40,33,38],[40,44,33,42,"job"],[40,47,33,45],[40,48,33,46,"lat"],[40,51,33,49],[40,55,33,53,"job"],[40,58,33,56],[40,59,33,57,"lon"],[40,62,33,60],[40,64,33,62],[41,6,34,4],[41,10,34,10,"distance"],[41,18,34,18],[41,21,34,21],[41,25,34,21,"calculateDistance"],[41,34,34,38],[41,35,34,38,"calculateDistance"],[41,52,34,38],[41,54,35,6],[42,8,35,8,"lat"],[42,11,35,11],[42,13,35,13,"job"],[42,16,35,16],[42,17,35,17,"lat"],[42,20,35,20],[43,8,35,22,"lon"],[43,11,35,25],[43,13,35,27,"job"],[43,16,35,30],[43,17,35,31,"lon"],[44,6,35,35],[44,7,35,36],[44,9,36,6],[45,8,36,8,"lat"],[45,11,36,11],[45,13,36,13,"worker"],[45,19,36,19],[45,20,36,20,"homeLat"],[45,27,36,27],[46,8,36,29,"lon"],[46,11,36,32],[46,13,36,34,"worker"],[46,19,36,40],[46,20,36,41,"homeLon"],[47,6,36,49],[47,7,37,4],[47,8,37,5],[48,6,39,4],[48,10,39,8,"distance"],[48,18,39,16],[48,21,39,19,"worker"],[48,27,39,25],[48,28,39,26,"radiusKm"],[48,36,39,34],[48,38,39,36],[49,8,40,6,"console"],[49,15,40,13],[49,16,40,14,"log"],[49,19,40,17],[49,20,40,18],[49,30,40,28,"job"],[49,33,40,31],[49,34,40,32,"title"],[49,39,40,37],[49,48,40,46,"distance"],[49,56,40,54],[49,57,40,55,"toFixed"],[49,64,40,62],[49,65,40,63],[49,66,40,64],[49,67,40,65],[49,92,40,90,"worker"],[49,98,40,96],[49,99,40,97,"radiusKm"],[49,107,40,105],[49,113,40,111],[49,114,40,112],[50,8,41,6],[50,15,41,13],[50,20,41,18],[51,6,42,4],[52,4,43,2],[54,4,45,2],[55,4,46,2],[55,8,46,8,"jobCategory"],[55,19,46,19],[55,22,46,22,"job"],[55,25,46,25],[55,26,46,26,"category"],[55,34,46,34],[55,38,46,38],[55,40,46,40],[56,4,47,2],[56,8,47,8,"workerCategories"],[56,24,47,24],[56,27,47,27,"worker"],[56,33,47,33],[56,34,47,34,"categories"],[56,44,47,44],[56,48,47,48],[56,50,47,50],[57,4,49,2],[57,8,49,6,"workerCategories"],[57,24,49,22],[57,25,49,23,"length"],[57,31,49,29],[57,36,49,34],[57,37,49,35],[57,39,49,37],[58,6,50,4,"console"],[58,13,50,11],[58,14,50,12,"log"],[58,17,50,15],[58,18,50,16],[58,70,50,68,"job"],[58,73,50,71],[58,74,50,72,"title"],[58,79,50,77],[58,82,50,80],[58,83,50,81],[59,6,51,4],[59,13,51,11],[59,18,51,16],[60,4,52,2],[61,4,54,2],[61,8,54,8,"categoryMatches"],[61,23,54,23],[61,26,54,26,"workerCategories"],[61,42,54,42],[61,43,54,43,"includes"],[61,51,54,51],[61,52,54,52,"jobCategory"],[61,63,54,63],[61,64,54,64],[62,4,56,2],[62,8,56,6],[62,9,56,7,"categoryMatches"],[62,24,56,22],[62,26,56,24],[63,6,57,4,"console"],[63,13,57,11],[63,14,57,12,"log"],[63,17,57,15],[63,18,57,16],[63,34,57,32,"jobCategory"],[63,45,57,43],[63,78,57,76,"workerCategories"],[63,94,57,92],[63,95,57,93,"join"],[63,99,57,97],[63,100,57,98],[63,104,57,102],[63,105,57,103],[63,108,57,106],[63,109,57,107],[64,6,58,4],[64,13,58,11],[64,18,58,16],[65,4,59,2],[67,4,61,2],[68,4,62,2,"console"],[68,11,62,9],[68,12,62,10,"log"],[68,15,62,13],[68,16,62,14],[68,35,62,33,"job"],[68,38,62,36],[68,39,62,37,"title"],[68,44,62,42],[68,50,62,48,"jobCategory"],[68,61,62,59],[68,87,62,85,"workerCategories"],[68,103,62,101],[68,104,62,102,"join"],[68,108,62,106],[68,109,62,107],[68,113,62,111],[68,114,62,112],[68,117,62,115],[68,118,62,116],[69,4,63,2],[69,11,63,9],[69,15,63,13],[70,2,64,0],[72,2,66,0],[73,0,67,0],[74,0,68,0],[75,2,69,7],[75,11,69,16,"getMatchingJobs"],[75,26,69,31,"getMatchingJobs"],[75,27,69,32,"allJobs"],[75,34,69,46],[75,36,69,48,"worker"],[75,42,69,69],[75,44,69,78],[76,4,69,78],[76,8,69,78,"_worker$categories"],[76,26,69,78],[77,4,70,2,"console"],[77,11,70,9],[77,12,70,10,"log"],[77,15,70,13],[77,16,70,14],[77,52,70,50],[77,53,70,51],[78,4,71,2,"console"],[78,11,71,9],[78,12,71,10,"log"],[78,15,71,13],[78,16,71,14],[78,28,71,26,"allJobs"],[78,35,71,33],[78,36,71,34,"length"],[78,42,71,40],[78,49,71,47],[78,50,71,48],[79,4,72,2,"console"],[79,11,72,9],[79,12,72,10,"log"],[79,15,72,13],[79,16,72,14],[79,42,72,40],[79,44,72,40,"_worker$categories"],[79,62,72,40],[79,65,72,40,"worker"],[79,71,72,46],[79,72,72,47,"categories"],[79,82,72,57],[79,103,72,40,"_worker$categories"],[79,121,72,40],[79,122,72,59,"join"],[79,126,72,63],[79,127,72,64],[79,131,72,68],[79,132,72,69],[79,137,72,73],[79,144,72,80],[79,147,72,83],[79,148,72,84],[80,4,74,2],[80,8,74,8,"matches"],[80,15,74,22],[80,18,74,25],[80,20,74,27],[81,4,76,2],[81,9,76,7],[81,13,76,13,"job"],[81,16,76,16],[81,20,76,20,"allJobs"],[81,27,76,27],[81,29,76,29],[82,6,77,4],[82,10,77,10,"matched"],[82,17,77,17],[82,20,77,20,"simpleMatch"],[82,31,77,31],[82,32,77,32,"job"],[82,35,77,35],[82,37,77,37,"worker"],[82,43,77,43],[82,44,77,44],[83,6,78,4],[83,10,78,8,"matched"],[83,17,78,15],[83,19,78,17],[84,8,79,6,"matches"],[84,15,79,13],[84,16,79,14,"push"],[84,20,79,18],[84,21,79,19,"job"],[84,24,79,22],[84,25,79,23],[85,6,80,4],[86,4,81,2],[87,4,83,2,"console"],[87,11,83,9],[87,12,83,10,"log"],[87,15,83,13],[87,16,83,14],[87,33,83,31,"matches"],[87,40,83,38],[87,41,83,39,"length"],[87,47,83,45],[87,55,83,53,"allJobs"],[87,62,83,60],[87,63,83,61,"length"],[87,69,83,67],[87,84,83,82],[87,85,83,83],[88,4,84,2,"console"],[88,11,84,9],[88,12,84,10,"log"],[88,15,84,13],[88,16,84,14],[88,50,84,48],[88,51,84,49],[89,4,86,2],[89,11,86,9,"matches"],[89,18,86,16],[90,2,87,0],[92,2,89,0],[93,0,90,0],[94,0,91,0],[95,0,92,0],[96,2,93,7],[96,11,93,16,"debugMatch"],[96,21,93,26,"debugMatch"],[96,22,93,27,"job"],[96,25,93,35],[96,27,93,37,"worker"],[96,33,93,58],[96,35,97,2],[97,4,98,2],[97,8,98,8,"result"],[97,14,98,19],[97,17,98,22],[98,6,99,4,"matches"],[98,13,99,11],[98,15,99,13],[98,20,99,18],[99,6,100,4,"reason"],[99,12,100,10],[99,14,100,12],[99,16,100,14],[100,6,101,4,"details"],[100,13,101,11],[100,15,101,13],[100,16,101,14],[101,4,102,2],[101,5,102,3],[103,4,104,2],[104,4,105,2],[104,8,105,6],[104,9,105,7,"job"],[104,12,105,10],[104,16,105,14],[104,17,105,15,"worker"],[104,23,105,21],[104,25,105,23],[105,6,106,4,"result"],[105,12,106,10],[105,13,106,11,"reason"],[105,19,106,17],[105,22,106,20],[105,45,106,43],[106,6,107,4,"result"],[106,12,107,10],[106,13,107,11,"details"],[106,20,107,18],[106,21,107,19,"jobExists"],[106,30,107,28],[106,33,107,31],[106,34,107,32],[106,35,107,33,"job"],[106,38,107,36],[107,6,108,4,"result"],[107,12,108,10],[107,13,108,11,"details"],[107,20,108,18],[107,21,108,19,"workerExists"],[107,33,108,31],[107,36,108,34],[107,37,108,35],[107,38,108,36,"worker"],[107,44,108,42],[108,6,109,4],[108,13,109,11,"result"],[108,19,109,17],[109,4,110,2],[110,4,112,2,"result"],[110,10,112,8],[110,11,112,9,"details"],[110,18,112,16],[110,19,112,17,"jobTitle"],[110,27,112,25],[110,30,112,28,"job"],[110,33,112,31],[110,34,112,32,"title"],[110,39,112,37],[111,4,113,2,"result"],[111,10,113,8],[111,11,113,9,"details"],[111,18,113,16],[111,19,113,17,"jobStatus"],[111,28,113,26],[111,31,113,29,"job"],[111,34,113,32],[111,35,113,33,"status"],[111,41,113,39],[112,4,114,2,"result"],[112,10,114,8],[112,11,114,9,"details"],[112,18,114,16],[112,19,114,17,"jobCategory"],[112,30,114,28],[112,33,114,31,"job"],[112,36,114,34],[112,37,114,35,"category"],[112,45,114,43],[113,4,115,2,"result"],[113,10,115,8],[113,11,115,9,"details"],[113,18,115,16],[113,19,115,17,"workerCategories"],[113,35,115,33],[113,38,115,36,"worker"],[113,44,115,42],[113,45,115,43,"categories"],[113,55,115,53],[113,59,115,57],[113,61,115,59],[115,4,117,2],[116,4,118,2],[116,8,118,6,"job"],[116,11,118,9],[116,12,118,10,"status"],[116,18,118,16],[116,23,118,21],[116,29,118,27],[116,33,118,31,"job"],[116,36,118,34],[116,37,118,35,"status"],[116,43,118,41],[116,48,118,46],[116,57,118,55],[116,59,118,57],[117,6,119,4,"result"],[117,12,119,10],[117,13,119,11,"reason"],[117,19,119,17],[117,22,119,20],[117,41,119,39,"job"],[117,44,119,42],[117,45,119,43,"status"],[117,51,119,49],[117,75,119,73],[118,6,120,4],[118,13,120,11,"result"],[118,19,120,17],[119,4,121,2],[121,4,123,2],[122,4,124,2],[122,8,124,6,"job"],[122,11,124,9],[122,12,124,10,"matchedWorkerId"],[122,27,124,25],[122,29,124,27],[123,6,125,4,"result"],[123,12,125,10],[123,13,125,11,"reason"],[123,19,125,17],[123,22,125,20],[123,52,125,50],[124,6,126,4,"result"],[124,12,126,10],[124,13,126,11,"details"],[124,20,126,18],[124,21,126,19,"matchedWorkerId"],[124,36,126,34],[124,39,126,37,"job"],[124,42,126,40],[124,43,126,41,"matchedWorkerId"],[124,58,126,56],[125,6,127,4],[125,13,127,11,"result"],[125,19,127,17],[126,4,128,2],[128,4,130,2],[129,4,131,2],[129,8,131,8,"workerCategories"],[129,24,131,24],[129,27,131,27,"worker"],[129,33,131,33],[129,34,131,34,"categories"],[129,44,131,44],[129,48,131,48],[129,50,131,50],[130,4,132,2],[130,8,132,8,"categoryMatches"],[130,23,132,23],[130,26,132,26,"workerCategories"],[130,42,132,42],[130,43,132,43,"includes"],[130,51,132,51],[130,52,132,52,"job"],[130,55,132,55],[130,56,132,56,"category"],[130,64,132,64],[130,68,132,68],[130,70,132,70],[130,71,132,71],[131,4,134,2,"result"],[131,10,134,8],[131,11,134,9,"details"],[131,18,134,16],[131,19,134,17,"categoryCheck"],[131,32,134,30],[131,35,134,33],[132,6,135,4,"jobCategory"],[132,17,135,15],[132,19,135,17,"job"],[132,22,135,20],[132,23,135,21,"category"],[132,31,135,29],[133,6,136,4,"workerCategories"],[133,22,136,20],[133,24,136,22,"workerCategories"],[133,40,136,38],[134,6,137,4,"matches"],[134,13,137,11],[134,15,137,13,"categoryMatches"],[135,4,138,2],[135,5,138,3],[136,4,140,2],[136,8,140,6],[136,9,140,7,"categoryMatches"],[136,24,140,22],[136,26,140,24],[137,6,141,4,"result"],[137,12,141,10],[137,13,141,11,"reason"],[137,19,141,17],[137,22,141,20],[137,36,141,34,"job"],[137,39,141,37],[137,40,141,38,"category"],[137,48,141,46],[137,63,141,61,"workerCategories"],[137,79,141,77],[137,80,141,78,"join"],[137,84,141,82],[137,85,141,83],[137,89,141,87],[137,90,141,88],[137,93,141,91],[138,6,142,4],[138,13,142,11,"result"],[138,19,142,17],[139,4,143,2],[141,4,145,2],[142,4,146,2,"result"],[142,10,146,8],[142,11,146,9,"matches"],[142,18,146,16],[142,21,146,19],[142,25,146,23],[143,4,147,2,"result"],[143,10,147,8],[143,11,147,9,"reason"],[143,17,147,15],[143,20,147,18],[143,52,147,50],[144,4,148,2],[144,11,148,9,"result"],[144,17,148,15],[145,2,149,0],[146,0,149,1],[146,3]],"functionMap":{"names":["<global>","simpleMatch","getMatchingJobs","debugMatch"],"mappings":"AAA;OCY;CDmD;OEK;CFkB;OGM;CHwD"},"hasCjsExports":false},"type":"js/module"}]}