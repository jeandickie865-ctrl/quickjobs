{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../config","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":149},"end":{"line":3,"column":36,"index":185}}],"key":"pHqFJJBAh3HI9ZCkK8fFRwPv3x0=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _config = require(_dependencyMap[2], \"../config\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)({\n    user: null,\n    token: null,\n    loading: true,\n    login: async () => false,\n    signOut: async () => {}\n  });\n  function AuthProvider({\n    children\n  }) {\n    _s();\n    const [token, setToken] = (0, _react.useState)(null);\n    const [user, setUser] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    async function loadSession() {\n      const storedToken = await AsyncStorage.default.getItem(\"token\");\n      if (storedToken) {\n        setToken(storedToken);\n        const me = await fetch(`${_config.API_URL}/auth/me`, {\n          headers: {\n            Authorization: `Bearer ${storedToken}`\n          }\n        });\n        const data = await me.json();\n        // Backend gibt userId zurück, aber Frontend erwartet id\n        const user = Object.assign({}, data, {\n          id: data.userId\n        });\n        setUser(user);\n      }\n      setLoading(false);\n    }\n    (0, _react.useEffect)(() => {\n      loadSession();\n    }, []);\n    async function login(email, password) {\n      const res = await fetch(`${_config.API_URL}/auth/login`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          email,\n          password\n        })\n      });\n      if (!res.ok) return false;\n      const data = await res.json();\n      await AsyncStorage.default.setItem(\"token\", data.token);\n      setToken(data.token);\n      const me = await fetch(`${_config.API_URL}/auth/me`, {\n        headers: {\n          Authorization: `Bearer ${data.token}`\n        }\n      });\n      const userData = await me.json();\n\n      // Backend gibt userId zurück, aber Frontend erwartet id\n      const user = Object.assign({}, userData, {\n        id: userData.userId\n      });\n      setUser(user);\n      return true;\n    }\n    async function signUp(email, password, role) {\n      const res = await fetch(`${_config.API_URL}/auth/signup`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          email,\n          password,\n          role\n        })\n      });\n      if (!res.ok) {\n        const error = await res.json();\n        throw new Error(error.detail || \"Registrierung fehlgeschlagen\");\n      }\n      const data = await res.json();\n      await AsyncStorage.default.setItem(\"token\", data.token);\n      setToken(data.token);\n      const me = await fetch(`${_config.API_URL}/auth/me`, {\n        headers: {\n          Authorization: `Bearer ${data.token}`\n        }\n      });\n      const userData = await me.json();\n\n      // Backend gibt userId zurück, aber Frontend erwartet id\n      const user = Object.assign({}, userData, {\n        id: userData.userId\n      });\n      setUser(user);\n      return true;\n    }\n    async function signOut() {\n      await AsyncStorage.default.removeItem(\"token\");\n      setUser(null);\n      setToken(null);\n    }\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        loading,\n        login,\n        signUp,\n        signOut\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 5\n    }, this);\n  }\n  _s(AuthProvider, \"BJLYEWtx1XAvvNbKDl/BNSvb+Nw=\");\n  _c = AuthProvider;\n  function useAuth() {\n    _s2();\n    return (0, _react.useContext)(AuthContext);\n  }\n  _s2(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":149,"map":[[15,2,22,0,"exports"],[15,9,22,0],[15,10,22,0,"AuthProvider"],[15,22,22,0],[15,25,22,0,"AuthProvider"],[15,37,22,0],[16,2,112,0,"exports"],[16,9,112,0],[16,10,112,0,"useAuth"],[16,17,112,0],[16,20,112,0,"useAuth"],[16,27,112,0],[17,2,1,0],[17,6,1,0,"_react"],[17,12,1,0],[17,15,1,0,"require"],[17,22,1,0],[17,23,1,0,"_dependencyMap"],[17,37,1,0],[18,2,2,0],[18,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[18,42,2,0],[18,45,2,0,"require"],[18,52,2,0],[18,53,2,0,"_dependencyMap"],[18,67,2,0],[19,2,2,0],[19,6,2,0,"AsyncStorage"],[19,18,2,0],[19,21,2,0,"_interopDefault"],[19,36,2,0],[19,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[19,73,2,0],[20,2,3,0],[20,6,3,0,"_config"],[20,13,3,0],[20,16,3,0,"require"],[20,23,3,0],[20,24,3,0,"_dependencyMap"],[20,38,3,0],[21,2,3,36],[21,6,3,36,"_reactJsxDevRuntime"],[21,25,3,36],[21,28,3,36,"require"],[21,35,3,36],[21,36,3,36,"_dependencyMap"],[21,50,3,36],[22,2,14,0],[22,8,14,6,"AuthContext"],[22,19,14,17],[22,35,14,20],[22,39,14,20,"createContext"],[22,45,14,33],[22,46,14,33,"createContext"],[22,59,14,33],[22,61,14,52],[23,4,15,2,"user"],[23,8,15,6],[23,10,15,8],[23,14,15,12],[24,4,16,2,"token"],[24,9,16,7],[24,11,16,9],[24,15,16,13],[25,4,17,2,"loading"],[25,11,17,9],[25,13,17,11],[25,17,17,15],[26,4,18,2,"login"],[26,9,18,7],[26,11,18,9],[26,17,18,9,"login"],[26,18,18,9],[26,23,18,21],[26,28,18,26],[27,4,19,2,"signOut"],[27,11,19,9],[27,13,19,11],[27,19,19,11,"signOut"],[27,20,19,11],[27,25,19,23],[27,26,19,24],[28,2,20,0],[28,3,20,1],[28,4,20,2],[29,2,22,7],[29,11,22,16,"AuthProvider"],[29,23,22,28,"AuthProvider"],[29,24,22,29],[30,4,22,31,"children"],[31,2,22,40],[31,3,22,41],[31,5,22,43],[32,4,22,43,"_s"],[32,6,22,43],[33,4,23,2],[33,10,23,8],[33,11,23,9,"token"],[33,16,23,14],[33,18,23,16,"setToken"],[33,26,23,24],[33,27,23,25],[33,30,23,28],[33,34,23,28,"useState"],[33,40,23,36],[33,41,23,36,"useState"],[33,49,23,36],[33,51,23,52],[33,55,23,56],[33,56,23,57],[34,4,24,2],[34,10,24,8],[34,11,24,9,"user"],[34,15,24,13],[34,17,24,15,"setUser"],[34,24,24,22],[34,25,24,23],[34,28,24,26],[34,32,24,26,"useState"],[34,38,24,34],[34,39,24,34,"useState"],[34,47,24,34],[34,49,24,40],[34,53,24,44],[34,54,24,45],[35,4,25,2],[35,10,25,8],[35,11,25,9,"loading"],[35,18,25,16],[35,20,25,18,"setLoading"],[35,30,25,28],[35,31,25,29],[35,34,25,32],[35,38,25,32,"useState"],[35,44,25,40],[35,45,25,40,"useState"],[35,53,25,40],[35,55,25,41],[35,59,25,45],[35,60,25,46],[36,4,27,2],[36,19,27,17,"loadSession"],[36,30,27,28,"loadSession"],[36,31,27,28],[36,33,27,31],[37,6,28,4],[37,12,28,10,"storedToken"],[37,23,28,21],[37,26,28,24],[37,32,28,30,"AsyncStorage"],[37,44,28,42],[37,45,28,42,"default"],[37,52,28,42],[37,53,28,43,"getItem"],[37,60,28,50],[37,61,28,51],[37,68,28,58],[37,69,28,59],[38,6,30,4],[38,10,30,8,"storedToken"],[38,21,30,19],[38,23,30,21],[39,8,31,6,"setToken"],[39,16,31,14],[39,17,31,15,"storedToken"],[39,28,31,26],[39,29,31,27],[40,8,32,6],[40,14,32,12,"me"],[40,16,32,14],[40,19,32,17],[40,25,32,23,"fetch"],[40,30,32,28],[40,31,32,29],[40,34,32,32,"API_URL"],[40,41,32,39],[40,42,32,39,"API_URL"],[40,49,32,39],[40,59,32,49],[40,61,32,51],[41,10,33,8,"headers"],[41,17,33,15],[41,19,33,17],[42,12,33,19,"Authorization"],[42,25,33,32],[42,27,33,34],[42,37,33,44,"storedToken"],[42,48,33,55],[43,10,33,58],[44,8,34,6],[44,9,34,7],[44,10,34,8],[45,8,35,6],[45,14,35,12,"data"],[45,18,35,16],[45,21,35,19],[45,27,35,25,"me"],[45,29,35,27],[45,30,35,28,"json"],[45,34,35,32],[45,35,35,33],[45,36,35,34],[46,8,36,6],[47,8,37,6],[47,14,37,12,"user"],[47,18,37,16],[47,21,37,16,"Object"],[47,27,37,16],[47,28,37,16,"assign"],[47,34,37,16],[47,39,37,24,"data"],[47,43,37,28],[48,10,37,30,"id"],[48,12,37,32],[48,14,37,34,"data"],[48,18,37,38],[48,19,37,39,"userId"],[49,8,37,45],[49,10,37,47],[50,8,38,6,"setUser"],[50,15,38,13],[50,16,38,14,"user"],[50,20,38,18],[50,21,38,19],[51,6,39,4],[52,6,41,4,"setLoading"],[52,16,41,14],[52,17,41,15],[52,22,41,20],[52,23,41,21],[53,4,42,2],[54,4,44,2],[54,8,44,2,"useEffect"],[54,14,44,11],[54,15,44,11,"useEffect"],[54,24,44,11],[54,26,44,12],[54,32,44,18],[55,6,45,4,"loadSession"],[55,17,45,15],[55,18,45,16],[55,19,45,17],[56,4,46,2],[56,5,46,3],[56,7,46,5],[56,9,46,7],[56,10,46,8],[57,4,48,2],[57,19,48,17,"login"],[57,24,48,22,"login"],[57,25,48,23,"email"],[57,30,48,36],[57,32,48,38,"password"],[57,40,48,54],[57,42,48,56],[58,6,49,4],[58,12,49,10,"res"],[58,15,49,13],[58,18,49,16],[58,24,49,22,"fetch"],[58,29,49,27],[58,30,49,28],[58,33,49,31,"API_URL"],[58,40,49,38],[58,41,49,38,"API_URL"],[58,48,49,38],[58,61,49,51],[58,63,49,53],[59,8,50,6,"method"],[59,14,50,12],[59,16,50,14],[59,22,50,20],[60,8,51,6,"headers"],[60,15,51,13],[60,17,51,15],[61,10,51,17],[61,24,51,31],[61,26,51,33],[62,8,51,52],[62,9,51,53],[63,8,52,6,"body"],[63,12,52,10],[63,14,52,12,"JSON"],[63,18,52,16],[63,19,52,17,"stringify"],[63,28,52,26],[63,29,52,27],[64,10,52,29,"email"],[64,15,52,34],[65,10,52,36,"password"],[66,8,52,45],[66,9,52,46],[67,6,53,4],[67,7,53,5],[67,8,53,6],[68,6,55,4],[68,10,55,8],[68,11,55,9,"res"],[68,14,55,12],[68,15,55,13,"ok"],[68,17,55,15],[68,19,55,17],[68,26,55,24],[68,31,55,29],[69,6,57,4],[69,12,57,10,"data"],[69,16,57,14],[69,19,57,17],[69,25,57,23,"res"],[69,28,57,26],[69,29,57,27,"json"],[69,33,57,31],[69,34,57,32],[69,35,57,33],[70,6,58,4],[70,12,58,10,"AsyncStorage"],[70,24,58,22],[70,25,58,22,"default"],[70,32,58,22],[70,33,58,23,"setItem"],[70,40,58,30],[70,41,58,31],[70,48,58,38],[70,50,58,40,"data"],[70,54,58,44],[70,55,58,45,"token"],[70,60,58,50],[70,61,58,51],[71,6,59,4,"setToken"],[71,14,59,12],[71,15,59,13,"data"],[71,19,59,17],[71,20,59,18,"token"],[71,25,59,23],[71,26,59,24],[72,6,61,4],[72,12,61,10,"me"],[72,14,61,12],[72,17,61,15],[72,23,61,21,"fetch"],[72,28,61,26],[72,29,61,27],[72,32,61,30,"API_URL"],[72,39,61,37],[72,40,61,37,"API_URL"],[72,47,61,37],[72,57,61,47],[72,59,61,49],[73,8,62,6,"headers"],[73,15,62,13],[73,17,62,15],[74,10,62,17,"Authorization"],[74,23,62,30],[74,25,62,32],[74,35,62,42,"data"],[74,39,62,46],[74,40,62,47,"token"],[74,45,62,52],[75,8,62,55],[76,6,63,4],[76,7,63,5],[76,8,63,6],[77,6,64,4],[77,12,64,10,"userData"],[77,20,64,18],[77,23,64,21],[77,29,64,27,"me"],[77,31,64,29],[77,32,64,30,"json"],[77,36,64,34],[77,37,64,35],[77,38,64,36],[79,6,66,4],[80,6,67,4],[80,12,67,10,"user"],[80,16,67,14],[80,19,67,14,"Object"],[80,25,67,14],[80,26,67,14,"assign"],[80,32,67,14],[80,37,67,22,"userData"],[80,45,67,30],[81,8,67,32,"id"],[81,10,67,34],[81,12,67,36,"userData"],[81,20,67,44],[81,21,67,45,"userId"],[82,6,67,51],[82,8,67,53],[83,6,68,4,"setUser"],[83,13,68,11],[83,14,68,12,"user"],[83,18,68,16],[83,19,68,17],[84,6,69,4],[84,13,69,11],[84,17,69,15],[85,4,70,2],[86,4,72,2],[86,19,72,17,"signUp"],[86,25,72,23,"signUp"],[86,26,72,24,"email"],[86,31,72,37],[86,33,72,39,"password"],[86,41,72,55],[86,43,72,57,"role"],[86,47,72,69],[86,49,72,71],[87,6,73,4],[87,12,73,10,"res"],[87,15,73,13],[87,18,73,16],[87,24,73,22,"fetch"],[87,29,73,27],[87,30,73,28],[87,33,73,31,"API_URL"],[87,40,73,38],[87,41,73,38,"API_URL"],[87,48,73,38],[87,62,73,52],[87,64,73,54],[88,8,74,6,"method"],[88,14,74,12],[88,16,74,14],[88,22,74,20],[89,8,75,6,"headers"],[89,15,75,13],[89,17,75,15],[90,10,75,17],[90,24,75,31],[90,26,75,33],[91,8,75,52],[91,9,75,53],[92,8,76,6,"body"],[92,12,76,10],[92,14,76,12,"JSON"],[92,18,76,16],[92,19,76,17,"stringify"],[92,28,76,26],[92,29,76,27],[93,10,76,29,"email"],[93,15,76,34],[94,10,76,36,"password"],[94,18,76,44],[95,10,76,46,"role"],[96,8,76,51],[96,9,76,52],[97,6,77,4],[97,7,77,5],[97,8,77,6],[98,6,79,4],[98,10,79,8],[98,11,79,9,"res"],[98,14,79,12],[98,15,79,13,"ok"],[98,17,79,15],[98,19,79,17],[99,8,80,6],[99,14,80,12,"error"],[99,19,80,17],[99,22,80,20],[99,28,80,26,"res"],[99,31,80,29],[99,32,80,30,"json"],[99,36,80,34],[99,37,80,35],[99,38,80,36],[100,8,81,6],[100,14,81,12],[100,18,81,16,"Error"],[100,23,81,21],[100,24,81,22,"error"],[100,29,81,27],[100,30,81,28,"detail"],[100,36,81,34],[100,40,81,38],[100,70,81,68],[100,71,81,69],[101,6,82,4],[102,6,84,4],[102,12,84,10,"data"],[102,16,84,14],[102,19,84,17],[102,25,84,23,"res"],[102,28,84,26],[102,29,84,27,"json"],[102,33,84,31],[102,34,84,32],[102,35,84,33],[103,6,85,4],[103,12,85,10,"AsyncStorage"],[103,24,85,22],[103,25,85,22,"default"],[103,32,85,22],[103,33,85,23,"setItem"],[103,40,85,30],[103,41,85,31],[103,48,85,38],[103,50,85,40,"data"],[103,54,85,44],[103,55,85,45,"token"],[103,60,85,50],[103,61,85,51],[104,6,86,4,"setToken"],[104,14,86,12],[104,15,86,13,"data"],[104,19,86,17],[104,20,86,18,"token"],[104,25,86,23],[104,26,86,24],[105,6,88,4],[105,12,88,10,"me"],[105,14,88,12],[105,17,88,15],[105,23,88,21,"fetch"],[105,28,88,26],[105,29,88,27],[105,32,88,30,"API_URL"],[105,39,88,37],[105,40,88,37,"API_URL"],[105,47,88,37],[105,57,88,47],[105,59,88,49],[106,8,89,6,"headers"],[106,15,89,13],[106,17,89,15],[107,10,89,17,"Authorization"],[107,23,89,30],[107,25,89,32],[107,35,89,42,"data"],[107,39,89,46],[107,40,89,47,"token"],[107,45,89,52],[108,8,89,55],[109,6,90,4],[109,7,90,5],[109,8,90,6],[110,6,91,4],[110,12,91,10,"userData"],[110,20,91,18],[110,23,91,21],[110,29,91,27,"me"],[110,31,91,29],[110,32,91,30,"json"],[110,36,91,34],[110,37,91,35],[110,38,91,36],[112,6,93,4],[113,6,94,4],[113,12,94,10,"user"],[113,16,94,14],[113,19,94,14,"Object"],[113,25,94,14],[113,26,94,14,"assign"],[113,32,94,14],[113,37,94,22,"userData"],[113,45,94,30],[114,8,94,32,"id"],[114,10,94,34],[114,12,94,36,"userData"],[114,20,94,44],[114,21,94,45,"userId"],[115,6,94,51],[115,8,94,53],[116,6,95,4,"setUser"],[116,13,95,11],[116,14,95,12,"user"],[116,18,95,16],[116,19,95,17],[117,6,96,4],[117,13,96,11],[117,17,96,15],[118,4,97,2],[119,4,99,2],[119,19,99,17,"signOut"],[119,26,99,24,"signOut"],[119,27,99,24],[119,29,99,27],[120,6,100,4],[120,12,100,10,"AsyncStorage"],[120,24,100,22],[120,25,100,22,"default"],[120,32,100,22],[120,33,100,23,"removeItem"],[120,43,100,33],[120,44,100,34],[120,51,100,41],[120,52,100,42],[121,6,101,4,"setUser"],[121,13,101,11],[121,14,101,12],[121,18,101,16],[121,19,101,17],[122,6,102,4,"setToken"],[122,14,102,12],[122,15,102,13],[122,19,102,17],[122,20,102,18],[123,4,103,2],[124,4,105,2],[124,24,106,4],[124,28,106,4,"_reactJsxDevRuntime"],[124,47,106,4],[124,48,106,4,"jsxDEV"],[124,54,106,4],[124,56,106,5,"AuthContext"],[124,67,106,16],[124,68,106,17,"Provider"],[124,76,106,25],[125,6,106,26,"value"],[125,11,106,31],[125,13,106,33],[126,8,106,35,"user"],[126,12,106,39],[127,8,106,41,"token"],[127,13,106,46],[128,8,106,48,"loading"],[128,15,106,55],[129,8,106,57,"login"],[129,13,106,62],[130,8,106,64,"signUp"],[130,14,106,70],[131,8,106,72,"signOut"],[132,6,106,80],[132,7,106,82],[133,6,106,82,"children"],[133,14,106,82],[133,16,107,7,"children"],[134,4,107,15],[135,6,107,15,"fileName"],[135,14,107,15],[135,16,107,15,"_jsxFileName"],[135,28,107,15],[136,6,107,15,"lineNumber"],[136,16,107,15],[137,6,107,15,"columnNumber"],[137,18,107,15],[138,4,107,15],[138,11,108,26],[138,12,108,27],[139,2,110,0],[140,2,110,1,"_s"],[140,4,110,1],[140,5,22,16,"AuthProvider"],[140,17,22,28],[141,2,22,28,"_c"],[141,4,22,28],[141,7,22,16,"AuthProvider"],[141,19,22,28],[142,2,112,7],[142,11,112,16,"useAuth"],[142,18,112,23,"useAuth"],[142,19,112,23],[142,21,112,26],[143,4,112,26,"_s2"],[143,7,112,26],[144,4,113,2],[144,11,113,9],[144,15,113,9,"useContext"],[144,21,113,19],[144,22,113,19,"useContext"],[144,32,113,19],[144,34,113,20,"AuthContext"],[144,45,113,31],[144,46,113,32],[145,2,114,0],[146,2,114,1,"_s2"],[146,5,114,1],[146,6,112,16,"useAuth"],[146,13,112,23],[147,2,112,23],[147,6,112,23,"_c"],[147,8,112,23],[148,2,112,23,"$RefreshReg$"],[148,14,112,23],[148,15,112,23,"_c"],[148,17,112,23],[149,0,112,23],[149,3]],"functionMap":{"names":["<global>","createContext$argument_0.login","createContext$argument_0.signOut","AuthProvider","loadSession","useEffect$argument_0","login","signUp","signOut","useAuth"],"mappings":"AAA;SCiB,iBD;WEC,cF;OGG;ECK;GDe;YEE;GFE;EGE;GHsB;EIE;GJyB;EKE;GLI;CHO;OSE;CTE"},"hasCjsExports":false},"type":"js/module"}]}