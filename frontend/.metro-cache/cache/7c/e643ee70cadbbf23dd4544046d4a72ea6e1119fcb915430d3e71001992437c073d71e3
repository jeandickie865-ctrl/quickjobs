{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../config","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":149},"end":{"line":3,"column":36,"index":185}}],"key":"pHqFJJBAh3HI9ZCkK8fFRwPv3x0=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _config = require(_dependencyMap[2], \"../config\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)({\n    user: null,\n    token: null,\n    loading: true,\n    login: async () => false,\n    signUp: async () => false,\n    signOut: async () => {}\n  });\n  function AuthProvider({\n    children\n  }) {\n    _s();\n    const [token, setToken] = (0, _react.useState)(null);\n    const [user, setUser] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    async function loadSession() {\n      const storedToken = await AsyncStorage.default.getItem(\"token\");\n      if (storedToken) {\n        setToken(storedToken);\n        const me = await fetch(`${_config.API_URL}/auth/me`, {\n          headers: {\n            Authorization: `Bearer ${storedToken}`\n          }\n        });\n        const data = await me.json();\n        // Backend gibt userId zurück, aber Frontend erwartet id\n        const user = Object.assign({}, data, {\n          id: data.userId\n        });\n        setUser(user);\n      }\n      setLoading(false);\n    }\n    (0, _react.useEffect)(() => {\n      loadSession();\n    }, []);\n    async function login(email, password) {\n      const res = await fetch(`${_config.API_URL}/auth/login`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          email,\n          password\n        })\n      });\n      if (!res.ok) return false;\n      const data = await res.json();\n      await AsyncStorage.default.setItem(\"token\", data.token);\n      setToken(data.token);\n      const me = await fetch(`${_config.API_URL}/auth/me`, {\n        headers: {\n          Authorization: `Bearer ${data.token}`\n        }\n      });\n      const userData = await me.json();\n\n      // Backend gibt userId zurück, aber Frontend erwartet id\n      const user = Object.assign({}, userData, {\n        id: userData.userId\n      });\n      setUser(user);\n      return true;\n    }\n    async function signUp(email, password, role) {\n      const res = await fetch(`${_config.API_URL}/auth/signup`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          email,\n          password,\n          role\n        })\n      });\n      if (!res.ok) {\n        const error = await res.json();\n        throw new Error(error.detail || \"Registrierung fehlgeschlagen\");\n      }\n      const data = await res.json();\n      await AsyncStorage.default.setItem(\"token\", data.token);\n      setToken(data.token);\n      const me = await fetch(`${_config.API_URL}/auth/me`, {\n        headers: {\n          Authorization: `Bearer ${data.token}`\n        }\n      });\n      const userData = await me.json();\n\n      // Backend gibt userId zurück, aber Frontend erwartet id\n      const user = Object.assign({}, userData, {\n        id: userData.userId\n      });\n      setUser(user);\n      return true;\n    }\n    async function signOut() {\n      await AsyncStorage.default.removeItem(\"token\");\n      setUser(null);\n      setToken(null);\n    }\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        loading,\n        login,\n        signUp,\n        signOut\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 5\n    }, this);\n  }\n  _s(AuthProvider, \"BJLYEWtx1XAvvNbKDl/BNSvb+Nw=\");\n  _c = AuthProvider;\n  function useAuth() {\n    _s2();\n    return (0, _react.useContext)(AuthContext);\n  }\n  _s2(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":150,"map":[[15,2,23,0,"exports"],[15,9,23,0],[15,10,23,0,"AuthProvider"],[15,22,23,0],[15,25,23,0,"AuthProvider"],[15,37,23,0],[16,2,113,0,"exports"],[16,9,113,0],[16,10,113,0,"useAuth"],[16,17,113,0],[16,20,113,0,"useAuth"],[16,27,113,0],[17,2,1,0],[17,6,1,0,"_react"],[17,12,1,0],[17,15,1,0,"require"],[17,22,1,0],[17,23,1,0,"_dependencyMap"],[17,37,1,0],[18,2,2,0],[18,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[18,42,2,0],[18,45,2,0,"require"],[18,52,2,0],[18,53,2,0,"_dependencyMap"],[18,67,2,0],[19,2,2,0],[19,6,2,0,"AsyncStorage"],[19,18,2,0],[19,21,2,0,"_interopDefault"],[19,36,2,0],[19,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[19,73,2,0],[20,2,3,0],[20,6,3,0,"_config"],[20,13,3,0],[20,16,3,0,"require"],[20,23,3,0],[20,24,3,0,"_dependencyMap"],[20,38,3,0],[21,2,3,36],[21,6,3,36,"_reactJsxDevRuntime"],[21,25,3,36],[21,28,3,36,"require"],[21,35,3,36],[21,36,3,36,"_dependencyMap"],[21,50,3,36],[22,2,14,0],[22,8,14,6,"AuthContext"],[22,19,14,17],[22,35,14,20],[22,39,14,20,"createContext"],[22,45,14,33],[22,46,14,33,"createContext"],[22,59,14,33],[22,61,14,52],[23,4,15,2,"user"],[23,8,15,6],[23,10,15,8],[23,14,15,12],[24,4,16,2,"token"],[24,9,16,7],[24,11,16,9],[24,15,16,13],[25,4,17,2,"loading"],[25,11,17,9],[25,13,17,11],[25,17,17,15],[26,4,18,2,"login"],[26,9,18,7],[26,11,18,9],[26,17,18,9,"login"],[26,18,18,9],[26,23,18,21],[26,28,18,26],[27,4,19,2,"signUp"],[27,10,19,8],[27,12,19,10],[27,18,19,10,"signUp"],[27,19,19,10],[27,24,19,22],[27,29,19,27],[28,4,20,2,"signOut"],[28,11,20,9],[28,13,20,11],[28,19,20,11,"signOut"],[28,20,20,11],[28,25,20,23],[28,26,20,24],[29,2,21,0],[29,3,21,1],[29,4,21,2],[30,2,23,7],[30,11,23,16,"AuthProvider"],[30,23,23,28,"AuthProvider"],[30,24,23,29],[31,4,23,31,"children"],[32,2,23,40],[32,3,23,41],[32,5,23,43],[33,4,23,43,"_s"],[33,6,23,43],[34,4,24,2],[34,10,24,8],[34,11,24,9,"token"],[34,16,24,14],[34,18,24,16,"setToken"],[34,26,24,24],[34,27,24,25],[34,30,24,28],[34,34,24,28,"useState"],[34,40,24,36],[34,41,24,36,"useState"],[34,49,24,36],[34,51,24,52],[34,55,24,56],[34,56,24,57],[35,4,25,2],[35,10,25,8],[35,11,25,9,"user"],[35,15,25,13],[35,17,25,15,"setUser"],[35,24,25,22],[35,25,25,23],[35,28,25,26],[35,32,25,26,"useState"],[35,38,25,34],[35,39,25,34,"useState"],[35,47,25,34],[35,49,25,40],[35,53,25,44],[35,54,25,45],[36,4,26,2],[36,10,26,8],[36,11,26,9,"loading"],[36,18,26,16],[36,20,26,18,"setLoading"],[36,30,26,28],[36,31,26,29],[36,34,26,32],[36,38,26,32,"useState"],[36,44,26,40],[36,45,26,40,"useState"],[36,53,26,40],[36,55,26,41],[36,59,26,45],[36,60,26,46],[37,4,28,2],[37,19,28,17,"loadSession"],[37,30,28,28,"loadSession"],[37,31,28,28],[37,33,28,31],[38,6,29,4],[38,12,29,10,"storedToken"],[38,23,29,21],[38,26,29,24],[38,32,29,30,"AsyncStorage"],[38,44,29,42],[38,45,29,42,"default"],[38,52,29,42],[38,53,29,43,"getItem"],[38,60,29,50],[38,61,29,51],[38,68,29,58],[38,69,29,59],[39,6,31,4],[39,10,31,8,"storedToken"],[39,21,31,19],[39,23,31,21],[40,8,32,6,"setToken"],[40,16,32,14],[40,17,32,15,"storedToken"],[40,28,32,26],[40,29,32,27],[41,8,33,6],[41,14,33,12,"me"],[41,16,33,14],[41,19,33,17],[41,25,33,23,"fetch"],[41,30,33,28],[41,31,33,29],[41,34,33,32,"API_URL"],[41,41,33,39],[41,42,33,39,"API_URL"],[41,49,33,39],[41,59,33,49],[41,61,33,51],[42,10,34,8,"headers"],[42,17,34,15],[42,19,34,17],[43,12,34,19,"Authorization"],[43,25,34,32],[43,27,34,34],[43,37,34,44,"storedToken"],[43,48,34,55],[44,10,34,58],[45,8,35,6],[45,9,35,7],[45,10,35,8],[46,8,36,6],[46,14,36,12,"data"],[46,18,36,16],[46,21,36,19],[46,27,36,25,"me"],[46,29,36,27],[46,30,36,28,"json"],[46,34,36,32],[46,35,36,33],[46,36,36,34],[47,8,37,6],[48,8,38,6],[48,14,38,12,"user"],[48,18,38,16],[48,21,38,16,"Object"],[48,27,38,16],[48,28,38,16,"assign"],[48,34,38,16],[48,39,38,24,"data"],[48,43,38,28],[49,10,38,30,"id"],[49,12,38,32],[49,14,38,34,"data"],[49,18,38,38],[49,19,38,39,"userId"],[50,8,38,45],[50,10,38,47],[51,8,39,6,"setUser"],[51,15,39,13],[51,16,39,14,"user"],[51,20,39,18],[51,21,39,19],[52,6,40,4],[53,6,42,4,"setLoading"],[53,16,42,14],[53,17,42,15],[53,22,42,20],[53,23,42,21],[54,4,43,2],[55,4,45,2],[55,8,45,2,"useEffect"],[55,14,45,11],[55,15,45,11,"useEffect"],[55,24,45,11],[55,26,45,12],[55,32,45,18],[56,6,46,4,"loadSession"],[56,17,46,15],[56,18,46,16],[56,19,46,17],[57,4,47,2],[57,5,47,3],[57,7,47,5],[57,9,47,7],[57,10,47,8],[58,4,49,2],[58,19,49,17,"login"],[58,24,49,22,"login"],[58,25,49,23,"email"],[58,30,49,36],[58,32,49,38,"password"],[58,40,49,54],[58,42,49,56],[59,6,50,4],[59,12,50,10,"res"],[59,15,50,13],[59,18,50,16],[59,24,50,22,"fetch"],[59,29,50,27],[59,30,50,28],[59,33,50,31,"API_URL"],[59,40,50,38],[59,41,50,38,"API_URL"],[59,48,50,38],[59,61,50,51],[59,63,50,53],[60,8,51,6,"method"],[60,14,51,12],[60,16,51,14],[60,22,51,20],[61,8,52,6,"headers"],[61,15,52,13],[61,17,52,15],[62,10,52,17],[62,24,52,31],[62,26,52,33],[63,8,52,52],[63,9,52,53],[64,8,53,6,"body"],[64,12,53,10],[64,14,53,12,"JSON"],[64,18,53,16],[64,19,53,17,"stringify"],[64,28,53,26],[64,29,53,27],[65,10,53,29,"email"],[65,15,53,34],[66,10,53,36,"password"],[67,8,53,45],[67,9,53,46],[68,6,54,4],[68,7,54,5],[68,8,54,6],[69,6,56,4],[69,10,56,8],[69,11,56,9,"res"],[69,14,56,12],[69,15,56,13,"ok"],[69,17,56,15],[69,19,56,17],[69,26,56,24],[69,31,56,29],[70,6,58,4],[70,12,58,10,"data"],[70,16,58,14],[70,19,58,17],[70,25,58,23,"res"],[70,28,58,26],[70,29,58,27,"json"],[70,33,58,31],[70,34,58,32],[70,35,58,33],[71,6,59,4],[71,12,59,10,"AsyncStorage"],[71,24,59,22],[71,25,59,22,"default"],[71,32,59,22],[71,33,59,23,"setItem"],[71,40,59,30],[71,41,59,31],[71,48,59,38],[71,50,59,40,"data"],[71,54,59,44],[71,55,59,45,"token"],[71,60,59,50],[71,61,59,51],[72,6,60,4,"setToken"],[72,14,60,12],[72,15,60,13,"data"],[72,19,60,17],[72,20,60,18,"token"],[72,25,60,23],[72,26,60,24],[73,6,62,4],[73,12,62,10,"me"],[73,14,62,12],[73,17,62,15],[73,23,62,21,"fetch"],[73,28,62,26],[73,29,62,27],[73,32,62,30,"API_URL"],[73,39,62,37],[73,40,62,37,"API_URL"],[73,47,62,37],[73,57,62,47],[73,59,62,49],[74,8,63,6,"headers"],[74,15,63,13],[74,17,63,15],[75,10,63,17,"Authorization"],[75,23,63,30],[75,25,63,32],[75,35,63,42,"data"],[75,39,63,46],[75,40,63,47,"token"],[75,45,63,52],[76,8,63,55],[77,6,64,4],[77,7,64,5],[77,8,64,6],[78,6,65,4],[78,12,65,10,"userData"],[78,20,65,18],[78,23,65,21],[78,29,65,27,"me"],[78,31,65,29],[78,32,65,30,"json"],[78,36,65,34],[78,37,65,35],[78,38,65,36],[80,6,67,4],[81,6,68,4],[81,12,68,10,"user"],[81,16,68,14],[81,19,68,14,"Object"],[81,25,68,14],[81,26,68,14,"assign"],[81,32,68,14],[81,37,68,22,"userData"],[81,45,68,30],[82,8,68,32,"id"],[82,10,68,34],[82,12,68,36,"userData"],[82,20,68,44],[82,21,68,45,"userId"],[83,6,68,51],[83,8,68,53],[84,6,69,4,"setUser"],[84,13,69,11],[84,14,69,12,"user"],[84,18,69,16],[84,19,69,17],[85,6,70,4],[85,13,70,11],[85,17,70,15],[86,4,71,2],[87,4,73,2],[87,19,73,17,"signUp"],[87,25,73,23,"signUp"],[87,26,73,24,"email"],[87,31,73,37],[87,33,73,39,"password"],[87,41,73,55],[87,43,73,57,"role"],[87,47,73,69],[87,49,73,71],[88,6,74,4],[88,12,74,10,"res"],[88,15,74,13],[88,18,74,16],[88,24,74,22,"fetch"],[88,29,74,27],[88,30,74,28],[88,33,74,31,"API_URL"],[88,40,74,38],[88,41,74,38,"API_URL"],[88,48,74,38],[88,62,74,52],[88,64,74,54],[89,8,75,6,"method"],[89,14,75,12],[89,16,75,14],[89,22,75,20],[90,8,76,6,"headers"],[90,15,76,13],[90,17,76,15],[91,10,76,17],[91,24,76,31],[91,26,76,33],[92,8,76,52],[92,9,76,53],[93,8,77,6,"body"],[93,12,77,10],[93,14,77,12,"JSON"],[93,18,77,16],[93,19,77,17,"stringify"],[93,28,77,26],[93,29,77,27],[94,10,77,29,"email"],[94,15,77,34],[95,10,77,36,"password"],[95,18,77,44],[96,10,77,46,"role"],[97,8,77,51],[97,9,77,52],[98,6,78,4],[98,7,78,5],[98,8,78,6],[99,6,80,4],[99,10,80,8],[99,11,80,9,"res"],[99,14,80,12],[99,15,80,13,"ok"],[99,17,80,15],[99,19,80,17],[100,8,81,6],[100,14,81,12,"error"],[100,19,81,17],[100,22,81,20],[100,28,81,26,"res"],[100,31,81,29],[100,32,81,30,"json"],[100,36,81,34],[100,37,81,35],[100,38,81,36],[101,8,82,6],[101,14,82,12],[101,18,82,16,"Error"],[101,23,82,21],[101,24,82,22,"error"],[101,29,82,27],[101,30,82,28,"detail"],[101,36,82,34],[101,40,82,38],[101,70,82,68],[101,71,82,69],[102,6,83,4],[103,6,85,4],[103,12,85,10,"data"],[103,16,85,14],[103,19,85,17],[103,25,85,23,"res"],[103,28,85,26],[103,29,85,27,"json"],[103,33,85,31],[103,34,85,32],[103,35,85,33],[104,6,86,4],[104,12,86,10,"AsyncStorage"],[104,24,86,22],[104,25,86,22,"default"],[104,32,86,22],[104,33,86,23,"setItem"],[104,40,86,30],[104,41,86,31],[104,48,86,38],[104,50,86,40,"data"],[104,54,86,44],[104,55,86,45,"token"],[104,60,86,50],[104,61,86,51],[105,6,87,4,"setToken"],[105,14,87,12],[105,15,87,13,"data"],[105,19,87,17],[105,20,87,18,"token"],[105,25,87,23],[105,26,87,24],[106,6,89,4],[106,12,89,10,"me"],[106,14,89,12],[106,17,89,15],[106,23,89,21,"fetch"],[106,28,89,26],[106,29,89,27],[106,32,89,30,"API_URL"],[106,39,89,37],[106,40,89,37,"API_URL"],[106,47,89,37],[106,57,89,47],[106,59,89,49],[107,8,90,6,"headers"],[107,15,90,13],[107,17,90,15],[108,10,90,17,"Authorization"],[108,23,90,30],[108,25,90,32],[108,35,90,42,"data"],[108,39,90,46],[108,40,90,47,"token"],[108,45,90,52],[109,8,90,55],[110,6,91,4],[110,7,91,5],[110,8,91,6],[111,6,92,4],[111,12,92,10,"userData"],[111,20,92,18],[111,23,92,21],[111,29,92,27,"me"],[111,31,92,29],[111,32,92,30,"json"],[111,36,92,34],[111,37,92,35],[111,38,92,36],[113,6,94,4],[114,6,95,4],[114,12,95,10,"user"],[114,16,95,14],[114,19,95,14,"Object"],[114,25,95,14],[114,26,95,14,"assign"],[114,32,95,14],[114,37,95,22,"userData"],[114,45,95,30],[115,8,95,32,"id"],[115,10,95,34],[115,12,95,36,"userData"],[115,20,95,44],[115,21,95,45,"userId"],[116,6,95,51],[116,8,95,53],[117,6,96,4,"setUser"],[117,13,96,11],[117,14,96,12,"user"],[117,18,96,16],[117,19,96,17],[118,6,97,4],[118,13,97,11],[118,17,97,15],[119,4,98,2],[120,4,100,2],[120,19,100,17,"signOut"],[120,26,100,24,"signOut"],[120,27,100,24],[120,29,100,27],[121,6,101,4],[121,12,101,10,"AsyncStorage"],[121,24,101,22],[121,25,101,22,"default"],[121,32,101,22],[121,33,101,23,"removeItem"],[121,43,101,33],[121,44,101,34],[121,51,101,41],[121,52,101,42],[122,6,102,4,"setUser"],[122,13,102,11],[122,14,102,12],[122,18,102,16],[122,19,102,17],[123,6,103,4,"setToken"],[123,14,103,12],[123,15,103,13],[123,19,103,17],[123,20,103,18],[124,4,104,2],[125,4,106,2],[125,24,107,4],[125,28,107,4,"_reactJsxDevRuntime"],[125,47,107,4],[125,48,107,4,"jsxDEV"],[125,54,107,4],[125,56,107,5,"AuthContext"],[125,67,107,16],[125,68,107,17,"Provider"],[125,76,107,25],[126,6,107,26,"value"],[126,11,107,31],[126,13,107,33],[127,8,107,35,"user"],[127,12,107,39],[128,8,107,41,"token"],[128,13,107,46],[129,8,107,48,"loading"],[129,15,107,55],[130,8,107,57,"login"],[130,13,107,62],[131,8,107,64,"signUp"],[131,14,107,70],[132,8,107,72,"signOut"],[133,6,107,80],[133,7,107,82],[134,6,107,82,"children"],[134,14,107,82],[134,16,108,7,"children"],[135,4,108,15],[136,6,108,15,"fileName"],[136,14,108,15],[136,16,108,15,"_jsxFileName"],[136,28,108,15],[137,6,108,15,"lineNumber"],[137,16,108,15],[138,6,108,15,"columnNumber"],[138,18,108,15],[139,4,108,15],[139,11,109,26],[139,12,109,27],[140,2,111,0],[141,2,111,1,"_s"],[141,4,111,1],[141,5,23,16,"AuthProvider"],[141,17,23,28],[142,2,23,28,"_c"],[142,4,23,28],[142,7,23,16,"AuthProvider"],[142,19,23,28],[143,2,113,7],[143,11,113,16,"useAuth"],[143,18,113,23,"useAuth"],[143,19,113,23],[143,21,113,26],[144,4,113,26,"_s2"],[144,7,113,26],[145,4,114,2],[145,11,114,9],[145,15,114,9,"useContext"],[145,21,114,19],[145,22,114,19,"useContext"],[145,32,114,19],[145,34,114,20,"AuthContext"],[145,45,114,31],[145,46,114,32],[146,2,115,0],[147,2,115,1,"_s2"],[147,5,115,1],[147,6,113,16,"useAuth"],[147,13,113,23],[148,2,113,23],[148,6,113,23,"_c"],[148,8,113,23],[149,2,113,23,"$RefreshReg$"],[149,14,113,23],[149,15,113,23,"_c"],[149,17,113,23],[150,0,113,23],[150,3]],"functionMap":{"names":["<global>","createContext$argument_0.login","createContext$argument_0.signUp","createContext$argument_0.signOut","AuthProvider","loadSession","useEffect$argument_0","login","signUp","signOut","useAuth"],"mappings":"AAA;SCiB,iBD;UEC,iBF;WGC,cH;OIG;ECK;GDe;YEE;GFE;EGE;GHsB;EIE;GJyB;EKE;GLI;CJO;OUE;CVE"},"hasCjsExports":false},"type":"js/module"}]}