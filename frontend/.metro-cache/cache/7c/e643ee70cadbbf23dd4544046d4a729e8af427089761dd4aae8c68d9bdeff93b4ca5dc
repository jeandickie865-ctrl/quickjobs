{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../config","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":149},"end":{"line":3,"column":36,"index":185}}],"key":"pHqFJJBAh3HI9ZCkK8fFRwPv3x0=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _config = require(_dependencyMap[2], \"../config\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)({\n    user: null,\n    token: null,\n    loading: true,\n    login: async () => false,\n    logout: async () => {}\n  });\n  function AuthProvider({\n    children\n  }) {\n    _s();\n    const [token, setToken] = (0, _react.useState)(null);\n    const [user, setUser] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    async function loadSession() {\n      const storedToken = await AsyncStorage.default.getItem(\"token\");\n      if (storedToken) {\n        setToken(storedToken);\n        const me = await fetch(`${_config.API_URL}/auth/me`, {\n          headers: {\n            Authorization: `Bearer ${storedToken}`\n          }\n        });\n        const data = await me.json();\n        // Backend gibt userId zurück, aber Frontend erwartet id\n        const user = Object.assign({}, data, {\n          id: data.userId\n        });\n        setUser(user);\n      }\n      setLoading(false);\n    }\n    (0, _react.useEffect)(() => {\n      loadSession();\n    }, []);\n    async function login(email, password) {\n      const res = await fetch(`${_config.API_URL}/auth/login`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          email,\n          password\n        })\n      });\n      if (!res.ok) return false;\n      const data = await res.json();\n      await AsyncStorage.default.setItem(\"token\", data.token);\n      setToken(data.token);\n      const me = await fetch(`${_config.API_URL}/auth/me`, {\n        headers: {\n          Authorization: `Bearer ${data.token}`\n        }\n      });\n      const userData = await me.json();\n\n      // Backend gibt userId zurück, aber Frontend erwartet id\n      const user = Object.assign({}, userData, {\n        id: userData.userId\n      });\n      setUser(user);\n      return true;\n    }\n    async function logout() {\n      await AsyncStorage.default.removeItem(\"token\");\n      setUser(null);\n      setToken(null);\n    }\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        loading,\n        login,\n        logout\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 5\n    }, this);\n  }\n  _s(AuthProvider, \"BJLYEWtx1XAvvNbKDl/BNSvb+Nw=\");\n  _c = AuthProvider;\n  function useAuth() {\n    _s2();\n    return (0, _react.useContext)(AuthContext);\n  }\n  _s2(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":115,"map":[[15,2,21,0,"exports"],[15,9,21,0],[15,10,21,0,"AuthProvider"],[15,22,21,0],[15,25,21,0,"AuthProvider"],[15,37,21,0],[16,2,84,0,"exports"],[16,9,84,0],[16,10,84,0,"useAuth"],[16,17,84,0],[16,20,84,0,"useAuth"],[16,27,84,0],[17,2,1,0],[17,6,1,0,"_react"],[17,12,1,0],[17,15,1,0,"require"],[17,22,1,0],[17,23,1,0,"_dependencyMap"],[17,37,1,0],[18,2,2,0],[18,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[18,42,2,0],[18,45,2,0,"require"],[18,52,2,0],[18,53,2,0,"_dependencyMap"],[18,67,2,0],[19,2,2,0],[19,6,2,0,"AsyncStorage"],[19,18,2,0],[19,21,2,0,"_interopDefault"],[19,36,2,0],[19,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[19,73,2,0],[20,2,3,0],[20,6,3,0,"_config"],[20,13,3,0],[20,16,3,0,"require"],[20,23,3,0],[20,24,3,0,"_dependencyMap"],[20,38,3,0],[21,2,3,36],[21,6,3,36,"_reactJsxDevRuntime"],[21,25,3,36],[21,28,3,36,"require"],[21,35,3,36],[21,36,3,36,"_dependencyMap"],[21,50,3,36],[22,2,13,0],[22,8,13,6,"AuthContext"],[22,19,13,17],[22,35,13,20],[22,39,13,20,"createContext"],[22,45,13,33],[22,46,13,33,"createContext"],[22,59,13,33],[22,61,13,52],[23,4,14,2,"user"],[23,8,14,6],[23,10,14,8],[23,14,14,12],[24,4,15,2,"token"],[24,9,15,7],[24,11,15,9],[24,15,15,13],[25,4,16,2,"loading"],[25,11,16,9],[25,13,16,11],[25,17,16,15],[26,4,17,2,"login"],[26,9,17,7],[26,11,17,9],[26,17,17,9,"login"],[26,18,17,9],[26,23,17,21],[26,28,17,26],[27,4,18,2,"logout"],[27,10,18,8],[27,12,18,10],[27,18,18,10,"logout"],[27,19,18,10],[27,24,18,22],[27,25,18,23],[28,2,19,0],[28,3,19,1],[28,4,19,2],[29,2,21,7],[29,11,21,16,"AuthProvider"],[29,23,21,28,"AuthProvider"],[29,24,21,29],[30,4,21,31,"children"],[31,2,21,40],[31,3,21,41],[31,5,21,43],[32,4,21,43,"_s"],[32,6,21,43],[33,4,22,2],[33,10,22,8],[33,11,22,9,"token"],[33,16,22,14],[33,18,22,16,"setToken"],[33,26,22,24],[33,27,22,25],[33,30,22,28],[33,34,22,28,"useState"],[33,40,22,36],[33,41,22,36,"useState"],[33,49,22,36],[33,51,22,52],[33,55,22,56],[33,56,22,57],[34,4,23,2],[34,10,23,8],[34,11,23,9,"user"],[34,15,23,13],[34,17,23,15,"setUser"],[34,24,23,22],[34,25,23,23],[34,28,23,26],[34,32,23,26,"useState"],[34,38,23,34],[34,39,23,34,"useState"],[34,47,23,34],[34,49,23,40],[34,53,23,44],[34,54,23,45],[35,4,24,2],[35,10,24,8],[35,11,24,9,"loading"],[35,18,24,16],[35,20,24,18,"setLoading"],[35,30,24,28],[35,31,24,29],[35,34,24,32],[35,38,24,32,"useState"],[35,44,24,40],[35,45,24,40,"useState"],[35,53,24,40],[35,55,24,41],[35,59,24,45],[35,60,24,46],[36,4,26,2],[36,19,26,17,"loadSession"],[36,30,26,28,"loadSession"],[36,31,26,28],[36,33,26,31],[37,6,27,4],[37,12,27,10,"storedToken"],[37,23,27,21],[37,26,27,24],[37,32,27,30,"AsyncStorage"],[37,44,27,42],[37,45,27,42,"default"],[37,52,27,42],[37,53,27,43,"getItem"],[37,60,27,50],[37,61,27,51],[37,68,27,58],[37,69,27,59],[38,6,29,4],[38,10,29,8,"storedToken"],[38,21,29,19],[38,23,29,21],[39,8,30,6,"setToken"],[39,16,30,14],[39,17,30,15,"storedToken"],[39,28,30,26],[39,29,30,27],[40,8,31,6],[40,14,31,12,"me"],[40,16,31,14],[40,19,31,17],[40,25,31,23,"fetch"],[40,30,31,28],[40,31,31,29],[40,34,31,32,"API_URL"],[40,41,31,39],[40,42,31,39,"API_URL"],[40,49,31,39],[40,59,31,49],[40,61,31,51],[41,10,32,8,"headers"],[41,17,32,15],[41,19,32,17],[42,12,32,19,"Authorization"],[42,25,32,32],[42,27,32,34],[42,37,32,44,"storedToken"],[42,48,32,55],[43,10,32,58],[44,8,33,6],[44,9,33,7],[44,10,33,8],[45,8,34,6],[45,14,34,12,"data"],[45,18,34,16],[45,21,34,19],[45,27,34,25,"me"],[45,29,34,27],[45,30,34,28,"json"],[45,34,34,32],[45,35,34,33],[45,36,34,34],[46,8,35,6],[47,8,36,6],[47,14,36,12,"user"],[47,18,36,16],[47,21,36,16,"Object"],[47,27,36,16],[47,28,36,16,"assign"],[47,34,36,16],[47,39,36,24,"data"],[47,43,36,28],[48,10,36,30,"id"],[48,12,36,32],[48,14,36,34,"data"],[48,18,36,38],[48,19,36,39,"userId"],[49,8,36,45],[49,10,36,47],[50,8,37,6,"setUser"],[50,15,37,13],[50,16,37,14,"user"],[50,20,37,18],[50,21,37,19],[51,6,38,4],[52,6,40,4,"setLoading"],[52,16,40,14],[52,17,40,15],[52,22,40,20],[52,23,40,21],[53,4,41,2],[54,4,43,2],[54,8,43,2,"useEffect"],[54,14,43,11],[54,15,43,11,"useEffect"],[54,24,43,11],[54,26,43,12],[54,32,43,18],[55,6,44,4,"loadSession"],[55,17,44,15],[55,18,44,16],[55,19,44,17],[56,4,45,2],[56,5,45,3],[56,7,45,5],[56,9,45,7],[56,10,45,8],[57,4,47,2],[57,19,47,17,"login"],[57,24,47,22,"login"],[57,25,47,23,"email"],[57,30,47,36],[57,32,47,38,"password"],[57,40,47,54],[57,42,47,56],[58,6,48,4],[58,12,48,10,"res"],[58,15,48,13],[58,18,48,16],[58,24,48,22,"fetch"],[58,29,48,27],[58,30,48,28],[58,33,48,31,"API_URL"],[58,40,48,38],[58,41,48,38,"API_URL"],[58,48,48,38],[58,61,48,51],[58,63,48,53],[59,8,49,6,"method"],[59,14,49,12],[59,16,49,14],[59,22,49,20],[60,8,50,6,"headers"],[60,15,50,13],[60,17,50,15],[61,10,50,17],[61,24,50,31],[61,26,50,33],[62,8,50,52],[62,9,50,53],[63,8,51,6,"body"],[63,12,51,10],[63,14,51,12,"JSON"],[63,18,51,16],[63,19,51,17,"stringify"],[63,28,51,26],[63,29,51,27],[64,10,51,29,"email"],[64,15,51,34],[65,10,51,36,"password"],[66,8,51,45],[66,9,51,46],[67,6,52,4],[67,7,52,5],[67,8,52,6],[68,6,54,4],[68,10,54,8],[68,11,54,9,"res"],[68,14,54,12],[68,15,54,13,"ok"],[68,17,54,15],[68,19,54,17],[68,26,54,24],[68,31,54,29],[69,6,56,4],[69,12,56,10,"data"],[69,16,56,14],[69,19,56,17],[69,25,56,23,"res"],[69,28,56,26],[69,29,56,27,"json"],[69,33,56,31],[69,34,56,32],[69,35,56,33],[70,6,57,4],[70,12,57,10,"AsyncStorage"],[70,24,57,22],[70,25,57,22,"default"],[70,32,57,22],[70,33,57,23,"setItem"],[70,40,57,30],[70,41,57,31],[70,48,57,38],[70,50,57,40,"data"],[70,54,57,44],[70,55,57,45,"token"],[70,60,57,50],[70,61,57,51],[71,6,58,4,"setToken"],[71,14,58,12],[71,15,58,13,"data"],[71,19,58,17],[71,20,58,18,"token"],[71,25,58,23],[71,26,58,24],[72,6,60,4],[72,12,60,10,"me"],[72,14,60,12],[72,17,60,15],[72,23,60,21,"fetch"],[72,28,60,26],[72,29,60,27],[72,32,60,30,"API_URL"],[72,39,60,37],[72,40,60,37,"API_URL"],[72,47,60,37],[72,57,60,47],[72,59,60,49],[73,8,61,6,"headers"],[73,15,61,13],[73,17,61,15],[74,10,61,17,"Authorization"],[74,23,61,30],[74,25,61,32],[74,35,61,42,"data"],[74,39,61,46],[74,40,61,47,"token"],[74,45,61,52],[75,8,61,55],[76,6,62,4],[76,7,62,5],[76,8,62,6],[77,6,63,4],[77,12,63,10,"userData"],[77,20,63,18],[77,23,63,21],[77,29,63,27,"me"],[77,31,63,29],[77,32,63,30,"json"],[77,36,63,34],[77,37,63,35],[77,38,63,36],[79,6,65,4],[80,6,66,4],[80,12,66,10,"user"],[80,16,66,14],[80,19,66,14,"Object"],[80,25,66,14],[80,26,66,14,"assign"],[80,32,66,14],[80,37,66,22,"userData"],[80,45,66,30],[81,8,66,32,"id"],[81,10,66,34],[81,12,66,36,"userData"],[81,20,66,44],[81,21,66,45,"userId"],[82,6,66,51],[82,8,66,53],[83,6,67,4,"setUser"],[83,13,67,11],[83,14,67,12,"user"],[83,18,67,16],[83,19,67,17],[84,6,68,4],[84,13,68,11],[84,17,68,15],[85,4,69,2],[86,4,71,2],[86,19,71,17,"logout"],[86,25,71,23,"logout"],[86,26,71,23],[86,28,71,26],[87,6,72,4],[87,12,72,10,"AsyncStorage"],[87,24,72,22],[87,25,72,22,"default"],[87,32,72,22],[87,33,72,23,"removeItem"],[87,43,72,33],[87,44,72,34],[87,51,72,41],[87,52,72,42],[88,6,73,4,"setUser"],[88,13,73,11],[88,14,73,12],[88,18,73,16],[88,19,73,17],[89,6,74,4,"setToken"],[89,14,74,12],[89,15,74,13],[89,19,74,17],[89,20,74,18],[90,4,75,2],[91,4,77,2],[91,24,78,4],[91,28,78,4,"_reactJsxDevRuntime"],[91,47,78,4],[91,48,78,4,"jsxDEV"],[91,54,78,4],[91,56,78,5,"AuthContext"],[91,67,78,16],[91,68,78,17,"Provider"],[91,76,78,25],[92,6,78,26,"value"],[92,11,78,31],[92,13,78,33],[93,8,78,35,"user"],[93,12,78,39],[94,8,78,41,"token"],[94,13,78,46],[95,8,78,48,"loading"],[95,15,78,55],[96,8,78,57,"login"],[96,13,78,62],[97,8,78,64,"logout"],[98,6,78,71],[98,7,78,73],[99,6,78,73,"children"],[99,14,78,73],[99,16,79,7,"children"],[100,4,79,15],[101,6,79,15,"fileName"],[101,14,79,15],[101,16,79,15,"_jsxFileName"],[101,28,79,15],[102,6,79,15,"lineNumber"],[102,16,79,15],[103,6,79,15,"columnNumber"],[103,18,79,15],[104,4,79,15],[104,11,80,26],[104,12,80,27],[105,2,82,0],[106,2,82,1,"_s"],[106,4,82,1],[106,5,21,16,"AuthProvider"],[106,17,21,28],[107,2,21,28,"_c"],[107,4,21,28],[107,7,21,16,"AuthProvider"],[107,19,21,28],[108,2,84,7],[108,11,84,16,"useAuth"],[108,18,84,23,"useAuth"],[108,19,84,23],[108,21,84,26],[109,4,84,26,"_s2"],[109,7,84,26],[110,4,85,2],[110,11,85,9],[110,15,85,9,"useContext"],[110,21,85,19],[110,22,85,19,"useContext"],[110,32,85,19],[110,34,85,20,"AuthContext"],[110,45,85,31],[110,46,85,32],[111,2,86,0],[112,2,86,1,"_s2"],[112,5,86,1],[112,6,84,16,"useAuth"],[112,13,84,23],[113,2,84,23],[113,6,84,23,"_c"],[113,8,84,23],[114,2,84,23,"$RefreshReg$"],[114,14,84,23],[114,15,84,23,"_c"],[114,17,84,23],[115,0,84,23],[115,3]],"functionMap":{"names":["<global>","createContext$argument_0.login","createContext$argument_0.logout","AuthProvider","loadSession","useEffect$argument_0","login","logout","useAuth"],"mappings":"AAA;SCgB,iBD;UEC,cF;OGG;ECK;GDe;YEE;GFE;EGE;GHsB;EIE;GJI;CHO;OQE;CRE"},"hasCjsExports":false},"type":"js/module"}]}