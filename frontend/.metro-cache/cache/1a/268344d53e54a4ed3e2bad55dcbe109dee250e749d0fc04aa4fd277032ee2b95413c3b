{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":47,"column":43,"index":1950}}],"key":"7kvm5yrOpz4NYiDi6sn4qxa8DVQ="}},{"name":"@babel/runtime/helpers/objectWithoutPropertiesLoose","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":47,"column":43,"index":1950}}],"key":"AkVSdHsy9g0oRbtVtdfz2QwrA14="}},{"name":"react","data":{"asyncType":null,"locs":[{"start":{"line":3,"column":0,"index":50},"end":{"line":3,"column":65,"index":115}}],"key":"a4EMkKqamYWCMMPV7UeQlqGQ+ks="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  // Copyright Â© 2024 650 Industries.\n  'use client';\n\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.createPermissionHook = createPermissionHook;\n  var _objectWithoutPropertiesLoose2 = _interopRequireDefault(require(_dependencyMap[1], \"@babel/runtime/helpers/objectWithoutPropertiesLoose\"));\n  var _react = require(_dependencyMap[2], \"react\");\n  const _excluded = [\"get\", \"request\"];\n  /**\n   * Get or request permission for protected functionality within the app.\n   * It uses separate permission requesters to interact with a single permission.\n   * By default, the hook will only retrieve the permission status.\n   */\n  function usePermission(methods, options) {\n    const isMounted = (0, _react.useRef)(true);\n    const [status, setStatus] = (0, _react.useState)(null);\n    const _ref = options || {},\n      {\n        get = true,\n        request = false\n      } = _ref,\n      permissionOptions = (0, _objectWithoutPropertiesLoose2.default)(_ref, _excluded);\n    const getPermission = (0, _react.useCallback)(async () => {\n      const response = await methods.getMethod(Object.keys(permissionOptions).length > 0 ? permissionOptions : undefined);\n      if (isMounted.current) setStatus(response);\n      return response;\n    }, [methods.getMethod]);\n    const requestPermission = (0, _react.useCallback)(async () => {\n      const response = await methods.requestMethod(Object.keys(permissionOptions).length > 0 ? permissionOptions : undefined);\n      if (isMounted.current) setStatus(response);\n      return response;\n    }, [methods.requestMethod]);\n    (0, _react.useEffect)(function runMethods() {\n      if (request) requestPermission();\n      if (!request && get) getPermission();\n    }, [get, request, requestPermission, getPermission]);\n    // Workaround for unmounting components receiving state updates\n    (0, _react.useEffect)(function didMount() {\n      isMounted.current = true;\n      return () => {\n        isMounted.current = false;\n      };\n    }, []);\n    return [status, requestPermission, getPermission];\n  }\n  /**\n   * Create a new permission hook with the permission methods built-in.\n   * This can be used to quickly create specific permission hooks in every module.\n   */\n  function createPermissionHook(methods) {\n    return options => usePermission(methods, options);\n  }\n});","lineCount":57,"map":[[2,2,1,0],[3,2,2,0],[3,14,2,12],[5,2,2,13],[5,6,2,13,"_interopRequireDefault"],[5,28,2,13],[5,31,2,13,"require"],[5,38,2,13],[5,39,2,13,"_dependencyMap"],[5,53,2,13],[6,2,2,13,"Object"],[6,8,2,13],[6,9,2,13,"defineProperty"],[6,23,2,13],[6,24,2,13,"exports"],[6,31,2,13],[7,4,2,13,"value"],[7,9,2,13],[8,2,2,13],[9,2,2,13,"exports"],[9,9,2,13],[9,10,2,13,"createPermissionHook"],[9,30,2,13],[9,33,2,13,"createPermissionHook"],[9,53,2,13],[10,2,2,13],[10,6,2,13,"_objectWithoutPropertiesLoose2"],[10,36,2,13],[10,39,2,13,"_interopRequireDefault"],[10,61,2,13],[10,62,2,13,"require"],[10,69,2,13],[10,70,2,13,"_dependencyMap"],[10,84,2,13],[11,2,3,0],[11,6,3,0,"_react"],[11,12,3,0],[11,15,3,0,"require"],[11,22,3,0],[11,23,3,0,"_dependencyMap"],[11,37,3,0],[12,2,3,65],[12,8,3,65,"_excluded"],[12,17,3,65],[13,2,4,0],[14,0,5,0],[15,0,6,0],[16,0,7,0],[17,0,8,0],[18,2,9,0],[18,11,9,9,"usePermission"],[18,24,9,22,"usePermission"],[18,25,9,23,"methods"],[18,32,9,30],[18,34,9,32,"options"],[18,41,9,39],[18,43,9,41],[19,4,10,4],[19,10,10,10,"isMounted"],[19,19,10,19],[19,22,10,22],[19,26,10,22,"useRef"],[19,39,10,28],[19,41,10,29],[19,45,10,33],[19,46,10,34],[20,4,11,4],[20,10,11,10],[20,11,11,11,"status"],[20,17,11,17],[20,19,11,19,"setStatus"],[20,28,11,28],[20,29,11,29],[20,32,11,32],[20,36,11,32,"useState"],[20,51,11,40],[20,53,11,41],[20,57,11,45],[20,58,11,46],[21,4,12,4],[21,10,12,4,"_ref"],[21,14,12,4],[21,17,12,66,"options"],[21,24,12,73],[21,28,12,77],[21,29,12,78],[21,30,12,79],[22,6,12,10],[23,8,12,12,"get"],[23,11,12,15],[23,14,12,18],[23,18,12,22],[24,8,12,24,"request"],[24,15,12,31],[24,18,12,34],[25,6,12,62],[25,7,12,63],[25,10,12,63,"_ref"],[25,14,12,63],[26,6,12,44,"permissionOptions"],[26,23,12,61],[26,30,12,61,"_objectWithoutPropertiesLoose2"],[26,60,12,61],[26,61,12,61,"default"],[26,68,12,61],[26,70,12,61,"_ref"],[26,74,12,61],[26,76,12,61,"_excluded"],[26,85,12,61],[27,4,13,4],[27,10,13,10,"getPermission"],[27,23,13,23],[27,26,13,26],[27,30,13,26,"useCallback"],[27,48,13,37],[27,50,13,38],[27,62,13,50],[28,6,14,8],[28,12,14,14,"response"],[28,20,14,22],[28,23,14,25],[28,29,14,31,"methods"],[28,36,14,38],[28,37,14,39,"getMethod"],[28,46,14,48],[28,47,14,49,"Object"],[28,53,14,55],[28,54,14,56,"keys"],[28,58,14,60],[28,59,14,61,"permissionOptions"],[28,76,14,78],[28,77,14,79],[28,78,14,80,"length"],[28,84,14,86],[28,87,14,89],[28,88,14,90],[28,91,14,93,"permissionOptions"],[28,108,14,110],[28,111,14,113,"undefined"],[28,120,14,122],[28,121,14,123],[29,6,15,8],[29,10,15,12,"isMounted"],[29,19,15,21],[29,20,15,22,"current"],[29,27,15,29],[29,29,16,12,"setStatus"],[29,38,16,21],[29,39,16,22,"response"],[29,47,16,30],[29,48,16,31],[30,6,17,8],[30,13,17,15,"response"],[30,21,17,23],[31,4,18,4],[31,5,18,5],[31,7,18,7],[31,8,18,8,"methods"],[31,15,18,15],[31,16,18,16,"getMethod"],[31,25,18,25],[31,26,18,26],[31,27,18,27],[32,4,19,4],[32,10,19,10,"requestPermission"],[32,27,19,27],[32,30,19,30],[32,34,19,30,"useCallback"],[32,52,19,41],[32,54,19,42],[32,66,19,54],[33,6,20,8],[33,12,20,14,"response"],[33,20,20,22],[33,23,20,25],[33,29,20,31,"methods"],[33,36,20,38],[33,37,20,39,"requestMethod"],[33,50,20,52],[33,51,20,53,"Object"],[33,57,20,59],[33,58,20,60,"keys"],[33,62,20,64],[33,63,20,65,"permissionOptions"],[33,80,20,82],[33,81,20,83],[33,82,20,84,"length"],[33,88,20,90],[33,91,20,93],[33,92,20,94],[33,95,20,97,"permissionOptions"],[33,112,20,114],[33,115,20,117,"undefined"],[33,124,20,126],[33,125,20,127],[34,6,21,8],[34,10,21,12,"isMounted"],[34,19,21,21],[34,20,21,22,"current"],[34,27,21,29],[34,29,22,12,"setStatus"],[34,38,22,21],[34,39,22,22,"response"],[34,47,22,30],[34,48,22,31],[35,6,23,8],[35,13,23,15,"response"],[35,21,23,23],[36,4,24,4],[36,5,24,5],[36,7,24,7],[36,8,24,8,"methods"],[36,15,24,15],[36,16,24,16,"requestMethod"],[36,29,24,29],[36,30,24,30],[36,31,24,31],[37,4,25,4],[37,8,25,4,"useEffect"],[37,24,25,13],[37,26,25,14],[37,35,25,23,"runMethods"],[37,45,25,33,"runMethods"],[37,46,25,33],[37,48,25,36],[38,6,26,8],[38,10,26,12,"request"],[38,17,26,19],[38,19,27,12,"requestPermission"],[38,36,27,29],[38,37,27,30],[38,38,27,31],[39,6,28,8],[39,10,28,12],[39,11,28,13,"request"],[39,18,28,20],[39,22,28,24,"get"],[39,25,28,27],[39,27,29,12,"getPermission"],[39,40,29,25],[39,41,29,26],[39,42,29,27],[40,4,30,4],[40,5,30,5],[40,7,30,7],[40,8,30,8,"get"],[40,11,30,11],[40,13,30,13,"request"],[40,20,30,20],[40,22,30,22,"requestPermission"],[40,39,30,39],[40,41,30,41,"getPermission"],[40,54,30,54],[40,55,30,55],[40,56,30,56],[41,4,31,4],[42,4,32,4],[42,8,32,4,"useEffect"],[42,24,32,13],[42,26,32,14],[42,35,32,23,"didMount"],[42,43,32,31,"didMount"],[42,44,32,31],[42,46,32,34],[43,6,33,8,"isMounted"],[43,15,33,17],[43,16,33,18,"current"],[43,23,33,25],[43,26,33,28],[43,30,33,32],[44,6,34,8],[44,13,34,15],[44,19,34,21],[45,8,35,12,"isMounted"],[45,17,35,21],[45,18,35,22,"current"],[45,25,35,29],[45,28,35,32],[45,33,35,37],[46,6,36,8],[46,7,36,9],[47,4,37,4],[47,5,37,5],[47,7,37,7],[47,9,37,9],[47,10,37,10],[48,4,38,4],[48,11,38,11],[48,12,38,12,"status"],[48,18,38,18],[48,20,38,20,"requestPermission"],[48,37,38,37],[48,39,38,39,"getPermission"],[48,52,38,52],[48,53,38,53],[49,2,39,0],[50,2,40,0],[51,0,41,0],[52,0,42,0],[53,0,43,0],[54,2,44,7],[54,11,44,16,"createPermissionHook"],[54,31,44,36,"createPermissionHook"],[54,32,44,37,"methods"],[54,39,44,44],[54,41,44,46],[55,4,45,4],[55,11,45,12,"options"],[55,18,45,19],[55,22,45,24,"usePermission"],[55,35,45,37],[55,36,45,38,"methods"],[55,43,45,45],[55,45,45,47,"options"],[55,52,45,54],[55,53,45,55],[56,2,46,0],[57,0,46,1]],"functionMap":{"names":["<global>","usePermission","getPermission","requestPermission","runMethods","didMount","<anonymous>","createPermissionHook"],"mappings":"AAA;ACQ;sCCI;KDK;0CEC;KFK;cGC;KHK;cIE;eCE;SDE;KJC;CDE;OOK;WDC,4CC;CPC"}},"type":"js/module"}]}