{"dependencies":[{"name":"./api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":111},"end":{"line":3,"column":60,"index":171}}],"key":"FbKPDeRJ9TF3vg1eKYKz12urgic=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.getWorkerProfile = getWorkerProfile;\n  exports.saveWorkerProfile = saveWorkerProfile;\n  var _api = require(_dependencyMap[0], \"./api\");\n  // utils/profileStore.ts - Worker Profile Store (REFACTORED)\n\n  // ===== GET WORKER PROFILE =====\n  async function getWorkerProfile(userId) {\n    console.log('üîç getWorkerProfile: Loading profile for user', userId);\n    try {\n      const headers = await (0, _api.getAuthHeaders)();\n      const response = await fetch(`${_api.API_BASE}/profiles/worker/${userId}`, {\n        method: 'GET',\n        headers\n      });\n      if (response.status === 404) {\n        console.log('‚ö†Ô∏è getWorkerProfile: Profile not found (404)');\n        return null;\n      }\n      if (!response.ok) {\n        const error = await response.text();\n        console.error('‚ùå getWorkerProfile: API error', response.status, error);\n        throw new Error(`Failed to fetch profile: ${response.status}`);\n      }\n      const profile = await response.json();\n      console.log('‚úÖ getWorkerProfile: Profile loaded', {\n        userId: profile.userId,\n        categories: profile.categories?.length || 0,\n        tags: profile.selectedTags?.length || 0\n      });\n      return profile;\n    } catch (error) {\n      console.error('‚ùå getWorkerProfile: Error', error);\n      throw error;\n    }\n  }\n\n  // ===== SAVE WORKER PROFILE =====\n  async function saveWorkerProfile(userId, profileData) {\n    console.log('üíæ saveWorkerProfile: Saving profile for', userId);\n    console.log('üíæ saveWorkerProfile: Data:', profileData);\n    try {\n      const headers = await (0, _api.getAuthHeaders)();\n\n      // Try PUT first (update existing)\n      let response = await fetch(`${_api.API_BASE}/profiles/worker/${userId}`, {\n        method: 'PUT',\n        headers,\n        body: JSON.stringify(profileData)\n      });\n      console.log('üì• saveWorkerProfile: PUT response status:', response.status);\n\n      // If 404, profile doesn't exist - create with POST\n      if (response.status === 404) {\n        console.log('‚ö†Ô∏è saveWorkerProfile: Profile not found, creating new via POST');\n        response = await fetch(`${_api.API_BASE}/profiles/worker`, {\n          method: 'POST',\n          headers,\n          body: JSON.stringify(profileData)\n        });\n        console.log('üì• saveWorkerProfile: POST response status:', response.status);\n      }\n      if (!response.ok) {\n        const errorText = await response.text();\n        console.error('‚ùå saveWorkerProfile: Backend error:', errorText);\n        throw new Error(`Server Error ${response.status}: ${errorText}`);\n      }\n      const result = await response.json();\n      console.log('‚úÖ saveWorkerProfile: Profile saved successfully', result);\n    } catch (error) {\n      console.error('‚ùå saveWorkerProfile: Exception:', error.message);\n      throw error;\n    }\n  }\n});","lineCount":80,"map":[[7,2,6,0,"exports"],[7,9,6,0],[7,10,6,0,"getWorkerProfile"],[7,26,6,0],[7,29,6,0,"getWorkerProfile"],[7,45,6,0],[8,2,43,0,"exports"],[8,9,43,0],[8,10,43,0,"saveWorkerProfile"],[8,27,43,0],[8,30,43,0,"saveWorkerProfile"],[8,47,43,0],[9,2,3,0],[9,6,3,0,"_api"],[9,10,3,0],[9,13,3,0,"require"],[9,20,3,0],[9,21,3,0,"_dependencyMap"],[9,35,3,0],[10,2,1,0],[12,2,5,0],[13,2,6,7],[13,17,6,22,"getWorkerProfile"],[13,33,6,38,"getWorkerProfile"],[13,34,6,39,"userId"],[13,40,6,53],[13,42,6,86],[14,4,7,2,"console"],[14,11,7,9],[14,12,7,10,"log"],[14,15,7,13],[14,16,7,14],[14,63,7,61],[14,65,7,63,"userId"],[14,71,7,69],[14,72,7,70],[15,4,9,2],[15,8,9,6],[16,6,10,4],[16,12,10,10,"headers"],[16,19,10,17],[16,22,10,20],[16,28,10,26],[16,32,10,26,"getAuthHeaders"],[16,36,10,40],[16,37,10,40,"getAuthHeaders"],[16,51,10,40],[16,53,10,41],[16,54,10,42],[17,6,12,4],[17,12,12,10,"response"],[17,20,12,18],[17,23,12,21],[17,29,12,27,"fetch"],[17,34,12,32],[17,35,12,33],[17,38,12,36,"API_BASE"],[17,42,12,44],[17,43,12,44,"API_BASE"],[17,51,12,44],[17,71,12,64,"userId"],[17,77,12,70],[17,79,12,72],[17,81,12,74],[18,8,13,6,"method"],[18,14,13,12],[18,16,13,14],[18,21,13,19],[19,8,14,6,"headers"],[20,6,15,4],[20,7,15,5],[20,8,15,6],[21,6,17,4],[21,10,17,8,"response"],[21,18,17,16],[21,19,17,17,"status"],[21,25,17,23],[21,30,17,28],[21,33,17,31],[21,35,17,33],[22,8,18,6,"console"],[22,15,18,13],[22,16,18,14,"log"],[22,19,18,17],[22,20,18,18],[22,66,18,64],[22,67,18,65],[23,8,19,6],[23,15,19,13],[23,19,19,17],[24,6,20,4],[25,6,22,4],[25,10,22,8],[25,11,22,9,"response"],[25,19,22,17],[25,20,22,18,"ok"],[25,22,22,20],[25,24,22,22],[26,8,23,6],[26,14,23,12,"error"],[26,19,23,17],[26,22,23,20],[26,28,23,26,"response"],[26,36,23,34],[26,37,23,35,"text"],[26,41,23,39],[26,42,23,40],[26,43,23,41],[27,8,24,6,"console"],[27,15,24,13],[27,16,24,14,"error"],[27,21,24,19],[27,22,24,20],[27,53,24,51],[27,55,24,53,"response"],[27,63,24,61],[27,64,24,62,"status"],[27,70,24,68],[27,72,24,70,"error"],[27,77,24,75],[27,78,24,76],[28,8,25,6],[28,14,25,12],[28,18,25,16,"Error"],[28,23,25,21],[28,24,25,22],[28,52,25,50,"response"],[28,60,25,58],[28,61,25,59,"status"],[28,67,25,65],[28,69,25,67],[28,70,25,68],[29,6,26,4],[30,6,28,4],[30,12,28,10,"profile"],[30,19,28,17],[30,22,28,20],[30,28,28,26,"response"],[30,36,28,34],[30,37,28,35,"json"],[30,41,28,39],[30,42,28,40],[30,43,28,41],[31,6,29,4,"console"],[31,13,29,11],[31,14,29,12,"log"],[31,17,29,15],[31,18,29,16],[31,54,29,52],[31,56,29,54],[32,8,30,6,"userId"],[32,14,30,12],[32,16,30,14,"profile"],[32,23,30,21],[32,24,30,22,"userId"],[32,30,30,28],[33,8,31,6,"categories"],[33,18,31,16],[33,20,31,18,"profile"],[33,27,31,25],[33,28,31,26,"categories"],[33,38,31,36],[33,40,31,38,"length"],[33,46,31,44],[33,50,31,48],[33,51,31,49],[34,8,32,6,"tags"],[34,12,32,10],[34,14,32,12,"profile"],[34,21,32,19],[34,22,32,20,"selectedTags"],[34,34,32,32],[34,36,32,34,"length"],[34,42,32,40],[34,46,32,44],[35,6,33,4],[35,7,33,5],[35,8,33,6],[36,6,35,4],[36,13,35,11,"profile"],[36,20,35,18],[37,4,36,2],[37,5,36,3],[37,6,36,4],[37,13,36,11,"error"],[37,18,36,16],[37,20,36,18],[38,6,37,4,"console"],[38,13,37,11],[38,14,37,12,"error"],[38,19,37,17],[38,20,37,18],[38,47,37,45],[38,49,37,47,"error"],[38,54,37,52],[38,55,37,53],[39,6,38,4],[39,12,38,10,"error"],[39,17,38,15],[40,4,39,2],[41,2,40,0],[43,2,42,0],[44,2,43,7],[44,17,43,22,"saveWorkerProfile"],[44,34,43,39,"saveWorkerProfile"],[44,35,44,2,"userId"],[44,41,44,16],[44,43,45,2,"profileData"],[44,54,45,37],[44,56,46,17],[45,4,47,2,"console"],[45,11,47,9],[45,12,47,10,"log"],[45,15,47,13],[45,16,47,14],[45,58,47,56],[45,60,47,58,"userId"],[45,66,47,64],[45,67,47,65],[46,4,48,2,"console"],[46,11,48,9],[46,12,48,10,"log"],[46,15,48,13],[46,16,48,14],[46,45,48,43],[46,47,48,45,"profileData"],[46,58,48,56],[46,59,48,57],[47,4,50,2],[47,8,50,6],[48,6,51,4],[48,12,51,10,"headers"],[48,19,51,17],[48,22,51,20],[48,28,51,26],[48,32,51,26,"getAuthHeaders"],[48,36,51,40],[48,37,51,40,"getAuthHeaders"],[48,51,51,40],[48,53,51,41],[48,54,51,42],[50,6,53,4],[51,6,54,4],[51,10,54,8,"response"],[51,18,54,16],[51,21,54,19],[51,27,54,25,"fetch"],[51,32,54,30],[51,33,54,31],[51,36,54,34,"API_BASE"],[51,40,54,42],[51,41,54,42,"API_BASE"],[51,49,54,42],[51,69,54,62,"userId"],[51,75,54,68],[51,77,54,70],[51,79,54,72],[52,8,55,6,"method"],[52,14,55,12],[52,16,55,14],[52,21,55,19],[53,8,56,6,"headers"],[53,15,56,13],[54,8,57,6,"body"],[54,12,57,10],[54,14,57,12,"JSON"],[54,18,57,16],[54,19,57,17,"stringify"],[54,28,57,26],[54,29,57,27,"profileData"],[54,40,57,38],[55,6,58,4],[55,7,58,5],[55,8,58,6],[56,6,60,4,"console"],[56,13,60,11],[56,14,60,12,"log"],[56,17,60,15],[56,18,60,16],[56,62,60,60],[56,64,60,62,"response"],[56,72,60,70],[56,73,60,71,"status"],[56,79,60,77],[56,80,60,78],[58,6,62,4],[59,6,63,4],[59,10,63,8,"response"],[59,18,63,16],[59,19,63,17,"status"],[59,25,63,23],[59,30,63,28],[59,33,63,31],[59,35,63,33],[60,8,64,6,"console"],[60,15,64,13],[60,16,64,14,"log"],[60,19,64,17],[60,20,64,18],[60,84,64,82],[60,85,64,83],[61,8,66,6,"response"],[61,16,66,14],[61,19,66,17],[61,25,66,23,"fetch"],[61,30,66,28],[61,31,66,29],[61,34,66,32,"API_BASE"],[61,38,66,40],[61,39,66,40,"API_BASE"],[61,47,66,40],[61,65,66,58],[61,67,66,60],[62,10,67,8,"method"],[62,16,67,14],[62,18,67,16],[62,24,67,22],[63,10,68,8,"headers"],[63,17,68,15],[64,10,69,8,"body"],[64,14,69,12],[64,16,69,14,"JSON"],[64,20,69,18],[64,21,69,19,"stringify"],[64,30,69,28],[64,31,69,29,"profileData"],[64,42,69,40],[65,8,70,6],[65,9,70,7],[65,10,70,8],[66,8,72,6,"console"],[66,15,72,13],[66,16,72,14,"log"],[66,19,72,17],[66,20,72,18],[66,65,72,63],[66,67,72,65,"response"],[66,75,72,73],[66,76,72,74,"status"],[66,82,72,80],[66,83,72,81],[67,6,73,4],[68,6,75,4],[68,10,75,8],[68,11,75,9,"response"],[68,19,75,17],[68,20,75,18,"ok"],[68,22,75,20],[68,24,75,22],[69,8,76,6],[69,14,76,12,"errorText"],[69,23,76,21],[69,26,76,24],[69,32,76,30,"response"],[69,40,76,38],[69,41,76,39,"text"],[69,45,76,43],[69,46,76,44],[69,47,76,45],[70,8,77,6,"console"],[70,15,77,13],[70,16,77,14,"error"],[70,21,77,19],[70,22,77,20],[70,59,77,57],[70,61,77,59,"errorText"],[70,70,77,68],[70,71,77,69],[71,8,78,6],[71,14,78,12],[71,18,78,16,"Error"],[71,23,78,21],[71,24,78,22],[71,40,78,38,"response"],[71,48,78,46],[71,49,78,47,"status"],[71,55,78,53],[71,60,78,58,"errorText"],[71,69,78,67],[71,71,78,69],[71,72,78,70],[72,6,79,4],[73,6,81,4],[73,12,81,10,"result"],[73,18,81,16],[73,21,81,19],[73,27,81,25,"response"],[73,35,81,33],[73,36,81,34,"json"],[73,40,81,38],[73,41,81,39],[73,42,81,40],[74,6,82,4,"console"],[74,13,82,11],[74,14,82,12,"log"],[74,17,82,15],[74,18,82,16],[74,67,82,65],[74,69,82,67,"result"],[74,75,82,73],[74,76,82,74],[75,4,83,2],[75,5,83,3],[75,6,83,4],[75,13,83,11,"error"],[75,18,83,21],[75,20,83,23],[76,6,84,4,"console"],[76,13,84,11],[76,14,84,12,"error"],[76,19,84,17],[76,20,84,18],[76,53,84,51],[76,55,84,53,"error"],[76,60,84,58],[76,61,84,59,"message"],[76,68,84,66],[76,69,84,67],[77,6,85,4],[77,12,85,10,"error"],[77,17,85,15],[78,4,86,2],[79,2,87,0],[80,0,87,1],[80,3]],"functionMap":{"names":["<global>","getWorkerProfile","saveWorkerProfile"],"mappings":"AAA;OCK;CDkC;OEG;CF4C"},"hasCjsExports":false},"type":"js/module"}]}