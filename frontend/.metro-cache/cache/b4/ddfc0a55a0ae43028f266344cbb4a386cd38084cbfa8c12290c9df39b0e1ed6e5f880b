{"dependencies":[{"name":"./api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":111},"end":{"line":3,"column":60,"index":171}}],"key":"FbKPDeRJ9TF3vg1eKYKz12urgic=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.getWorkerProfile = getWorkerProfile;\n  exports.saveWorkerProfile = saveWorkerProfile;\n  var _api = require(_dependencyMap[0], \"./api\");\n  // utils/profileStore.ts - Worker Profile Store (REFACTORED)\n\n  // ===== GET WORKER PROFILE =====\n  async function getWorkerProfile(userId) {\n    // If no userId provided, get it from auth\n    if (!userId) {\n      userId = await (0, _api.getUserId)();\n      if (!userId) {\n        console.error('‚ùå getWorkerProfile: No userId provided and not authenticated');\n        throw new Error('Not authenticated');\n      }\n    }\n    console.log('üîç getWorkerProfile: Loading profile for user', userId);\n    try {\n      const headers = await (0, _api.getAuthHeaders)();\n      const response = await fetch(`${_api.API_BASE}/profiles/worker/${userId}`, {\n        method: 'GET',\n        headers\n      });\n      if (response.status === 404) {\n        console.log('‚ö†Ô∏è getWorkerProfile: Profile not found (404)');\n        return null;\n      }\n      if (!response.ok) {\n        const error = await response.text();\n        console.error('‚ùå getWorkerProfile: API error', response.status, error);\n        throw new Error(`Failed to fetch profile: ${response.status}`);\n      }\n      const profile = await response.json();\n      console.log('‚úÖ getWorkerProfile: Profile loaded', {\n        userId: profile.userId,\n        categories: profile.categories?.length || 0,\n        tags: profile.selectedTags?.length || 0\n      });\n      return profile;\n    } catch (error) {\n      console.error('‚ùå getWorkerProfile: Error', error);\n      throw error;\n    }\n  }\n\n  // ===== SAVE WORKER PROFILE =====\n  async function saveWorkerProfile(userId, profileData) {\n    console.log('üíæ saveWorkerProfile: Saving profile for', userId);\n    console.log('üíæ saveWorkerProfile: Data:', profileData);\n    try {\n      // 1. Bestehendes Profil laden\n      const existing = await getWorkerProfile(userId);\n\n      // 2. Vollst√§ndiges Profil-Objekt erstellen\n      const merged = existing ? {\n        ...existing,\n        ...profileData\n      } : profileData;\n      const headers = await (0, _api.getAuthHeaders)();\n\n      // 3. merged statt profileData senden\n      // Try PUT first (update existing)\n      let response = await fetch(`${_api.API_BASE}/profiles/worker/${userId}`, {\n        method: 'PUT',\n        headers,\n        body: JSON.stringify(merged)\n      });\n      console.log('üì• saveWorkerProfile: PUT response status:', response.status);\n\n      // If 404, profile doesn't exist - create with POST\n      if (response.status === 404) {\n        console.log('‚ö†Ô∏è saveWorkerProfile: Profile not found, creating new via POST');\n        response = await fetch(`${_api.API_BASE}/profiles/worker`, {\n          method: 'POST',\n          headers,\n          body: JSON.stringify(merged)\n        });\n        console.log('üì• saveWorkerProfile: POST response status:', response.status);\n      }\n      if (!response.ok) {\n        const errorText = await response.text();\n        console.error('‚ùå saveWorkerProfile: Backend error:', errorText);\n        throw new Error(`Server Error ${response.status}: ${errorText}`);\n      }\n      const result = await response.json();\n      console.log('‚úÖ saveWorkerProfile: Profile saved successfully', result);\n    } catch (error) {\n      console.error('‚ùå saveWorkerProfile: Exception:', error.message);\n      throw error;\n    }\n  }\n});","lineCount":97,"map":[[7,2,6,0,"exports"],[7,9,6,0],[7,10,6,0,"getWorkerProfile"],[7,26,6,0],[7,29,6,0,"getWorkerProfile"],[7,45,6,0],[8,2,52,0,"exports"],[8,9,52,0],[8,10,52,0,"saveWorkerProfile"],[8,27,52,0],[8,30,52,0,"saveWorkerProfile"],[8,47,52,0],[9,2,3,0],[9,6,3,0,"_api"],[9,10,3,0],[9,13,3,0,"require"],[9,20,3,0],[9,21,3,0,"_dependencyMap"],[9,35,3,0],[10,2,1,0],[12,2,5,0],[13,2,6,7],[13,17,6,22,"getWorkerProfile"],[13,33,6,38,"getWorkerProfile"],[13,34,6,39,"userId"],[13,40,6,54],[13,42,6,87],[14,4,7,2],[15,4,8,2],[15,8,8,6],[15,9,8,7,"userId"],[15,15,8,13],[15,17,8,15],[16,6,9,4,"userId"],[16,12,9,10],[16,15,9,13],[16,21,9,19],[16,25,9,19,"getUserId"],[16,29,9,28],[16,30,9,28,"getUserId"],[16,39,9,28],[16,41,9,29],[16,42,9,30],[17,6,10,4],[17,10,10,8],[17,11,10,9,"userId"],[17,17,10,15],[17,19,10,17],[18,8,11,6,"console"],[18,15,11,13],[18,16,11,14,"error"],[18,21,11,19],[18,22,11,20],[18,84,11,82],[18,85,11,83],[19,8,12,6],[19,14,12,12],[19,18,12,16,"Error"],[19,23,12,21],[19,24,12,22],[19,43,12,41],[19,44,12,42],[20,6,13,4],[21,4,14,2],[22,4,16,2,"console"],[22,11,16,9],[22,12,16,10,"log"],[22,15,16,13],[22,16,16,14],[22,63,16,61],[22,65,16,63,"userId"],[22,71,16,69],[22,72,16,70],[23,4,18,2],[23,8,18,6],[24,6,19,4],[24,12,19,10,"headers"],[24,19,19,17],[24,22,19,20],[24,28,19,26],[24,32,19,26,"getAuthHeaders"],[24,36,19,40],[24,37,19,40,"getAuthHeaders"],[24,51,19,40],[24,53,19,41],[24,54,19,42],[25,6,21,4],[25,12,21,10,"response"],[25,20,21,18],[25,23,21,21],[25,29,21,27,"fetch"],[25,34,21,32],[25,35,21,33],[25,38,21,36,"API_BASE"],[25,42,21,44],[25,43,21,44,"API_BASE"],[25,51,21,44],[25,71,21,64,"userId"],[25,77,21,70],[25,79,21,72],[25,81,21,74],[26,8,22,6,"method"],[26,14,22,12],[26,16,22,14],[26,21,22,19],[27,8,23,6,"headers"],[28,6,24,4],[28,7,24,5],[28,8,24,6],[29,6,26,4],[29,10,26,8,"response"],[29,18,26,16],[29,19,26,17,"status"],[29,25,26,23],[29,30,26,28],[29,33,26,31],[29,35,26,33],[30,8,27,6,"console"],[30,15,27,13],[30,16,27,14,"log"],[30,19,27,17],[30,20,27,18],[30,66,27,64],[30,67,27,65],[31,8,28,6],[31,15,28,13],[31,19,28,17],[32,6,29,4],[33,6,31,4],[33,10,31,8],[33,11,31,9,"response"],[33,19,31,17],[33,20,31,18,"ok"],[33,22,31,20],[33,24,31,22],[34,8,32,6],[34,14,32,12,"error"],[34,19,32,17],[34,22,32,20],[34,28,32,26,"response"],[34,36,32,34],[34,37,32,35,"text"],[34,41,32,39],[34,42,32,40],[34,43,32,41],[35,8,33,6,"console"],[35,15,33,13],[35,16,33,14,"error"],[35,21,33,19],[35,22,33,20],[35,53,33,51],[35,55,33,53,"response"],[35,63,33,61],[35,64,33,62,"status"],[35,70,33,68],[35,72,33,70,"error"],[35,77,33,75],[35,78,33,76],[36,8,34,6],[36,14,34,12],[36,18,34,16,"Error"],[36,23,34,21],[36,24,34,22],[36,52,34,50,"response"],[36,60,34,58],[36,61,34,59,"status"],[36,67,34,65],[36,69,34,67],[36,70,34,68],[37,6,35,4],[38,6,37,4],[38,12,37,10,"profile"],[38,19,37,17],[38,22,37,20],[38,28,37,26,"response"],[38,36,37,34],[38,37,37,35,"json"],[38,41,37,39],[38,42,37,40],[38,43,37,41],[39,6,38,4,"console"],[39,13,38,11],[39,14,38,12,"log"],[39,17,38,15],[39,18,38,16],[39,54,38,52],[39,56,38,54],[40,8,39,6,"userId"],[40,14,39,12],[40,16,39,14,"profile"],[40,23,39,21],[40,24,39,22,"userId"],[40,30,39,28],[41,8,40,6,"categories"],[41,18,40,16],[41,20,40,18,"profile"],[41,27,40,25],[41,28,40,26,"categories"],[41,38,40,36],[41,40,40,38,"length"],[41,46,40,44],[41,50,40,48],[41,51,40,49],[42,8,41,6,"tags"],[42,12,41,10],[42,14,41,12,"profile"],[42,21,41,19],[42,22,41,20,"selectedTags"],[42,34,41,32],[42,36,41,34,"length"],[42,42,41,40],[42,46,41,44],[43,6,42,4],[43,7,42,5],[43,8,42,6],[44,6,44,4],[44,13,44,11,"profile"],[44,20,44,18],[45,4,45,2],[45,5,45,3],[45,6,45,4],[45,13,45,11,"error"],[45,18,45,16],[45,20,45,18],[46,6,46,4,"console"],[46,13,46,11],[46,14,46,12,"error"],[46,19,46,17],[46,20,46,18],[46,47,46,45],[46,49,46,47,"error"],[46,54,46,52],[46,55,46,53],[47,6,47,4],[47,12,47,10,"error"],[47,17,47,15],[48,4,48,2],[49,2,49,0],[51,2,51,0],[52,2,52,7],[52,17,52,22,"saveWorkerProfile"],[52,34,52,39,"saveWorkerProfile"],[52,35,53,2,"userId"],[52,41,53,16],[52,43,54,2,"profileData"],[52,54,54,37],[52,56,55,17],[53,4,56,2,"console"],[53,11,56,9],[53,12,56,10,"log"],[53,15,56,13],[53,16,56,14],[53,58,56,56],[53,60,56,58,"userId"],[53,66,56,64],[53,67,56,65],[54,4,57,2,"console"],[54,11,57,9],[54,12,57,10,"log"],[54,15,57,13],[54,16,57,14],[54,45,57,43],[54,47,57,45,"profileData"],[54,58,57,56],[54,59,57,57],[55,4,59,2],[55,8,59,6],[56,6,60,4],[57,6,61,4],[57,12,61,10,"existing"],[57,20,61,18],[57,23,61,21],[57,29,61,27,"getWorkerProfile"],[57,45,61,43],[57,46,61,44,"userId"],[57,52,61,50],[57,53,61,51],[59,6,63,4],[60,6,64,4],[60,12,64,10,"merged"],[60,18,64,16],[60,21,64,19,"existing"],[60,29,64,27],[60,32,64,30],[61,8,64,32],[61,11,64,35,"existing"],[61,19,64,43],[62,8,64,45],[62,11,64,48,"profileData"],[63,6,64,60],[63,7,64,61],[63,10,64,64,"profileData"],[63,21,64,75],[64,6,66,4],[64,12,66,10,"headers"],[64,19,66,17],[64,22,66,20],[64,28,66,26],[64,32,66,26,"getAuthHeaders"],[64,36,66,40],[64,37,66,40,"getAuthHeaders"],[64,51,66,40],[64,53,66,41],[64,54,66,42],[66,6,68,4],[67,6,69,4],[68,6,70,4],[68,10,70,8,"response"],[68,18,70,16],[68,21,70,19],[68,27,70,25,"fetch"],[68,32,70,30],[68,33,70,31],[68,36,70,34,"API_BASE"],[68,40,70,42],[68,41,70,42,"API_BASE"],[68,49,70,42],[68,69,70,62,"userId"],[68,75,70,68],[68,77,70,70],[68,79,70,72],[69,8,71,6,"method"],[69,14,71,12],[69,16,71,14],[69,21,71,19],[70,8,72,6,"headers"],[70,15,72,13],[71,8,73,6,"body"],[71,12,73,10],[71,14,73,12,"JSON"],[71,18,73,16],[71,19,73,17,"stringify"],[71,28,73,26],[71,29,73,27,"merged"],[71,35,73,33],[72,6,74,4],[72,7,74,5],[72,8,74,6],[73,6,76,4,"console"],[73,13,76,11],[73,14,76,12,"log"],[73,17,76,15],[73,18,76,16],[73,62,76,60],[73,64,76,62,"response"],[73,72,76,70],[73,73,76,71,"status"],[73,79,76,77],[73,80,76,78],[75,6,78,4],[76,6,79,4],[76,10,79,8,"response"],[76,18,79,16],[76,19,79,17,"status"],[76,25,79,23],[76,30,79,28],[76,33,79,31],[76,35,79,33],[77,8,80,6,"console"],[77,15,80,13],[77,16,80,14,"log"],[77,19,80,17],[77,20,80,18],[77,84,80,82],[77,85,80,83],[78,8,82,6,"response"],[78,16,82,14],[78,19,82,17],[78,25,82,23,"fetch"],[78,30,82,28],[78,31,82,29],[78,34,82,32,"API_BASE"],[78,38,82,40],[78,39,82,40,"API_BASE"],[78,47,82,40],[78,65,82,58],[78,67,82,60],[79,10,83,8,"method"],[79,16,83,14],[79,18,83,16],[79,24,83,22],[80,10,84,8,"headers"],[80,17,84,15],[81,10,85,8,"body"],[81,14,85,12],[81,16,85,14,"JSON"],[81,20,85,18],[81,21,85,19,"stringify"],[81,30,85,28],[81,31,85,29,"merged"],[81,37,85,35],[82,8,86,6],[82,9,86,7],[82,10,86,8],[83,8,88,6,"console"],[83,15,88,13],[83,16,88,14,"log"],[83,19,88,17],[83,20,88,18],[83,65,88,63],[83,67,88,65,"response"],[83,75,88,73],[83,76,88,74,"status"],[83,82,88,80],[83,83,88,81],[84,6,89,4],[85,6,91,4],[85,10,91,8],[85,11,91,9,"response"],[85,19,91,17],[85,20,91,18,"ok"],[85,22,91,20],[85,24,91,22],[86,8,92,6],[86,14,92,12,"errorText"],[86,23,92,21],[86,26,92,24],[86,32,92,30,"response"],[86,40,92,38],[86,41,92,39,"text"],[86,45,92,43],[86,46,92,44],[86,47,92,45],[87,8,93,6,"console"],[87,15,93,13],[87,16,93,14,"error"],[87,21,93,19],[87,22,93,20],[87,59,93,57],[87,61,93,59,"errorText"],[87,70,93,68],[87,71,93,69],[88,8,94,6],[88,14,94,12],[88,18,94,16,"Error"],[88,23,94,21],[88,24,94,22],[88,40,94,38,"response"],[88,48,94,46],[88,49,94,47,"status"],[88,55,94,53],[88,60,94,58,"errorText"],[88,69,94,67],[88,71,94,69],[88,72,94,70],[89,6,95,4],[90,6,97,4],[90,12,97,10,"result"],[90,18,97,16],[90,21,97,19],[90,27,97,25,"response"],[90,35,97,33],[90,36,97,34,"json"],[90,40,97,38],[90,41,97,39],[90,42,97,40],[91,6,98,4,"console"],[91,13,98,11],[91,14,98,12,"log"],[91,17,98,15],[91,18,98,16],[91,67,98,65],[91,69,98,67,"result"],[91,75,98,73],[91,76,98,74],[92,4,99,2],[92,5,99,3],[92,6,99,4],[92,13,99,11,"error"],[92,18,99,21],[92,20,99,23],[93,6,100,4,"console"],[93,13,100,11],[93,14,100,12,"error"],[93,19,100,17],[93,20,100,18],[93,53,100,51],[93,55,100,53,"error"],[93,60,100,58],[93,61,100,59,"message"],[93,68,100,66],[93,69,100,67],[94,6,101,4],[94,12,101,10,"error"],[94,17,101,15],[95,4,102,2],[96,2,103,0],[97,0,103,1],[97,3]],"functionMap":{"names":["<global>","getWorkerProfile","saveWorkerProfile"],"mappings":"AAA;OCK;CD2C;OEG;CFmD"},"hasCjsExports":false},"type":"js/module"}]}