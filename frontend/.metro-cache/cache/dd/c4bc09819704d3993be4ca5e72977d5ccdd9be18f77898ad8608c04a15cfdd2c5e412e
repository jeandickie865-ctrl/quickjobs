{"dependencies":[{"name":"./storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":45,"index":45}}],"key":"3rLtLV8J3gSw9c8Ep8Wpc3w/Yxg=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.addApplication = addApplication;\n  exports.getApplicationsForJob = getApplicationsForJob;\n  exports.getApplicationsForWorker = getApplicationsForWorker;\n  exports.acceptApplication = acceptApplication;\n  exports.updateApplicationStatus = updateApplicationStatus;\n  var _storage = require(_dependencyMap[0], \"./storage\");\n  const APPLICATIONS_KEY = '@shiftmatch:applications';\n  async function loadApplications() {\n    const stored = await (0, _storage.getItem)(APPLICATIONS_KEY);\n    return stored ?? [];\n  }\n  async function saveApplications(apps) {\n    await (0, _storage.setItem)(APPLICATIONS_KEY, apps);\n  }\n  async function addApplication(jobId, workerId) {\n    const apps = await loadApplications();\n    const existing = apps.find(a => a.jobId === jobId && a.workerId === workerId);\n    if (existing) return existing;\n    const app = {\n      id: 'app-' + Date.now().toString() + '-' + Math.random().toString(36).slice(2),\n      jobId,\n      workerId,\n      createdAt: new Date().toISOString(),\n      status: 'pending'\n    };\n    const next = [...apps, app];\n    await saveApplications(next);\n    return app;\n  }\n  async function getApplicationsForJob(jobId) {\n    const apps = await loadApplications();\n    return apps.filter(a => a.jobId === jobId);\n  }\n  async function getApplicationsForWorker(workerId) {\n    const apps = await loadApplications();\n    return apps.filter(a => a.workerId === workerId);\n  }\n  async function acceptApplication(jobId, applicationId) {\n    const apps = await loadApplications();\n    const next = apps.map(app => {\n      if (app.jobId !== jobId) return app;\n      if (app.id === applicationId) {\n        return Object.assign({}, app, {\n          status: 'accepted'\n        });\n      }\n      if (app.status === 'pending') {\n        return Object.assign({}, app, {\n          status: 'rejected'\n        });\n      }\n      return app;\n    });\n    await saveApplications(next);\n  }\n  async function updateApplicationStatus(id, status) {\n    const apps = await loadApplications();\n    const next = apps.map(app => app.id === id ? Object.assign({}, app, {\n      status\n    }) : app);\n    await saveApplications(next);\n  }\n});","lineCount":69,"map":[[7,2,15,0,"exports"],[7,9,15,0],[7,10,15,0,"addApplication"],[7,24,15,0],[7,27,15,0,"addApplication"],[7,41,15,0],[8,2,32,0,"exports"],[8,9,32,0],[8,10,32,0,"getApplicationsForJob"],[8,31,32,0],[8,34,32,0,"getApplicationsForJob"],[8,55,32,0],[9,2,37,0,"exports"],[9,9,37,0],[9,10,37,0,"getApplicationsForWorker"],[9,34,37,0],[9,37,37,0,"getApplicationsForWorker"],[9,61,37,0],[10,2,42,0,"exports"],[10,9,42,0],[10,10,42,0,"acceptApplication"],[10,27,42,0],[10,30,42,0,"acceptApplication"],[10,47,42,0],[11,2,57,0,"exports"],[11,9,57,0],[11,10,57,0,"updateApplicationStatus"],[11,33,57,0],[11,36,57,0,"updateApplicationStatus"],[11,59,57,0],[12,2,1,0],[12,6,1,0,"_storage"],[12,14,1,0],[12,17,1,0,"require"],[12,24,1,0],[12,25,1,0,"_dependencyMap"],[12,39,1,0],[13,2,4,0],[13,8,4,6,"APPLICATIONS_KEY"],[13,24,4,22],[13,27,4,25],[13,53,4,51],[14,2,6,0],[14,17,6,15,"loadApplications"],[14,33,6,31,"loadApplications"],[14,34,6,31],[14,36,6,61],[15,4,7,2],[15,10,7,8,"stored"],[15,16,7,14],[15,19,7,17],[15,25,7,23],[15,29,7,23,"getItem"],[15,37,7,30],[15,38,7,30,"getItem"],[15,45,7,30],[15,47,7,49,"APPLICATIONS_KEY"],[15,63,7,65],[15,64,7,66],[16,4,8,2],[16,11,8,9,"stored"],[16,17,8,15],[16,21,8,19],[16,23,8,21],[17,2,9,0],[18,2,11,0],[18,17,11,15,"saveApplications"],[18,33,11,31,"saveApplications"],[18,34,11,32,"apps"],[18,38,11,54],[18,40,11,71],[19,4,12,2],[19,10,12,8],[19,14,12,8,"setItem"],[19,22,12,15],[19,23,12,15,"setItem"],[19,30,12,15],[19,32,12,34,"APPLICATIONS_KEY"],[19,48,12,50],[19,50,12,52,"apps"],[19,54,12,56],[19,55,12,57],[20,2,13,0],[21,2,15,7],[21,17,15,22,"addApplication"],[21,31,15,36,"addApplication"],[21,32,15,37,"jobId"],[21,37,15,50],[21,39,15,52,"workerId"],[21,47,15,68],[21,49,15,95],[22,4,16,2],[22,10,16,8,"apps"],[22,14,16,12],[22,17,16,15],[22,23,16,21,"loadApplications"],[22,39,16,37],[22,40,16,38],[22,41,16,39],[23,4,17,2],[23,10,17,8,"existing"],[23,18,17,16],[23,21,17,19,"apps"],[23,25,17,23],[23,26,17,24,"find"],[23,30,17,28],[23,31,17,29,"a"],[23,32,17,30],[23,36,17,34,"a"],[23,37,17,35],[23,38,17,36,"jobId"],[23,43,17,41],[23,48,17,46,"jobId"],[23,53,17,51],[23,57,17,55,"a"],[23,58,17,56],[23,59,17,57,"workerId"],[23,67,17,65],[23,72,17,70,"workerId"],[23,80,17,78],[23,81,17,79],[24,4,18,2],[24,8,18,6,"existing"],[24,16,18,14],[24,18,18,16],[24,25,18,23,"existing"],[24,33,18,31],[25,4,20,2],[25,10,20,8,"app"],[25,13,20,27],[25,16,20,30],[26,6,21,4,"id"],[26,8,21,6],[26,10,21,8],[26,16,21,14],[26,19,21,17,"Date"],[26,23,21,21],[26,24,21,22,"now"],[26,27,21,25],[26,28,21,26],[26,29,21,27],[26,30,21,28,"toString"],[26,38,21,36],[26,39,21,37],[26,40,21,38],[26,43,21,41],[26,46,21,44],[26,49,21,47,"Math"],[26,53,21,51],[26,54,21,52,"random"],[26,60,21,58],[26,61,21,59],[26,62,21,60],[26,63,21,61,"toString"],[26,71,21,69],[26,72,21,70],[26,74,21,72],[26,75,21,73],[26,76,21,74,"slice"],[26,81,21,79],[26,82,21,80],[26,83,21,81],[26,84,21,82],[27,6,22,4,"jobId"],[27,11,22,9],[28,6,23,4,"workerId"],[28,14,23,12],[29,6,24,4,"createdAt"],[29,15,24,13],[29,17,24,15],[29,21,24,19,"Date"],[29,25,24,23],[29,26,24,24],[29,27,24,25],[29,28,24,26,"toISOString"],[29,39,24,37],[29,40,24,38],[29,41,24,39],[30,6,25,4,"status"],[30,12,25,10],[30,14,25,12],[31,4,26,2],[31,5,26,3],[32,4,27,2],[32,10,27,8,"next"],[32,14,27,12],[32,17,27,15],[32,18,27,16],[32,21,27,19,"apps"],[32,25,27,23],[32,27,27,25,"app"],[32,30,27,28],[32,31,27,29],[33,4,28,2],[33,10,28,8,"saveApplications"],[33,26,28,24],[33,27,28,25,"next"],[33,31,28,29],[33,32,28,30],[34,4,29,2],[34,11,29,9,"app"],[34,14,29,12],[35,2,30,0],[36,2,32,7],[36,17,32,22,"getApplicationsForJob"],[36,38,32,43,"getApplicationsForJob"],[36,39,32,44,"jobId"],[36,44,32,57],[36,46,32,86],[37,4,33,2],[37,10,33,8,"apps"],[37,14,33,12],[37,17,33,15],[37,23,33,21,"loadApplications"],[37,39,33,37],[37,40,33,38],[37,41,33,39],[38,4,34,2],[38,11,34,9,"apps"],[38,15,34,13],[38,16,34,14,"filter"],[38,22,34,20],[38,23,34,21,"a"],[38,24,34,22],[38,28,34,26,"a"],[38,29,34,27],[38,30,34,28,"jobId"],[38,35,34,33],[38,40,34,38,"jobId"],[38,45,34,43],[38,46,34,44],[39,2,35,0],[40,2,37,7],[40,17,37,22,"getApplicationsForWorker"],[40,41,37,46,"getApplicationsForWorker"],[40,42,37,47,"workerId"],[40,50,37,63],[40,52,37,92],[41,4,38,2],[41,10,38,8,"apps"],[41,14,38,12],[41,17,38,15],[41,23,38,21,"loadApplications"],[41,39,38,37],[41,40,38,38],[41,41,38,39],[42,4,39,2],[42,11,39,9,"apps"],[42,15,39,13],[42,16,39,14,"filter"],[42,22,39,20],[42,23,39,21,"a"],[42,24,39,22],[42,28,39,26,"a"],[42,29,39,27],[42,30,39,28,"workerId"],[42,38,39,36],[42,43,39,41,"workerId"],[42,51,39,49],[42,52,39,50],[43,2,40,0],[44,2,42,7],[44,17,42,22,"acceptApplication"],[44,34,42,39,"acceptApplication"],[44,35,42,40,"jobId"],[44,40,42,53],[44,42,42,55,"applicationId"],[44,55,42,76],[44,57,42,93],[45,4,43,2],[45,10,43,8,"apps"],[45,14,43,12],[45,17,43,15],[45,23,43,21,"loadApplications"],[45,39,43,37],[45,40,43,38],[45,41,43,39],[46,4,44,2],[46,10,44,8,"next"],[46,14,44,12],[46,17,44,15,"apps"],[46,21,44,19],[46,22,44,20,"map"],[46,25,44,23],[46,26,44,24,"app"],[46,29,44,27],[46,33,44,31],[47,6,45,4],[47,10,45,8,"app"],[47,13,45,11],[47,14,45,12,"jobId"],[47,19,45,17],[47,24,45,22,"jobId"],[47,29,45,27],[47,31,45,29],[47,38,45,36,"app"],[47,41,45,39],[48,6,46,4],[48,10,46,8,"app"],[48,13,46,11],[48,14,46,12,"id"],[48,16,46,14],[48,21,46,19,"applicationId"],[48,34,46,32],[48,36,46,34],[49,8,47,6],[49,15,47,6,"Object"],[49,21,47,6],[49,22,47,6,"assign"],[49,28,47,6],[49,33,47,18,"app"],[49,36,47,21],[50,10,47,23,"status"],[50,16,47,29],[50,18,47,31],[51,8,47,62],[52,6,48,4],[53,6,49,4],[53,10,49,8,"app"],[53,13,49,11],[53,14,49,12,"status"],[53,20,49,18],[53,25,49,23],[53,34,49,32],[53,36,49,34],[54,8,50,6],[54,15,50,6,"Object"],[54,21,50,6],[54,22,50,6,"assign"],[54,28,50,6],[54,33,50,18,"app"],[54,36,50,21],[55,10,50,23,"status"],[55,16,50,29],[55,18,50,31],[56,8,50,62],[57,6,51,4],[58,6,52,4],[58,13,52,11,"app"],[58,16,52,14],[59,4,53,2],[59,5,53,3],[59,6,53,4],[60,4,54,2],[60,10,54,8,"saveApplications"],[60,26,54,24],[60,27,54,25,"next"],[60,31,54,29],[60,32,54,30],[61,2,55,0],[62,2,57,7],[62,17,57,22,"updateApplicationStatus"],[62,40,57,45,"updateApplicationStatus"],[62,41,57,46,"id"],[62,43,57,56],[62,45,57,58,"status"],[62,51,57,83],[62,53,57,100],[63,4,58,2],[63,10,58,8,"apps"],[63,14,58,12],[63,17,58,15],[63,23,58,21,"loadApplications"],[63,39,58,37],[63,40,58,38],[63,41,58,39],[64,4,59,2],[64,10,59,8,"next"],[64,14,59,12],[64,17,59,15,"apps"],[64,21,59,19],[64,22,59,20,"map"],[64,25,59,23],[64,26,59,24,"app"],[64,29,59,27],[64,33,59,32,"app"],[64,36,59,35],[64,37,59,36,"id"],[64,39,59,38],[64,44,59,43,"id"],[64,46,59,45],[64,49,59,45,"Object"],[64,55,59,45],[64,56,59,45,"assign"],[64,62,59,45],[64,67,59,53,"app"],[64,70,59,56],[65,6,59,58,"status"],[66,4,59,64],[66,9,59,69,"app"],[66,12,59,73],[66,13,59,74],[67,4,60,2],[67,10,60,8,"saveApplications"],[67,26,60,24],[67,27,60,25,"next"],[67,31,60,29],[67,32,60,30],[68,2,61,0],[69,0,61,1],[69,3]],"functionMap":{"names":["<global>","loadApplications","saveApplications","addApplication","apps.find$argument_0","getApplicationsForJob","apps.filter$argument_0","getApplicationsForWorker","acceptApplication","apps.map$argument_0","updateApplicationStatus"],"mappings":"AAA;ACK;CDG;AEE;CFE;OGE;6BCE,iDD;CHa;OKE;qBCE,sBD;CLC;OOE;qBDE,4BC;CPC;OQE;wBCE;GDS;CRE;OUE;wBDE,iDC;CVE"},"hasCjsExports":false},"type":"js/module"}]}