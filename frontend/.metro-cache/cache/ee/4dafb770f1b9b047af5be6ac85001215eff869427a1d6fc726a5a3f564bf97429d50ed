{"dependencies":[{"name":"./storage","data":{"asyncType":null,"locs":[{"start":{"line":2,"column":0,"index":24},"end":{"line":2,"column":45,"index":69}}],"key":"dkq9sfvDyrGcbIAsF1EmLCvdhOw="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.addReview = addReview;\n  exports.calculateAverageRating = calculateAverageRating;\n  exports.getReviewForJob = getReviewForJob;\n  exports.getReviews = getReviews;\n  exports.getReviewsForEmployer = getReviewsForEmployer;\n  exports.getReviewsForWorker = getReviewsForWorker;\n  var _storage = require(_dependencyMap[0], \"./storage\");\n  // utils/reviewStore.ts\n\n  const REVIEW_KEY = '@shiftmatch:reviews';\n\n  /**\n   * Alle Reviews aus AsyncStorage laden\n   */\n  async function getReviews() {\n    const reviews = await (0, _storage.getItem)(REVIEW_KEY);\n    return reviews ?? [];\n  }\n\n  /**\n   * Neue Review hinzufügen\n   * Verhindert Duplikate: Wenn bereits eine Review für jobId + workerId + employerId existiert,\n   * wird diese überschrieben\n   */\n  async function addReview(review) {\n    const reviews = await getReviews();\n\n    // Prüfen ob bereits eine Review für diesen Job + Worker + Employer existiert\n    const existingIndex = reviews.findIndex(r => r.jobId === review.jobId && r.workerId === review.workerId && r.employerId === review.employerId);\n    if (existingIndex >= 0) {\n      // Existierende Review überschreiben\n      console.log('⚠️ Review existiert bereits, wird überschrieben');\n      reviews[existingIndex] = review;\n    } else {\n      // Neue Review hinzufügen\n      reviews.push(review);\n    }\n    await (0, _storage.setItem)(REVIEW_KEY, reviews);\n    console.log('✅ Review gespeichert:', review);\n  }\n\n  /**\n   * Alle Reviews für einen bestimmten Worker laden\n   */\n  async function getReviewsForWorker(workerId) {\n    const reviews = await getReviews();\n    return reviews.filter(r => r.workerId === workerId);\n  }\n\n  /**\n   * Prüfen ob für einen Job bereits eine Review existiert\n   */\n  async function getReviewForJob(jobId, workerId, employerId) {\n    const reviews = await getReviews();\n    return reviews.find(r => r.jobId === jobId && r.workerId === workerId && r.employerId === employerId);\n  }\n\n  /**\n   * Alle Reviews für einen bestimmten Employer laden\n   */\n  async function getReviewsForEmployer(employerId) {\n    const reviews = await getReviews();\n    return reviews.filter(r => r.employerId === employerId);\n  }\n\n  /**\n   * Durchschnittliche Bewertung für einen Worker berechnen\n   */\n  function calculateAverageRating(reviews) {\n    if (reviews.length === 0) return 0;\n    const sum = reviews.reduce((acc, r) => acc + r.rating, 0);\n    return sum / reviews.length;\n  }\n});","lineCount":78,"map":[[11,2,2,0],[11,6,2,0,"_storage"],[11,14,2,0],[11,17,2,0,"require"],[11,24,2,0],[11,25,2,0,"_dependencyMap"],[11,39,2,0],[12,2,1,0],[14,2,5,0],[14,8,5,6,"REVIEW_KEY"],[14,18,5,16],[14,21,5,19],[14,42,5,40],[16,2,7,0],[17,0,8,0],[18,0,9,0],[19,2,10,7],[19,17,10,22,"getReviews"],[19,27,10,32,"getReviews"],[19,28,10,32],[19,30,10,54],[20,4,11,2],[20,10,11,8,"reviews"],[20,17,11,15],[20,20,11,18],[20,26,11,24],[20,30,11,24,"getItem"],[20,46,11,31],[20,48,11,42,"REVIEW_KEY"],[20,58,11,52],[20,59,11,53],[21,4,12,2],[21,11,12,9,"reviews"],[21,18,12,16],[21,22,12,20],[21,24,12,22],[22,2,13,0],[24,2,15,0],[25,0,16,0],[26,0,17,0],[27,0,18,0],[28,0,19,0],[29,2,20,7],[29,17,20,22,"addReview"],[29,26,20,31,"addReview"],[29,27,20,32,"review"],[29,33,20,46],[29,35,20,63],[30,4,21,2],[30,10,21,8,"reviews"],[30,17,21,15],[30,20,21,18],[30,26,21,24,"getReviews"],[30,36,21,34],[30,37,21,35],[30,38,21,36],[32,4,23,2],[33,4,24,2],[33,10,24,8,"existingIndex"],[33,23,24,21],[33,26,24,24,"reviews"],[33,33,24,31],[33,34,24,32,"findIndex"],[33,43,24,41],[33,44,25,5,"r"],[33,45,25,6],[33,49,26,6,"r"],[33,50,26,7],[33,51,26,8,"jobId"],[33,56,26,13],[33,61,26,18,"review"],[33,67,26,24],[33,68,26,25,"jobId"],[33,73,26,30],[33,77,27,6,"r"],[33,78,27,7],[33,79,27,8,"workerId"],[33,87,27,16],[33,92,27,21,"review"],[33,98,27,27],[33,99,27,28,"workerId"],[33,107,27,36],[33,111,28,6,"r"],[33,112,28,7],[33,113,28,8,"employerId"],[33,123,28,18],[33,128,28,23,"review"],[33,134,28,29],[33,135,28,30,"employerId"],[33,145,29,2],[33,146,29,3],[34,4,31,2],[34,8,31,6,"existingIndex"],[34,21,31,19],[34,25,31,23],[34,26,31,24],[34,28,31,26],[35,6,32,4],[36,6,33,4,"console"],[36,13,33,11],[36,14,33,12,"log"],[36,17,33,15],[36,18,33,16],[36,67,33,65],[36,68,33,66],[37,6,34,4,"reviews"],[37,13,34,11],[37,14,34,12,"existingIndex"],[37,27,34,25],[37,28,34,26],[37,31,34,29,"review"],[37,37,34,35],[38,4,35,2],[38,5,35,3],[38,11,35,9],[39,6,36,4],[40,6,37,4,"reviews"],[40,13,37,11],[40,14,37,12,"push"],[40,18,37,16],[40,19,37,17,"review"],[40,25,37,23],[40,26,37,24],[41,4,38,2],[42,4,40,2],[42,10,40,8],[42,14,40,8,"setItem"],[42,30,40,15],[42,32,40,16,"REVIEW_KEY"],[42,42,40,26],[42,44,40,28,"reviews"],[42,51,40,35],[42,52,40,36],[43,4,41,2,"console"],[43,11,41,9],[43,12,41,10,"log"],[43,15,41,13],[43,16,41,14],[43,39,41,37],[43,41,41,39,"review"],[43,47,41,45],[43,48,41,46],[44,2,42,0],[46,2,44,0],[47,0,45,0],[48,0,46,0],[49,2,47,7],[49,17,47,22,"getReviewsForWorker"],[49,36,47,41,"getReviewsForWorker"],[49,37,47,42,"workerId"],[49,45,47,58],[49,47,47,79],[50,4,48,2],[50,10,48,8,"reviews"],[50,17,48,15],[50,20,48,18],[50,26,48,24,"getReviews"],[50,36,48,34],[50,37,48,35],[50,38,48,36],[51,4,49,2],[51,11,49,9,"reviews"],[51,18,49,16],[51,19,49,17,"filter"],[51,25,49,23],[51,26,49,25,"r"],[51,27,49,26],[51,31,49,31,"r"],[51,32,49,32],[51,33,49,33,"workerId"],[51,41,49,41],[51,46,49,46,"workerId"],[51,54,49,54],[51,55,49,55],[52,2,50,0],[54,2,52,0],[55,0,53,0],[56,0,54,0],[57,2,55,7],[57,17,55,22,"getReviewForJob"],[57,32,55,37,"getReviewForJob"],[57,33,56,2,"jobId"],[57,38,56,15],[57,40,57,2,"workerId"],[57,48,57,18],[57,50,58,2,"employerId"],[57,60,58,20],[57,62,59,31],[58,4,60,2],[58,10,60,8,"reviews"],[58,17,60,15],[58,20,60,18],[58,26,60,24,"getReviews"],[58,36,60,34],[58,37,60,35],[58,38,60,36],[59,4,61,2],[59,11,61,9,"reviews"],[59,18,61,16],[59,19,61,17,"find"],[59,23,61,21],[59,24,62,5,"r"],[59,25,62,6],[59,29,63,6,"r"],[59,30,63,7],[59,31,63,8,"jobId"],[59,36,63,13],[59,41,63,18,"jobId"],[59,46,63,23],[59,50,64,6,"r"],[59,51,64,7],[59,52,64,8,"workerId"],[59,60,64,16],[59,65,64,21,"workerId"],[59,73,64,29],[59,77,65,6,"r"],[59,78,65,7],[59,79,65,8,"employerId"],[59,89,65,18],[59,94,65,23,"employerId"],[59,104,66,2],[59,105,66,3],[60,2,67,0],[62,2,69,0],[63,0,70,0],[64,0,71,0],[65,2,72,7],[65,17,72,22,"getReviewsForEmployer"],[65,38,72,43,"getReviewsForEmployer"],[65,39,72,44,"employerId"],[65,49,72,62],[65,51,72,83],[66,4,73,2],[66,10,73,8,"reviews"],[66,17,73,15],[66,20,73,18],[66,26,73,24,"getReviews"],[66,36,73,34],[66,37,73,35],[66,38,73,36],[67,4,74,2],[67,11,74,9,"reviews"],[67,18,74,16],[67,19,74,17,"filter"],[67,25,74,23],[67,26,74,25,"r"],[67,27,74,26],[67,31,74,31,"r"],[67,32,74,32],[67,33,74,33,"employerId"],[67,43,74,43],[67,48,74,48,"employerId"],[67,58,74,58],[67,59,74,59],[68,2,75,0],[70,2,77,0],[71,0,78,0],[72,0,79,0],[73,2,80,7],[73,11,80,16,"calculateAverageRating"],[73,33,80,38,"calculateAverageRating"],[73,34,80,39,"reviews"],[73,41,80,56],[73,43,80,66],[74,4,81,2],[74,8,81,6,"reviews"],[74,15,81,13],[74,16,81,14,"length"],[74,22,81,20],[74,27,81,25],[74,28,81,26],[74,30,81,28],[74,37,81,35],[74,38,81,36],[75,4,82,2],[75,10,82,8,"sum"],[75,13,82,11],[75,16,82,14,"reviews"],[75,23,82,21],[75,24,82,22,"reduce"],[75,30,82,28],[75,31,82,29],[75,32,82,30,"acc"],[75,35,82,33],[75,37,82,35,"r"],[75,38,82,36],[75,43,82,41,"acc"],[75,46,82,44],[75,49,82,47,"r"],[75,50,82,48],[75,51,82,49,"rating"],[75,57,82,55],[75,59,82,57],[75,60,82,58],[75,61,82,59],[76,4,83,2],[76,11,83,9,"sum"],[76,14,83,12],[76,17,83,15,"reviews"],[76,24,83,22],[76,25,83,23,"length"],[76,31,83,29],[77,2,84,0],[78,0,84,1]],"functionMap":{"names":["<global>","getReviews","addReview","reviews.findIndex$argument_0","getReviewsForWorker","reviews.filter$argument_0","getReviewForJob","reviews.find$argument_0","getReviewsForEmployer","calculateAverageRating","reviews.reduce$argument_0"],"mappings":"AAA;OCS;CDG;OEO;ICK;wCDG;CFc;OIK;wBCE,8BD;CJC;OMK;ICO;iCDG;CNE;OQK;wBHE,kCG;CRC;OSK;6BCE,0BD;CTE"}},"type":"js/module"}]}