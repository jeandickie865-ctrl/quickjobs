{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.geocodeAddress = geocodeAddress;\n  exports.searchAddressSuggestions = searchAddressSuggestions;\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  // utils/geocoding.ts - Geocoding mit Nominatim (OpenStreetMap)\n\n  /**\n   * Geocodiert eine vollst√§ndige Adresse zu Koordinaten\n   * Nutzt Nominatim API (OpenStreetMap) - kostenlos, keine API Keys\n   */\n  async function geocodeAddress(street, houseNumber, postalCode, city) {\n    try {\n      // Vollst√§ndige Adresse zusammenbauen\n      const fullAddress = `${street} ${houseNumber}, ${postalCode} ${city}, Germany`;\n      console.log('üó∫Ô∏è Geocoding address:', fullAddress);\n      const encodedAddress = encodeURIComponent(fullAddress);\n      const url = `https://nominatim.openstreetmap.org/search?q=${encodedAddress}&format=json&limit=1&addressdetails=1`;\n      const response = await fetch(url, {\n        headers: {\n          'User-Agent': 'ShiftMatch-App/1.0' // Nominatim requires User-Agent\n        }\n      });\n      if (!response.ok) {\n        console.error('‚ùå Geocoding API error:', response.status);\n        return null;\n      }\n      const data = await response.json();\n      if (data.length === 0) {\n        console.log('‚ö†Ô∏è No geocoding results found for:', fullAddress);\n        return null;\n      }\n      const result = data[0];\n      const lat = parseFloat(result.lat);\n      const lon = parseFloat(result.lon);\n      console.log('‚úÖ Geocoding successful:', {\n        lat,\n        lon,\n        displayName: result.display_name\n      });\n      return {\n        lat,\n        lon,\n        displayName: result.display_name\n      };\n    } catch (error) {\n      console.error('‚ùå Geocoding error:', error);\n      return null;\n    }\n  }\n\n  /**\n   * Sucht Adressvorschl√§ge basierend auf Eingabe\n   * F√ºr Autocomplete-Funktionalit√§t\n   * JETZT √úBER BACKEND (um CORS-Probleme zu vermeiden)\n   */\n  async function searchAddressSuggestions(query) {\n    if (query.trim().length < 3) {\n      return [];\n    }\n    try {\n      // √úber Backend-Endpoint suchen\n      const API_URL = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL || '';\n      const encodedQuery = encodeURIComponent(query);\n      const url = `${API_URL}/api/geocoding/search?query=${encodedQuery}`;\n      console.log('üîç Searching addresses via backend:', query);\n      const response = await fetch(url);\n      if (!response.ok) {\n        console.error('‚ùå Address search API error:', response.status);\n        return [];\n      }\n      const data = await response.json();\n      console.log('‚úÖ Found', data.length, 'address suggestions');\n      return data;\n    } catch (error) {\n      console.error('‚ùå Address search error:', error);\n      return [];\n    }\n  }\n});","lineCount":84,"map":[[7,2,23,0,"exports"],[7,9,23,0],[7,10,23,0,"geocodeAddress"],[7,24,23,0],[7,27,23,0,"geocodeAddress"],[7,41,23,0],[8,2,78,0,"exports"],[8,9,78,0],[8,10,78,0,"searchAddressSuggestions"],[8,34,78,0],[8,37,78,0,"searchAddressSuggestions"],[8,61,78,0],[9,2,108,1],[9,6,108,1,"_expoVirtualEnv"],[9,21,108,1],[9,24,108,1,"require"],[9,31,108,1],[9,32,108,1,"_dependencyMap"],[9,46,108,1],[10,2,1,0],[12,2,19,0],[13,0,20,0],[14,0,21,0],[15,0,22,0],[16,2,23,7],[16,17,23,22,"geocodeAddress"],[16,31,23,36,"geocodeAddress"],[16,32,24,2,"street"],[16,38,24,16],[16,40,25,2,"houseNumber"],[16,51,25,21],[16,53,26,2,"postalCode"],[16,63,26,20],[16,65,27,2,"city"],[16,69,27,14],[16,71,28,35],[17,4,29,2],[17,8,29,6],[18,6,30,4],[19,6,31,4],[19,12,31,10,"fullAddress"],[19,23,31,21],[19,26,31,24],[19,29,31,27,"street"],[19,35,31,33],[19,39,31,37,"houseNumber"],[19,50,31,48],[19,55,31,53,"postalCode"],[19,65,31,63],[19,69,31,67,"city"],[19,73,31,71],[19,84,31,82],[20,6,33,4,"console"],[20,13,33,11],[20,14,33,12,"log"],[20,17,33,15],[20,18,33,16],[20,42,33,40],[20,44,33,42,"fullAddress"],[20,55,33,53],[20,56,33,54],[21,6,35,4],[21,12,35,10,"encodedAddress"],[21,26,35,24],[21,29,35,27,"encodeURIComponent"],[21,47,35,45],[21,48,35,46,"fullAddress"],[21,59,35,57],[21,60,35,58],[22,6,36,4],[22,12,36,10,"url"],[22,15,36,13],[22,18,36,16],[22,66,36,64,"encodedAddress"],[22,80,36,78],[22,119,36,117],[23,6,38,4],[23,12,38,10,"response"],[23,20,38,18],[23,23,38,21],[23,29,38,27,"fetch"],[23,34,38,32],[23,35,38,33,"url"],[23,38,38,36],[23,40,38,38],[24,8,39,6,"headers"],[24,15,39,13],[24,17,39,15],[25,10,40,8],[25,22,40,20],[25,24,40,22],[25,44,40,42],[25,45,40,43],[26,8,41,6],[27,6,42,4],[27,7,42,5],[27,8,42,6],[28,6,44,4],[28,10,44,8],[28,11,44,9,"response"],[28,19,44,17],[28,20,44,18,"ok"],[28,22,44,20],[28,24,44,22],[29,8,45,6,"console"],[29,15,45,13],[29,16,45,14,"error"],[29,21,45,19],[29,22,45,20],[29,46,45,44],[29,48,45,46,"response"],[29,56,45,54],[29,57,45,55,"status"],[29,63,45,61],[29,64,45,62],[30,8,46,6],[30,15,46,13],[30,19,46,17],[31,6,47,4],[32,6,49,4],[32,12,49,10,"data"],[32,16,49,14],[32,19,49,17],[32,25,49,23,"response"],[32,33,49,31],[32,34,49,32,"json"],[32,38,49,36],[32,39,49,37],[32,40,49,38],[33,6,51,4],[33,10,51,8,"data"],[33,14,51,12],[33,15,51,13,"length"],[33,21,51,19],[33,26,51,24],[33,27,51,25],[33,29,51,27],[34,8,52,6,"console"],[34,15,52,13],[34,16,52,14,"log"],[34,19,52,17],[34,20,52,18],[34,56,52,54],[34,58,52,56,"fullAddress"],[34,69,52,67],[34,70,52,68],[35,8,53,6],[35,15,53,13],[35,19,53,17],[36,6,54,4],[37,6,56,4],[37,12,56,10,"result"],[37,18,56,16],[37,21,56,19,"data"],[37,25,56,23],[37,26,56,24],[37,27,56,25],[37,28,56,26],[38,6,57,4],[38,12,57,10,"lat"],[38,15,57,13],[38,18,57,16,"parseFloat"],[38,28,57,26],[38,29,57,27,"result"],[38,35,57,33],[38,36,57,34,"lat"],[38,39,57,37],[38,40,57,38],[39,6,58,4],[39,12,58,10,"lon"],[39,15,58,13],[39,18,58,16,"parseFloat"],[39,28,58,26],[39,29,58,27,"result"],[39,35,58,33],[39,36,58,34,"lon"],[39,39,58,37],[39,40,58,38],[40,6,60,4,"console"],[40,13,60,11],[40,14,60,12,"log"],[40,17,60,15],[40,18,60,16],[40,43,60,41],[40,45,60,43],[41,8,60,45,"lat"],[41,11,60,48],[42,8,60,50,"lon"],[42,11,60,53],[43,8,60,55,"displayName"],[43,19,60,66],[43,21,60,68,"result"],[43,27,60,74],[43,28,60,75,"display_name"],[44,6,60,88],[44,7,60,89],[44,8,60,90],[45,6,62,4],[45,13,62,11],[46,8,63,6,"lat"],[46,11,63,9],[47,8,64,6,"lon"],[47,11,64,9],[48,8,65,6,"displayName"],[48,19,65,17],[48,21,65,19,"result"],[48,27,65,25],[48,28,65,26,"display_name"],[49,6,66,4],[49,7,66,5],[50,4,67,2],[50,5,67,3],[50,6,67,4],[50,13,67,11,"error"],[50,18,67,16],[50,20,67,18],[51,6,68,4,"console"],[51,13,68,11],[51,14,68,12,"error"],[51,19,68,17],[51,20,68,18],[51,40,68,38],[51,42,68,40,"error"],[51,47,68,45],[51,48,68,46],[52,6,69,4],[52,13,69,11],[52,17,69,15],[53,4,70,2],[54,2,71,0],[56,2,73,0],[57,0,74,0],[58,0,75,0],[59,0,76,0],[60,0,77,0],[61,2,78,7],[61,17,78,22,"searchAddressSuggestions"],[61,41,78,46,"searchAddressSuggestions"],[61,42,79,2,"query"],[61,47,79,15],[61,49,80,32],[62,4,81,2],[62,8,81,6,"query"],[62,13,81,11],[62,14,81,12,"trim"],[62,18,81,16],[62,19,81,17],[62,20,81,18],[62,21,81,19,"length"],[62,27,81,25],[62,30,81,28],[62,31,81,29],[62,33,81,31],[63,6,82,4],[63,13,82,11],[63,15,82,13],[64,4,83,2],[65,4,85,2],[65,8,85,6],[66,6,86,4],[67,6,87,4],[67,12,87,10,"API_URL"],[67,19,87,17],[67,22,87,20,"_expoVirtualEnv"],[67,37,87,20],[67,38,87,20,"env"],[67,41,87,20],[67,42,87,20,"EXPO_PUBLIC_BACKEND_URL"],[67,65,87,20],[67,69,87,59],[67,71,87,61],[68,6,88,4],[68,12,88,10,"encodedQuery"],[68,24,88,22],[68,27,88,25,"encodeURIComponent"],[68,45,88,43],[68,46,88,44,"query"],[68,51,88,49],[68,52,88,50],[69,6,89,4],[69,12,89,10,"url"],[69,15,89,13],[69,18,89,16],[69,21,89,19,"API_URL"],[69,28,89,26],[69,59,89,57,"encodedQuery"],[69,71,89,69],[69,73,89,71],[70,6,91,4,"console"],[70,13,91,11],[70,14,91,12,"log"],[70,17,91,15],[70,18,91,16],[70,55,91,53],[70,57,91,55,"query"],[70,62,91,60],[70,63,91,61],[71,6,93,4],[71,12,93,10,"response"],[71,20,93,18],[71,23,93,21],[71,29,93,27,"fetch"],[71,34,93,32],[71,35,93,33,"url"],[71,38,93,36],[71,39,93,37],[72,6,95,4],[72,10,95,8],[72,11,95,9,"response"],[72,19,95,17],[72,20,95,18,"ok"],[72,22,95,20],[72,24,95,22],[73,8,96,6,"console"],[73,15,96,13],[73,16,96,14,"error"],[73,21,96,19],[73,22,96,20],[73,51,96,49],[73,53,96,51,"response"],[73,61,96,59],[73,62,96,60,"status"],[73,68,96,66],[73,69,96,67],[74,8,97,6],[74,15,97,13],[74,17,97,15],[75,6,98,4],[76,6,100,4],[76,12,100,10,"data"],[76,16,100,14],[76,19,100,17],[76,25,100,23,"response"],[76,33,100,31],[76,34,100,32,"json"],[76,38,100,36],[76,39,100,37],[76,40,100,38],[77,6,101,4,"console"],[77,13,101,11],[77,14,101,12,"log"],[77,17,101,15],[77,18,101,16],[77,27,101,25],[77,29,101,27,"data"],[77,33,101,31],[77,34,101,32,"length"],[77,40,101,38],[77,42,101,40],[77,63,101,61],[77,64,101,62],[78,6,103,4],[78,13,103,11,"data"],[78,17,103,15],[79,4,104,2],[79,5,104,3],[79,6,104,4],[79,13,104,11,"error"],[79,18,104,16],[79,20,104,18],[80,6,105,4,"console"],[80,13,105,11],[80,14,105,12,"error"],[80,19,105,17],[80,20,105,18],[80,45,105,43],[80,47,105,45,"error"],[80,52,105,50],[80,53,105,51],[81,6,106,4],[81,13,106,11],[81,15,106,13],[82,4,107,2],[83,2,108,0],[84,0,108,1],[84,3]],"functionMap":{"names":["<global>","geocodeAddress","searchAddressSuggestions"],"mappings":"AAA;OCsB;CDgD;OEO;CF8B"},"hasCjsExports":false},"type":"js/module"}]}