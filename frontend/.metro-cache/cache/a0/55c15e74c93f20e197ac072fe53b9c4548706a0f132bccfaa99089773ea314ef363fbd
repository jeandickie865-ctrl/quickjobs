{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"../utils/storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":43,"index":133}}],"key":"rswhtWQFlk40P6/ZSXiz3NZSC0I=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _utilsStorage = require(_dependencyMap[1], \"../utils/storage\");\n  var _reactJsxDevRuntime = require(_dependencyMap[2], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(null);\n  const USER_KEY = '@shiftmatch:user';\n  const AUTH_USERS_KEY = '@shiftmatch:auth_users';\n  const AuthProvider = ({\n    children\n  }) => {\n    _s();\n    const [user, setUser] = (0, _react.useState)(null);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      loadUser();\n    }, []);\n    const loadUser = async () => {\n      try {\n        const storedUser = await _utilsStorage.storage.getItem(USER_KEY);\n        setUser(storedUser);\n      } catch (error) {\n        console.error('Error loading user:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const getAuthUsers = async () => {\n      const users = await _utilsStorage.storage.getItem(AUTH_USERS_KEY);\n      return users || [];\n    };\n    const saveAuthUsers = async users => {\n      await _utilsStorage.storage.setItem(AUTH_USERS_KEY, users);\n    };\n    const signUp = async (email, password) => {\n      const users = await getAuthUsers();\n\n      // Check if email already exists\n      if (users.some(u => u.email === email)) {\n        throw new Error('E-Mail bereits registriert');\n      }\n\n      // Create new user\n      const newAuthUser = {\n        id: `u-${Date.now()}`,\n        email,\n        password // In production, hash this!\n      };\n      users.push(newAuthUser);\n      await saveAuthUsers(users);\n\n      // Set current user (without role yet)\n      const currentUser = {\n        id: newAuthUser.id,\n        email: newAuthUser.email\n      };\n      setUser(currentUser);\n      await _utilsStorage.storage.setItem(USER_KEY, currentUser);\n    };\n    const signIn = async (email, password) => {\n      const users = await getAuthUsers();\n      const authUser = users.find(u => u.email === email && u.password === password);\n      if (!authUser) {\n        throw new Error('Falsche E-Mail oder Passwort');\n      }\n      const currentUser = {\n        id: authUser.id,\n        email: authUser.email,\n        role: authUser.role\n      };\n      setUser(currentUser);\n      await _utilsStorage.storage.setItem(USER_KEY, currentUser);\n    };\n    const signOut = async () => {\n      setUser(null);\n      await _utilsStorage.storage.removeItem(USER_KEY);\n    };\n    const setRole = async role => {\n      if (!user) {\n        throw new Error('Kein User angemeldet');\n      }\n\n      // Update user in context\n      const updatedUser = {\n        ...user,\n        role\n      };\n      setUser(updatedUser);\n      await _utilsStorage.storage.setItem(USER_KEY, updatedUser);\n\n      // Update auth users storage\n      const users = await getAuthUsers();\n      const index = users.findIndex(u => u.id === user.id);\n      if (index !== -1) {\n        users[index].role = role;\n        await saveAuthUsers(users);\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        isLoading,\n        signUp,\n        signIn,\n        signOut,\n        setRole\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 5\n    }, this);\n  };\n  _s(AuthProvider, \"YajQB7LURzRD+QP5gw0+K2TZIWA=\");\n  _c = AuthProvider;\n  const useAuth = () => {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (!context) {\n      throw new Error('useAuth must be used within AuthProvider');\n    }\n    return context;\n  };\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":147,"map":[[10,2,33,0,"Object"],[10,8,33,0],[10,9,33,0,"defineProperty"],[10,23,33,0],[10,24,33,0,"exports"],[10,31,33,0],[11,4,33,0,"enumerable"],[11,14,33,0],[12,4,33,0,"get"],[12,7,33,0],[12,18,33,0,"get"],[12,19,33,0],[13,6,33,0],[13,13,33,0,"AuthProvider"],[13,25,33,0],[14,4,33,0],[15,2,33,0],[16,2,136,0,"Object"],[16,8,136,0],[16,9,136,0,"defineProperty"],[16,23,136,0],[16,24,136,0,"exports"],[16,31,136,0],[17,4,136,0,"enumerable"],[17,14,136,0],[18,4,136,0,"get"],[18,7,136,0],[18,18,136,0,"get"],[18,19,136,0],[19,6,136,0],[19,13,136,0,"useAuth"],[19,20,136,0],[20,4,136,0],[21,2,136,0],[22,2,1,0],[22,6,1,0,"_react"],[22,12,1,0],[22,15,1,0,"require"],[22,22,1,0],[22,23,1,0,"_dependencyMap"],[22,37,1,0],[23,2,2,0],[23,6,2,0,"_utilsStorage"],[23,19,2,0],[23,22,2,0,"require"],[23,29,2,0],[23,30,2,0,"_dependencyMap"],[23,44,2,0],[24,2,2,43],[24,6,2,43,"_reactJsxDevRuntime"],[24,25,2,43],[24,28,2,43,"require"],[24,35,2,43],[24,36,2,43,"_dependencyMap"],[24,50,2,43],[25,2,21,0],[25,8,21,6,"AuthContext"],[25,19,21,17],[25,35,21,20],[25,39,21,20,"createContext"],[25,45,21,33],[25,46,21,33,"createContext"],[25,59,21,33],[25,61,21,59],[25,65,21,63],[25,66,21,64],[26,2,23,0],[26,8,23,6,"USER_KEY"],[26,16,23,14],[26,19,23,17],[26,37,23,35],[27,2,24,0],[27,8,24,6,"AUTH_USERS_KEY"],[27,22,24,20],[27,25,24,23],[27,49,24,47],[28,2,33,7],[28,8,33,13,"AuthProvider"],[28,20,33,60],[28,23,33,63,"AuthProvider"],[28,24,33,64],[29,4,33,66,"children"],[30,2,33,75],[30,3,33,76],[30,8,33,81],[31,4,33,81,"_s"],[31,6,33,81],[32,4,34,2],[32,10,34,8],[32,11,34,9,"user"],[32,15,34,13],[32,17,34,15,"setUser"],[32,24,34,22],[32,25,34,23],[32,28,34,26],[32,32,34,26,"useState"],[32,38,34,34],[32,39,34,34,"useState"],[32,47,34,34],[32,49,34,48],[32,53,34,52],[32,54,34,53],[33,4,35,2],[33,10,35,8],[33,11,35,9,"isLoading"],[33,20,35,18],[33,22,35,20,"setIsLoading"],[33,34,35,32],[33,35,35,33],[33,38,35,36],[33,42,35,36,"useState"],[33,48,35,44],[33,49,35,44,"useState"],[33,57,35,44],[33,59,35,45],[33,63,35,49],[33,64,35,50],[34,4,37,2],[34,8,37,2,"useEffect"],[34,14,37,11],[34,15,37,11,"useEffect"],[34,24,37,11],[34,26,37,12],[34,32,37,18],[35,6,38,4,"loadUser"],[35,14,38,12],[35,15,38,13],[35,16,38,14],[36,4,39,2],[36,5,39,3],[36,7,39,5],[36,9,39,7],[36,10,39,8],[37,4,41,2],[37,10,41,8,"loadUser"],[37,18,41,16],[37,21,41,19],[37,27,41,19,"loadUser"],[37,28,41,19],[37,33,41,31],[38,6,42,4],[38,10,42,8],[39,8,43,6],[39,14,43,12,"storedUser"],[39,24,43,22],[39,27,43,25],[39,33,43,31,"storage"],[39,46,43,38],[39,47,43,38,"storage"],[39,54,43,38],[39,55,43,39,"getItem"],[39,62,43,46],[39,63,43,53,"USER_KEY"],[39,71,43,61],[39,72,43,62],[40,8,44,6,"setUser"],[40,15,44,13],[40,16,44,14,"storedUser"],[40,26,44,24],[40,27,44,25],[41,6,45,4],[41,7,45,5],[41,8,45,6],[41,15,45,13,"error"],[41,20,45,18],[41,22,45,20],[42,8,46,6,"console"],[42,15,46,13],[42,16,46,14,"error"],[42,21,46,19],[42,22,46,20],[42,43,46,41],[42,45,46,43,"error"],[42,50,46,48],[42,51,46,49],[43,6,47,4],[43,7,47,5],[43,16,47,14],[44,8,48,6,"setIsLoading"],[44,20,48,18],[44,21,48,19],[44,26,48,24],[44,27,48,25],[45,6,49,4],[46,4,50,2],[46,5,50,3],[47,4,52,2],[47,10,52,8,"getAuthUsers"],[47,22,52,20],[47,25,52,23],[47,31,52,23,"getAuthUsers"],[47,32,52,23],[47,37,52,62],[48,6,53,4],[48,12,53,10,"users"],[48,17,53,15],[48,20,53,18],[48,26,53,24,"storage"],[48,39,53,31],[48,40,53,31,"storage"],[48,47,53,31],[48,48,53,32,"getItem"],[48,55,53,39],[48,56,53,58,"AUTH_USERS_KEY"],[48,70,53,72],[48,71,53,73],[49,6,54,4],[49,13,54,11,"users"],[49,18,54,16],[49,22,54,20],[49,24,54,22],[50,4,55,2],[50,5,55,3],[51,4,57,2],[51,10,57,8,"saveAuthUsers"],[51,23,57,21],[51,26,57,24],[51,32,57,31,"users"],[51,37,57,54],[51,41,57,74],[52,6,58,4],[52,12,58,10,"storage"],[52,25,58,17],[52,26,58,17,"storage"],[52,33,58,17],[52,34,58,18,"setItem"],[52,41,58,25],[52,42,58,26,"AUTH_USERS_KEY"],[52,56,58,40],[52,58,58,42,"users"],[52,63,58,47],[52,64,58,48],[53,4,59,2],[53,5,59,3],[54,4,61,2],[54,10,61,8,"signUp"],[54,16,61,14],[54,19,61,17],[54,25,61,17,"signUp"],[54,26,61,24,"email"],[54,31,61,37],[54,33,61,39,"password"],[54,41,61,55],[54,46,61,75],[55,6,62,4],[55,12,62,10,"users"],[55,17,62,15],[55,20,62,18],[55,26,62,24,"getAuthUsers"],[55,38,62,36],[55,39,62,37],[55,40,62,38],[57,6,64,4],[58,6,65,4],[58,10,65,8,"users"],[58,15,65,13],[58,16,65,14,"some"],[58,20,65,18],[58,21,65,19,"u"],[58,22,65,20],[58,26,65,24,"u"],[58,27,65,25],[58,28,65,26,"email"],[58,33,65,31],[58,38,65,36,"email"],[58,43,65,41],[58,44,65,42],[58,46,65,44],[59,8,66,6],[59,14,66,12],[59,18,66,16,"Error"],[59,23,66,21],[59,24,66,22],[59,52,66,50],[59,53,66,51],[60,6,67,4],[62,6,69,4],[63,6,70,4],[63,12,70,10,"newAuthUser"],[63,23,70,37],[63,26,70,40],[64,8,71,6,"id"],[64,10,71,8],[64,12,71,10],[64,17,71,15,"Date"],[64,21,71,19],[64,22,71,20,"now"],[64,25,71,23],[64,26,71,24],[64,27,71,25],[64,29,71,27],[65,8,72,6,"email"],[65,13,72,11],[66,8,73,6,"password"],[66,16,73,14],[66,17,73,16],[67,6,74,4],[67,7,74,5],[68,6,76,4,"users"],[68,11,76,9],[68,12,76,10,"push"],[68,16,76,14],[68,17,76,15,"newAuthUser"],[68,28,76,26],[68,29,76,27],[69,6,77,4],[69,12,77,10,"saveAuthUsers"],[69,25,77,23],[69,26,77,24,"users"],[69,31,77,29],[69,32,77,30],[71,6,79,4],[72,6,80,4],[72,12,80,10,"currentUser"],[72,23,80,27],[72,26,80,30],[73,8,81,6,"id"],[73,10,81,8],[73,12,81,10,"newAuthUser"],[73,23,81,21],[73,24,81,22,"id"],[73,26,81,24],[74,8,82,6,"email"],[74,13,82,11],[74,15,82,13,"newAuthUser"],[74,26,82,24],[74,27,82,25,"email"],[75,6,83,4],[75,7,83,5],[76,6,84,4,"setUser"],[76,13,84,11],[76,14,84,12,"currentUser"],[76,25,84,23],[76,26,84,24],[77,6,85,4],[77,12,85,10,"storage"],[77,25,85,17],[77,26,85,17,"storage"],[77,33,85,17],[77,34,85,18,"setItem"],[77,41,85,25],[77,42,85,26,"USER_KEY"],[77,50,85,34],[77,52,85,36,"currentUser"],[77,63,85,47],[77,64,85,48],[78,4,86,2],[78,5,86,3],[79,4,88,2],[79,10,88,8,"signIn"],[79,16,88,14],[79,19,88,17],[79,25,88,17,"signIn"],[79,26,88,24,"email"],[79,31,88,37],[79,33,88,39,"password"],[79,41,88,55],[79,46,88,75],[80,6,89,4],[80,12,89,10,"users"],[80,17,89,15],[80,20,89,18],[80,26,89,24,"getAuthUsers"],[80,38,89,36],[80,39,89,37],[80,40,89,38],[81,6,91,4],[81,12,91,10,"authUser"],[81,20,91,18],[81,23,91,21,"users"],[81,28,91,26],[81,29,91,27,"find"],[81,33,91,31],[81,34,91,32,"u"],[81,35,91,33],[81,39,91,37,"u"],[81,40,91,38],[81,41,91,39,"email"],[81,46,91,44],[81,51,91,49,"email"],[81,56,91,54],[81,60,91,58,"u"],[81,61,91,59],[81,62,91,60,"password"],[81,70,91,68],[81,75,91,73,"password"],[81,83,91,81],[81,84,91,82],[82,6,92,4],[82,10,92,8],[82,11,92,9,"authUser"],[82,19,92,17],[82,21,92,19],[83,8,93,6],[83,14,93,12],[83,18,93,16,"Error"],[83,23,93,21],[83,24,93,22],[83,54,93,52],[83,55,93,53],[84,6,94,4],[85,6,96,4],[85,12,96,10,"currentUser"],[85,23,96,27],[85,26,96,30],[86,8,97,6,"id"],[86,10,97,8],[86,12,97,10,"authUser"],[86,20,97,18],[86,21,97,19,"id"],[86,23,97,21],[87,8,98,6,"email"],[87,13,98,11],[87,15,98,13,"authUser"],[87,23,98,21],[87,24,98,22,"email"],[87,29,98,27],[88,8,99,6,"role"],[88,12,99,10],[88,14,99,12,"authUser"],[88,22,99,20],[88,23,99,21,"role"],[89,6,100,4],[89,7,100,5],[90,6,101,4,"setUser"],[90,13,101,11],[90,14,101,12,"currentUser"],[90,25,101,23],[90,26,101,24],[91,6,102,4],[91,12,102,10,"storage"],[91,25,102,17],[91,26,102,17,"storage"],[91,33,102,17],[91,34,102,18,"setItem"],[91,41,102,25],[91,42,102,26,"USER_KEY"],[91,50,102,34],[91,52,102,36,"currentUser"],[91,63,102,47],[91,64,102,48],[92,4,103,2],[92,5,103,3],[93,4,105,2],[93,10,105,8,"signOut"],[93,17,105,15],[93,20,105,18],[93,26,105,18,"signOut"],[93,27,105,18],[93,32,105,45],[94,6,106,4,"setUser"],[94,13,106,11],[94,14,106,12],[94,18,106,16],[94,19,106,17],[95,6,107,4],[95,12,107,10,"storage"],[95,25,107,17],[95,26,107,17,"storage"],[95,33,107,17],[95,34,107,18,"removeItem"],[95,44,107,28],[95,45,107,29,"USER_KEY"],[95,53,107,37],[95,54,107,38],[96,4,108,2],[96,5,108,3],[97,4,110,2],[97,10,110,8,"setRole"],[97,17,110,15],[97,20,110,18],[97,26,110,25,"role"],[97,30,110,39],[97,34,110,59],[98,6,111,4],[98,10,111,8],[98,11,111,9,"user"],[98,15,111,13],[98,17,111,15],[99,8,112,6],[99,14,112,12],[99,18,112,16,"Error"],[99,23,112,21],[99,24,112,22],[99,46,112,44],[99,47,112,45],[100,6,113,4],[102,6,115,4],[103,6,116,4],[103,12,116,10,"updatedUser"],[103,23,116,27],[103,26,116,30],[104,8,116,32],[104,11,116,35,"user"],[104,15,116,39],[105,8,116,41,"role"],[106,6,116,46],[106,7,116,47],[107,6,117,4,"setUser"],[107,13,117,11],[107,14,117,12,"updatedUser"],[107,25,117,23],[107,26,117,24],[108,6,118,4],[108,12,118,10,"storage"],[108,25,118,17],[108,26,118,17,"storage"],[108,33,118,17],[108,34,118,18,"setItem"],[108,41,118,25],[108,42,118,26,"USER_KEY"],[108,50,118,34],[108,52,118,36,"updatedUser"],[108,63,118,47],[108,64,118,48],[110,6,120,4],[111,6,121,4],[111,12,121,10,"users"],[111,17,121,15],[111,20,121,18],[111,26,121,24,"getAuthUsers"],[111,38,121,36],[111,39,121,37],[111,40,121,38],[112,6,122,4],[112,12,122,10,"index"],[112,17,122,15],[112,20,122,18,"users"],[112,25,122,23],[112,26,122,24,"findIndex"],[112,35,122,33],[112,36,122,34,"u"],[112,37,122,35],[112,41,122,39,"u"],[112,42,122,40],[112,43,122,41,"id"],[112,45,122,43],[112,50,122,48,"user"],[112,54,122,52],[112,55,122,53,"id"],[112,57,122,55],[112,58,122,56],[113,6,123,4],[113,10,123,8,"index"],[113,15,123,13],[113,20,123,18],[113,21,123,19],[113,22,123,20],[113,24,123,22],[114,8,124,6,"users"],[114,13,124,11],[114,14,124,12,"index"],[114,19,124,17],[114,20,124,18],[114,21,124,19,"role"],[114,25,124,23],[114,28,124,26,"role"],[114,32,124,30],[115,8,125,6],[115,14,125,12,"saveAuthUsers"],[115,27,125,25],[115,28,125,26,"users"],[115,33,125,31],[115,34,125,32],[116,6,126,4],[117,4,127,2],[117,5,127,3],[118,4,129,2],[118,24,130,4],[118,28,130,4,"_reactJsxDevRuntime"],[118,47,130,4],[118,48,130,4,"jsxDEV"],[118,54,130,4],[118,56,130,5,"AuthContext"],[118,67,130,16],[118,68,130,17,"Provider"],[118,76,130,25],[119,6,130,26,"value"],[119,11,130,31],[119,13,130,33],[120,8,130,35,"user"],[120,12,130,39],[121,8,130,41,"isLoading"],[121,17,130,50],[122,8,130,52,"signUp"],[122,14,130,58],[123,8,130,60,"signIn"],[123,14,130,66],[124,8,130,68,"signOut"],[124,15,130,75],[125,8,130,77,"setRole"],[126,6,130,85],[126,7,130,87],[127,6,130,87,"children"],[127,14,130,87],[127,16,131,7,"children"],[128,4,131,15],[129,6,131,15,"fileName"],[129,14,131,15],[129,16,131,15,"_jsxFileName"],[129,28,131,15],[130,6,131,15,"lineNumber"],[130,16,131,15],[131,6,131,15,"columnNumber"],[131,18,131,15],[132,4,131,15],[132,11,132,26],[132,12,132,27],[133,2,134,0],[133,3,134,1],[134,2,134,2,"_s"],[134,4,134,2],[134,5,33,13,"AuthProvider"],[134,17,33,60],[135,2,33,60,"_c"],[135,4,33,60],[135,7,33,13,"AuthProvider"],[135,19,33,60],[136,2,136,7],[136,8,136,13,"useAuth"],[136,15,136,20],[136,18,136,23,"useAuth"],[136,19,136,23],[136,24,136,47],[137,4,136,47,"_s2"],[137,7,136,47],[138,4,137,2],[138,10,137,8,"context"],[138,17,137,15],[138,20,137,18],[138,24,137,18,"useContext"],[138,30,137,28],[138,31,137,28,"useContext"],[138,41,137,28],[138,43,137,29,"AuthContext"],[138,54,137,40],[138,55,137,41],[139,4,138,2],[139,8,138,6],[139,9,138,7,"context"],[139,16,138,14],[139,18,138,16],[140,6,139,4],[140,12,139,10],[140,16,139,14,"Error"],[140,21,139,19],[140,22,139,20],[140,64,139,62],[140,65,139,63],[141,4,140,2],[142,4,141,2],[142,11,141,9,"context"],[142,18,141,16],[143,2,142,0],[143,3,142,1],[144,2,142,2,"_s2"],[144,5,142,2],[144,6,136,13,"useAuth"],[144,13,136,20],[145,2,136,20],[145,6,136,20,"_c"],[145,8,136,20],[146,2,136,20,"$RefreshReg$"],[146,14,136,20],[146,15,136,20,"_c"],[146,17,136,20],[147,0,136,20],[147,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadUser","getAuthUsers","saveAuthUsers","signUp","users.some$argument_0","signIn","users.find$argument_0","signOut","setRole","users.findIndex$argument_0","useAuth"],"mappings":"AAA;+DCgC;YCI;GDE;mBEE;GFS;uBGE;GHG;wBIE;GJE;iBKE;mBCI,sBD;GLqB;iBOE;gCCG,iDD;GPY;kBSE;GTG;kBUE;kCCY,qBD;GVK;CDO;uBaE;CbM"},"hasCjsExports":false},"type":"js/module"}]}