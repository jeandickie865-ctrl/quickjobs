{"dependencies":[{"name":"./storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":24},"end":{"line":2,"column":45,"index":69}}],"key":"3rLtLV8J3gSw9c8Ep8Wpc3w/Yxg=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.getReviews = getReviews;\n  exports.addReview = addReview;\n  exports.getReviewsForWorker = getReviewsForWorker;\n  exports.getReviewForJob = getReviewForJob;\n  exports.getReviewsForEmployer = getReviewsForEmployer;\n  exports.calculateAverageRating = calculateAverageRating;\n  var _storage = require(_dependencyMap[0], \"./storage\");\n  // utils/reviewStore.ts\n\n  const REVIEW_KEY = '@shiftmatch:reviews';\n\n  /**\n   * Alle Reviews aus AsyncStorage laden\n   */\n  async function getReviews() {\n    const reviews = await (0, _storage.getItem)(REVIEW_KEY);\n    return reviews ?? [];\n  }\n\n  /**\n   * Neue Review hinzufügen\n   * Verhindert Duplikate: Wenn bereits eine Review für jobId + workerId + employerId existiert,\n   * wird diese überschrieben\n   */\n  async function addReview(review) {\n    const reviews = await getReviews();\n\n    // Prüfen ob bereits eine Review für diesen Job + Worker + Employer existiert\n    const existingIndex = reviews.findIndex(r => r.jobId === review.jobId && r.workerId === review.workerId && r.employerId === review.employerId);\n    if (existingIndex >= 0) {\n      // Existierende Review überschreiben\n      console.log('⚠️ Review existiert bereits, wird überschrieben');\n      reviews[existingIndex] = review;\n    } else {\n      // Neue Review hinzufügen\n      reviews.push(review);\n    }\n    await (0, _storage.setItem)(REVIEW_KEY, reviews);\n    console.log('✅ Review gespeichert:', review);\n  }\n\n  /**\n   * Alle Reviews für einen bestimmten Worker laden\n   */\n  async function getReviewsForWorker(workerId) {\n    const reviews = await getReviews();\n    return reviews.filter(r => r.workerId === workerId);\n  }\n\n  /**\n   * Prüfen ob für einen Job bereits eine Review existiert\n   */\n  async function getReviewForJob(jobId, workerId, employerId) {\n    const reviews = await getReviews();\n    return reviews.find(r => r.jobId === jobId && r.workerId === workerId && r.employerId === employerId);\n  }\n\n  /**\n   * Alle Reviews für einen bestimmten Employer laden\n   */\n  async function getReviewsForEmployer(employerId) {\n    const reviews = await getReviews();\n    return reviews.filter(r => r.employerId === employerId);\n  }\n\n  /**\n   * Durchschnittliche Bewertung für einen Worker berechnen\n   */\n  function calculateAverageRating(reviews) {\n    if (reviews.length === 0) return 0;\n    const sum = reviews.reduce((acc, r) => acc + r.rating, 0);\n    return sum / reviews.length;\n  }\n});","lineCount":80,"map":[[7,2,10,0,"exports"],[7,9,10,0],[7,10,10,0,"getReviews"],[7,20,10,0],[7,23,10,0,"getReviews"],[7,33,10,0],[8,2,20,0,"exports"],[8,9,20,0],[8,10,20,0,"addReview"],[8,19,20,0],[8,22,20,0,"addReview"],[8,31,20,0],[9,2,47,0,"exports"],[9,9,47,0],[9,10,47,0,"getReviewsForWorker"],[9,29,47,0],[9,32,47,0,"getReviewsForWorker"],[9,51,47,0],[10,2,55,0,"exports"],[10,9,55,0],[10,10,55,0,"getReviewForJob"],[10,25,55,0],[10,28,55,0,"getReviewForJob"],[10,43,55,0],[11,2,72,0,"exports"],[11,9,72,0],[11,10,72,0,"getReviewsForEmployer"],[11,31,72,0],[11,34,72,0,"getReviewsForEmployer"],[11,55,72,0],[12,2,80,0,"exports"],[12,9,80,0],[12,10,80,0,"calculateAverageRating"],[12,32,80,0],[12,35,80,0,"calculateAverageRating"],[12,57,80,0],[13,2,2,0],[13,6,2,0,"_storage"],[13,14,2,0],[13,17,2,0,"require"],[13,24,2,0],[13,25,2,0,"_dependencyMap"],[13,39,2,0],[14,2,1,0],[16,2,5,0],[16,8,5,6,"REVIEW_KEY"],[16,18,5,16],[16,21,5,19],[16,42,5,40],[18,2,7,0],[19,0,8,0],[20,0,9,0],[21,2,10,7],[21,17,10,22,"getReviews"],[21,27,10,32,"getReviews"],[21,28,10,32],[21,30,10,54],[22,4,11,2],[22,10,11,8,"reviews"],[22,17,11,15],[22,20,11,18],[22,26,11,24],[22,30,11,24,"getItem"],[22,38,11,31],[22,39,11,31,"getItem"],[22,46,11,31],[22,48,11,42,"REVIEW_KEY"],[22,58,11,52],[22,59,11,53],[23,4,12,2],[23,11,12,9,"reviews"],[23,18,12,16],[23,22,12,20],[23,24,12,22],[24,2,13,0],[26,2,15,0],[27,0,16,0],[28,0,17,0],[29,0,18,0],[30,0,19,0],[31,2,20,7],[31,17,20,22,"addReview"],[31,26,20,31,"addReview"],[31,27,20,32,"review"],[31,33,20,46],[31,35,20,63],[32,4,21,2],[32,10,21,8,"reviews"],[32,17,21,15],[32,20,21,18],[32,26,21,24,"getReviews"],[32,36,21,34],[32,37,21,35],[32,38,21,36],[34,4,23,2],[35,4,24,2],[35,10,24,8,"existingIndex"],[35,23,24,21],[35,26,24,24,"reviews"],[35,33,24,31],[35,34,24,32,"findIndex"],[35,43,24,41],[35,44,25,5,"r"],[35,45,25,6],[35,49,26,6,"r"],[35,50,26,7],[35,51,26,8,"jobId"],[35,56,26,13],[35,61,26,18,"review"],[35,67,26,24],[35,68,26,25,"jobId"],[35,73,26,30],[35,77,27,6,"r"],[35,78,27,7],[35,79,27,8,"workerId"],[35,87,27,16],[35,92,27,21,"review"],[35,98,27,27],[35,99,27,28,"workerId"],[35,107,27,36],[35,111,28,6,"r"],[35,112,28,7],[35,113,28,8,"employerId"],[35,123,28,18],[35,128,28,23,"review"],[35,134,28,29],[35,135,28,30,"employerId"],[35,145,29,2],[35,146,29,3],[36,4,31,2],[36,8,31,6,"existingIndex"],[36,21,31,19],[36,25,31,23],[36,26,31,24],[36,28,31,26],[37,6,32,4],[38,6,33,4,"console"],[38,13,33,11],[38,14,33,12,"log"],[38,17,33,15],[38,18,33,16],[38,67,33,65],[38,68,33,66],[39,6,34,4,"reviews"],[39,13,34,11],[39,14,34,12,"existingIndex"],[39,27,34,25],[39,28,34,26],[39,31,34,29,"review"],[39,37,34,35],[40,4,35,2],[40,5,35,3],[40,11,35,9],[41,6,36,4],[42,6,37,4,"reviews"],[42,13,37,11],[42,14,37,12,"push"],[42,18,37,16],[42,19,37,17,"review"],[42,25,37,23],[42,26,37,24],[43,4,38,2],[44,4,40,2],[44,10,40,8],[44,14,40,8,"setItem"],[44,22,40,15],[44,23,40,15,"setItem"],[44,30,40,15],[44,32,40,16,"REVIEW_KEY"],[44,42,40,26],[44,44,40,28,"reviews"],[44,51,40,35],[44,52,40,36],[45,4,41,2,"console"],[45,11,41,9],[45,12,41,10,"log"],[45,15,41,13],[45,16,41,14],[45,39,41,37],[45,41,41,39,"review"],[45,47,41,45],[45,48,41,46],[46,2,42,0],[48,2,44,0],[49,0,45,0],[50,0,46,0],[51,2,47,7],[51,17,47,22,"getReviewsForWorker"],[51,36,47,41,"getReviewsForWorker"],[51,37,47,42,"workerId"],[51,45,47,58],[51,47,47,79],[52,4,48,2],[52,10,48,8,"reviews"],[52,17,48,15],[52,20,48,18],[52,26,48,24,"getReviews"],[52,36,48,34],[52,37,48,35],[52,38,48,36],[53,4,49,2],[53,11,49,9,"reviews"],[53,18,49,16],[53,19,49,17,"filter"],[53,25,49,23],[53,26,49,25,"r"],[53,27,49,26],[53,31,49,31,"r"],[53,32,49,32],[53,33,49,33,"workerId"],[53,41,49,41],[53,46,49,46,"workerId"],[53,54,49,54],[53,55,49,55],[54,2,50,0],[56,2,52,0],[57,0,53,0],[58,0,54,0],[59,2,55,7],[59,17,55,22,"getReviewForJob"],[59,32,55,37,"getReviewForJob"],[59,33,56,2,"jobId"],[59,38,56,15],[59,40,57,2,"workerId"],[59,48,57,18],[59,50,58,2,"employerId"],[59,60,58,20],[59,62,59,31],[60,4,60,2],[60,10,60,8,"reviews"],[60,17,60,15],[60,20,60,18],[60,26,60,24,"getReviews"],[60,36,60,34],[60,37,60,35],[60,38,60,36],[61,4,61,2],[61,11,61,9,"reviews"],[61,18,61,16],[61,19,61,17,"find"],[61,23,61,21],[61,24,62,5,"r"],[61,25,62,6],[61,29,63,6,"r"],[61,30,63,7],[61,31,63,8,"jobId"],[61,36,63,13],[61,41,63,18,"jobId"],[61,46,63,23],[61,50,64,6,"r"],[61,51,64,7],[61,52,64,8,"workerId"],[61,60,64,16],[61,65,64,21,"workerId"],[61,73,64,29],[61,77,65,6,"r"],[61,78,65,7],[61,79,65,8,"employerId"],[61,89,65,18],[61,94,65,23,"employerId"],[61,104,66,2],[61,105,66,3],[62,2,67,0],[64,2,69,0],[65,0,70,0],[66,0,71,0],[67,2,72,7],[67,17,72,22,"getReviewsForEmployer"],[67,38,72,43,"getReviewsForEmployer"],[67,39,72,44,"employerId"],[67,49,72,62],[67,51,72,83],[68,4,73,2],[68,10,73,8,"reviews"],[68,17,73,15],[68,20,73,18],[68,26,73,24,"getReviews"],[68,36,73,34],[68,37,73,35],[68,38,73,36],[69,4,74,2],[69,11,74,9,"reviews"],[69,18,74,16],[69,19,74,17,"filter"],[69,25,74,23],[69,26,74,25,"r"],[69,27,74,26],[69,31,74,31,"r"],[69,32,74,32],[69,33,74,33,"employerId"],[69,43,74,43],[69,48,74,48,"employerId"],[69,58,74,58],[69,59,74,59],[70,2,75,0],[72,2,77,0],[73,0,78,0],[74,0,79,0],[75,2,80,7],[75,11,80,16,"calculateAverageRating"],[75,33,80,38,"calculateAverageRating"],[75,34,80,39,"reviews"],[75,41,80,56],[75,43,80,66],[76,4,81,2],[76,8,81,6,"reviews"],[76,15,81,13],[76,16,81,14,"length"],[76,22,81,20],[76,27,81,25],[76,28,81,26],[76,30,81,28],[76,37,81,35],[76,38,81,36],[77,4,82,2],[77,10,82,8,"sum"],[77,13,82,11],[77,16,82,14,"reviews"],[77,23,82,21],[77,24,82,22,"reduce"],[77,30,82,28],[77,31,82,29],[77,32,82,30,"acc"],[77,35,82,33],[77,37,82,35,"r"],[77,38,82,36],[77,43,82,41,"acc"],[77,46,82,44],[77,49,82,47,"r"],[77,50,82,48],[77,51,82,49,"rating"],[77,57,82,55],[77,59,82,57],[77,60,82,58],[77,61,82,59],[78,4,83,2],[78,11,83,9,"sum"],[78,14,83,12],[78,17,83,15,"reviews"],[78,24,83,22],[78,25,83,23,"length"],[78,31,83,29],[79,2,84,0],[80,0,84,1],[80,3]],"functionMap":{"names":["<global>","getReviews","addReview","reviews.findIndex$argument_0","getReviewsForWorker","reviews.filter$argument_0","getReviewForJob","reviews.find$argument_0","getReviewsForEmployer","calculateAverageRating","reviews.reduce$argument_0"],"mappings":"AAA;OCS;CDG;OEO;ICK;wCDG;CFc;OIK;wBCE,8BD;CJC;OMK;ICO;iCDG;CNE;OQK;wBHE,kCG;CRC;OSK;6BCE,0BD;CTE"},"hasCjsExports":false},"type":"js/module"}]}