{"dependencies":[{"name":"./storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":24},"end":{"line":2,"column":45,"index":69}}],"key":"3rLtLV8J3gSw9c8Ep8Wpc3w/Yxg=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.getReviews = getReviews;\n  exports.addReview = addReview;\n  exports.getReviewsForWorker = getReviewsForWorker;\n  exports.getReviewForJob = getReviewForJob;\n  exports.calculateAverageRating = calculateAverageRating;\n  var _storage = require(_dependencyMap[0], \"./storage\");\n  // utils/reviewStore.ts\n\n  const REVIEW_KEY = '@shiftmatch:reviews';\n\n  /**\n   * Alle Reviews aus AsyncStorage laden\n   */\n  async function getReviews() {\n    const reviews = await (0, _storage.getItem)(REVIEW_KEY);\n    return reviews ?? [];\n  }\n\n  /**\n   * Neue Review hinzufügen\n   * Verhindert Duplikate: Wenn bereits eine Review für jobId + workerId + employerId existiert,\n   * wird diese überschrieben\n   */\n  async function addReview(review) {\n    const reviews = await getReviews();\n\n    // Prüfen ob bereits eine Review für diesen Job + Worker + Employer existiert\n    const existingIndex = reviews.findIndex(r => r.jobId === review.jobId && r.workerId === review.workerId && r.employerId === review.employerId);\n    if (existingIndex >= 0) {\n      // Existierende Review überschreiben\n      console.log('⚠️ Review existiert bereits, wird überschrieben');\n      reviews[existingIndex] = review;\n    } else {\n      // Neue Review hinzufügen\n      reviews.push(review);\n    }\n    await (0, _storage.setItem)(REVIEW_KEY, reviews);\n    console.log('✅ Review gespeichert:', review);\n  }\n\n  /**\n   * Alle Reviews für einen bestimmten Worker laden\n   */\n  async function getReviewsForWorker(workerId) {\n    const reviews = await getReviews();\n    return reviews.filter(r => r.workerId === workerId);\n  }\n\n  /**\n   * Prüfen ob für einen Job bereits eine Review existiert\n   */\n  async function getReviewForJob(jobId, workerId, employerId) {\n    const reviews = await getReviews();\n    return reviews.find(r => r.jobId === jobId && r.workerId === workerId && r.employerId === employerId);\n  }\n\n  /**\n   * Durchschnittliche Bewertung für einen Worker berechnen\n   */\n  function calculateAverageRating(reviews) {\n    if (reviews.length === 0) return 0;\n    const sum = reviews.reduce((acc, r) => acc + r.rating, 0);\n    return sum / reviews.length;\n  }\n});","lineCount":71,"map":[[7,2,10,0,"exports"],[7,9,10,0],[7,10,10,0,"getReviews"],[7,20,10,0],[7,23,10,0,"getReviews"],[7,33,10,0],[8,2,20,0,"exports"],[8,9,20,0],[8,10,20,0,"addReview"],[8,19,20,0],[8,22,20,0,"addReview"],[8,31,20,0],[9,2,47,0,"exports"],[9,9,47,0],[9,10,47,0,"getReviewsForWorker"],[9,29,47,0],[9,32,47,0,"getReviewsForWorker"],[9,51,47,0],[10,2,55,0,"exports"],[10,9,55,0],[10,10,55,0,"getReviewForJob"],[10,25,55,0],[10,28,55,0,"getReviewForJob"],[10,43,55,0],[11,2,72,0,"exports"],[11,9,72,0],[11,10,72,0,"calculateAverageRating"],[11,32,72,0],[11,35,72,0,"calculateAverageRating"],[11,57,72,0],[12,2,2,0],[12,6,2,0,"_storage"],[12,14,2,0],[12,17,2,0,"require"],[12,24,2,0],[12,25,2,0,"_dependencyMap"],[12,39,2,0],[13,2,1,0],[15,2,5,0],[15,8,5,6,"REVIEW_KEY"],[15,18,5,16],[15,21,5,19],[15,42,5,40],[17,2,7,0],[18,0,8,0],[19,0,9,0],[20,2,10,7],[20,17,10,22,"getReviews"],[20,27,10,32,"getReviews"],[20,28,10,32],[20,30,10,54],[21,4,11,2],[21,10,11,8,"reviews"],[21,17,11,15],[21,20,11,18],[21,26,11,24],[21,30,11,24,"getItem"],[21,38,11,31],[21,39,11,31,"getItem"],[21,46,11,31],[21,48,11,42,"REVIEW_KEY"],[21,58,11,52],[21,59,11,53],[22,4,12,2],[22,11,12,9,"reviews"],[22,18,12,16],[22,22,12,20],[22,24,12,22],[23,2,13,0],[25,2,15,0],[26,0,16,0],[27,0,17,0],[28,0,18,0],[29,0,19,0],[30,2,20,7],[30,17,20,22,"addReview"],[30,26,20,31,"addReview"],[30,27,20,32,"review"],[30,33,20,46],[30,35,20,63],[31,4,21,2],[31,10,21,8,"reviews"],[31,17,21,15],[31,20,21,18],[31,26,21,24,"getReviews"],[31,36,21,34],[31,37,21,35],[31,38,21,36],[33,4,23,2],[34,4,24,2],[34,10,24,8,"existingIndex"],[34,23,24,21],[34,26,24,24,"reviews"],[34,33,24,31],[34,34,24,32,"findIndex"],[34,43,24,41],[34,44,25,5,"r"],[34,45,25,6],[34,49,26,6,"r"],[34,50,26,7],[34,51,26,8,"jobId"],[34,56,26,13],[34,61,26,18,"review"],[34,67,26,24],[34,68,26,25,"jobId"],[34,73,26,30],[34,77,27,6,"r"],[34,78,27,7],[34,79,27,8,"workerId"],[34,87,27,16],[34,92,27,21,"review"],[34,98,27,27],[34,99,27,28,"workerId"],[34,107,27,36],[34,111,28,6,"r"],[34,112,28,7],[34,113,28,8,"employerId"],[34,123,28,18],[34,128,28,23,"review"],[34,134,28,29],[34,135,28,30,"employerId"],[34,145,29,2],[34,146,29,3],[35,4,31,2],[35,8,31,6,"existingIndex"],[35,21,31,19],[35,25,31,23],[35,26,31,24],[35,28,31,26],[36,6,32,4],[37,6,33,4,"console"],[37,13,33,11],[37,14,33,12,"log"],[37,17,33,15],[37,18,33,16],[37,67,33,65],[37,68,33,66],[38,6,34,4,"reviews"],[38,13,34,11],[38,14,34,12,"existingIndex"],[38,27,34,25],[38,28,34,26],[38,31,34,29,"review"],[38,37,34,35],[39,4,35,2],[39,5,35,3],[39,11,35,9],[40,6,36,4],[41,6,37,4,"reviews"],[41,13,37,11],[41,14,37,12,"push"],[41,18,37,16],[41,19,37,17,"review"],[41,25,37,23],[41,26,37,24],[42,4,38,2],[43,4,40,2],[43,10,40,8],[43,14,40,8,"setItem"],[43,22,40,15],[43,23,40,15,"setItem"],[43,30,40,15],[43,32,40,16,"REVIEW_KEY"],[43,42,40,26],[43,44,40,28,"reviews"],[43,51,40,35],[43,52,40,36],[44,4,41,2,"console"],[44,11,41,9],[44,12,41,10,"log"],[44,15,41,13],[44,16,41,14],[44,39,41,37],[44,41,41,39,"review"],[44,47,41,45],[44,48,41,46],[45,2,42,0],[47,2,44,0],[48,0,45,0],[49,0,46,0],[50,2,47,7],[50,17,47,22,"getReviewsForWorker"],[50,36,47,41,"getReviewsForWorker"],[50,37,47,42,"workerId"],[50,45,47,58],[50,47,47,79],[51,4,48,2],[51,10,48,8,"reviews"],[51,17,48,15],[51,20,48,18],[51,26,48,24,"getReviews"],[51,36,48,34],[51,37,48,35],[51,38,48,36],[52,4,49,2],[52,11,49,9,"reviews"],[52,18,49,16],[52,19,49,17,"filter"],[52,25,49,23],[52,26,49,25,"r"],[52,27,49,26],[52,31,49,31,"r"],[52,32,49,32],[52,33,49,33,"workerId"],[52,41,49,41],[52,46,49,46,"workerId"],[52,54,49,54],[52,55,49,55],[53,2,50,0],[55,2,52,0],[56,0,53,0],[57,0,54,0],[58,2,55,7],[58,17,55,22,"getReviewForJob"],[58,32,55,37,"getReviewForJob"],[58,33,56,2,"jobId"],[58,38,56,15],[58,40,57,2,"workerId"],[58,48,57,18],[58,50,58,2,"employerId"],[58,60,58,20],[58,62,59,31],[59,4,60,2],[59,10,60,8,"reviews"],[59,17,60,15],[59,20,60,18],[59,26,60,24,"getReviews"],[59,36,60,34],[59,37,60,35],[59,38,60,36],[60,4,61,2],[60,11,61,9,"reviews"],[60,18,61,16],[60,19,61,17,"find"],[60,23,61,21],[60,24,62,5,"r"],[60,25,62,6],[60,29,63,6,"r"],[60,30,63,7],[60,31,63,8,"jobId"],[60,36,63,13],[60,41,63,18,"jobId"],[60,46,63,23],[60,50,64,6,"r"],[60,51,64,7],[60,52,64,8,"workerId"],[60,60,64,16],[60,65,64,21,"workerId"],[60,73,64,29],[60,77,65,6,"r"],[60,78,65,7],[60,79,65,8,"employerId"],[60,89,65,18],[60,94,65,23,"employerId"],[60,104,66,2],[60,105,66,3],[61,2,67,0],[63,2,69,0],[64,0,70,0],[65,0,71,0],[66,2,72,7],[66,11,72,16,"calculateAverageRating"],[66,33,72,38,"calculateAverageRating"],[66,34,72,39,"reviews"],[66,41,72,56],[66,43,72,66],[67,4,73,2],[67,8,73,6,"reviews"],[67,15,73,13],[67,16,73,14,"length"],[67,22,73,20],[67,27,73,25],[67,28,73,26],[67,30,73,28],[67,37,73,35],[67,38,73,36],[68,4,74,2],[68,10,74,8,"sum"],[68,13,74,11],[68,16,74,14,"reviews"],[68,23,74,21],[68,24,74,22,"reduce"],[68,30,74,28],[68,31,74,29],[68,32,74,30,"acc"],[68,35,74,33],[68,37,74,35,"r"],[68,38,74,36],[68,43,74,41,"acc"],[68,46,74,44],[68,49,74,47,"r"],[68,50,74,48],[68,51,74,49,"rating"],[68,57,74,55],[68,59,74,57],[68,60,74,58],[68,61,74,59],[69,4,75,2],[69,11,75,9,"sum"],[69,14,75,12],[69,17,75,15,"reviews"],[69,24,75,22],[69,25,75,23,"length"],[69,31,75,29],[70,2,76,0],[71,0,76,1],[71,3]],"functionMap":{"names":["<global>","getReviews","addReview","reviews.findIndex$argument_0","getReviewsForWorker","reviews.filter$argument_0","getReviewForJob","reviews.find$argument_0","calculateAverageRating","reviews.reduce$argument_0"],"mappings":"AAA;OCS;CDG;OEO;ICK;wCDG;CFc;OIK;wBCE,8BD;CJC;OMK;ICO;iCDG;CNE;OQK;6BCE,0BD;CRE"},"hasCjsExports":false},"type":"js/module"}]}