{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":28},"end":{"line":2,"column":78,"index":106}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":107},"end":{"line":3,"column":69,"index":176}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(); // contexts/AuthContext.tsx\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _reactJsxDevRuntime = require(_dependencyMap[2], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n\n  // Keys\n  const USER_KEY = '@shiftmatch:user';\n  const USER_DB_KEY = '@shiftmatch:users_database';\n  const AuthProvider = ({\n    children\n  }) => {\n    _s();\n    const [user, setUser] = (0, _react.useState)(null);\n\n    // App Start â†’ Benutzer laden\n    (0, _react.useEffect)(() => {\n      (async () => {\n        const stored = await AsyncStorage.default.getItem(USER_KEY);\n        if (stored) setUser(JSON.parse(stored));\n      })();\n    }, []);\n\n    // -----------------------------\n    // Hilfsfunktionen\n    // -----------------------------\n\n    const normalizeEmail = email => {\n      return email.trim().toLowerCase();\n    };\n    const loadUserDB = async () => {\n      const stored = await AsyncStorage.default.getItem(USER_DB_KEY);\n      return stored ? JSON.parse(stored) : {};\n    };\n    const saveUserDB = async db => {\n      await AsyncStorage.default.setItem(USER_DB_KEY, JSON.stringify(db));\n    };\n\n    // -----------------------------\n    // SIGN IN (LOGIN)\n    // -----------------------------\n    const signIn = async (email, password) => {\n      const normalized = normalizeEmail(email);\n      const db = await loadUserDB();\n      const existing = db[normalized];\n      if (!existing) {\n        throw new Error('Diese E-Mail ist nicht registriert.');\n      }\n      if (existing.password !== password) {\n        throw new Error('E-Mail oder Passwort falsch.');\n      }\n\n      // Login OK\n      await AsyncStorage.default.setItem(USER_KEY, JSON.stringify(existing));\n      setUser(existing);\n      return existing;\n    };\n\n    // -----------------------------\n    // SIGN UP (REGISTRIEREN)\n    // -----------------------------\n    const signUp = async (email, password) => {\n      const normalized = normalizeEmail(email);\n      const db = await loadUserDB();\n      if (db[normalized]) {\n        throw new Error('Diese E-Mail ist bereits registriert. Bitte logge dich ein.');\n      }\n      const newUser = {\n        id: 'u-' + Date.now().toString(),\n        email: normalized,\n        password\n      };\n      db[normalized] = newUser;\n      await saveUserDB(db);\n\n      // Direkt einloggen\n      await AsyncStorage.default.setItem(USER_KEY, JSON.stringify(newUser));\n      setUser(newUser);\n      return newUser;\n    };\n\n    // -----------------------------\n    // ROLLE SPEICHERN\n    // -----------------------------\n    const setRole = async role => {\n      if (!user) return;\n      const updated = Object.assign({}, user, {\n        role\n      });\n      const db = await loadUserDB();\n      db[user.email] = updated;\n      await saveUserDB(db);\n      await AsyncStorage.default.setItem(USER_KEY, JSON.stringify(updated));\n      setUser(updated);\n    };\n\n    // -----------------------------\n    // LOGOUT\n    // -----------------------------\n    const signOut = async () => {\n      await AsyncStorage.default.removeItem(USER_KEY);\n      setUser(null);\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        signIn,\n        signUp,\n        signOut,\n        setRole\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 5\n    }, this);\n  };\n  _s(AuthProvider, \"5s2qRsV95gTJBmaaTh11GoxYeGE=\");\n  _c = AuthProvider;\n  const useAuth = () => {\n    _s2();\n    const ctx = (0, _react.useContext)(AuthContext);\n    if (!ctx) throw new Error('useAuth must be used inside AuthProvider');\n    return ctx;\n  };\n  _s2(useAuth, \"/dMy7t63NXD4eYACoT93CePwGrg=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":156,"map":[[6,26,1,0],[7,2,1,0,"Object"],[7,8,1,0],[7,9,1,0,"defineProperty"],[7,23,1,0],[7,24,1,0,"exports"],[7,31,1,0],[8,4,1,0,"value"],[8,9,1,0],[9,2,1,0],[10,2,1,0],[10,11,1,0,"_interopDefault"],[10,27,1,0,"e"],[10,28,1,0],[11,4,1,0],[11,11,1,0,"e"],[11,12,1,0],[11,16,1,0,"e"],[11,17,1,0],[11,18,1,0,"__esModule"],[11,28,1,0],[11,31,1,0,"e"],[11,32,1,0],[12,6,1,0,"default"],[12,13,1,0],[12,15,1,0,"e"],[13,4,1,0],[14,2,1,0],[15,2,26,0,"Object"],[15,8,26,0],[15,9,26,0,"defineProperty"],[15,23,26,0],[15,24,26,0,"exports"],[15,31,26,0],[16,4,26,0,"enumerable"],[16,14,26,0],[17,4,26,0,"get"],[17,7,26,0],[17,18,26,0,"get"],[17,19,26,0],[18,6,26,0],[18,13,26,0,"AuthProvider"],[18,25,26,0],[19,4,26,0],[20,2,26,0],[21,2,136,0,"Object"],[21,8,136,0],[21,9,136,0,"defineProperty"],[21,23,136,0],[21,24,136,0,"exports"],[21,31,136,0],[22,4,136,0,"enumerable"],[22,14,136,0],[23,4,136,0,"get"],[23,7,136,0],[23,18,136,0,"get"],[23,19,136,0],[24,6,136,0],[24,13,136,0,"useAuth"],[24,20,136,0],[25,4,136,0],[26,2,136,0],[27,2,2,0],[27,6,2,0,"_react"],[27,12,2,0],[27,15,2,0,"require"],[27,22,2,0],[27,23,2,0,"_dependencyMap"],[27,37,2,0],[28,2,3,0],[28,6,3,0,"_reactNativeAsyncStorageAsyncStorage"],[28,42,3,0],[28,45,3,0,"require"],[28,52,3,0],[28,53,3,0,"_dependencyMap"],[28,67,3,0],[29,2,3,0],[29,6,3,0,"AsyncStorage"],[29,18,3,0],[29,21,3,0,"_interopDefault"],[29,36,3,0],[29,37,3,0,"_reactNativeAsyncStorageAsyncStorage"],[29,73,3,0],[30,2,3,69],[30,6,3,69,"_reactJsxDevRuntime"],[30,25,3,69],[30,28,3,69,"require"],[30,35,3,69],[30,36,3,69,"_dependencyMap"],[30,50,3,69],[31,2,20,0],[31,8,20,6,"AuthContext"],[31,19,20,17],[31,35,20,20],[31,39,20,20,"createContext"],[31,45,20,33],[31,46,20,33,"createContext"],[31,59,20,33],[31,61,20,63,"undefined"],[31,70,20,72],[31,71,20,73],[33,2,22,0],[34,2,23,0],[34,8,23,6,"USER_KEY"],[34,16,23,14],[34,19,23,17],[34,37,23,35],[35,2,24,0],[35,8,24,6,"USER_DB_KEY"],[35,19,24,17],[35,22,24,20],[35,50,24,48],[36,2,26,7],[36,8,26,13,"AuthProvider"],[36,20,26,25],[36,23,26,28,"AuthProvider"],[36,24,26,29],[37,4,26,31,"children"],[38,2,26,71],[38,3,26,72],[38,8,26,77],[39,4,26,77,"_s"],[39,6,26,77],[40,4,27,2],[40,10,27,8],[40,11,27,9,"user"],[40,15,27,13],[40,17,27,15,"setUser"],[40,24,27,22],[40,25,27,23],[40,28,27,26],[40,32,27,26,"useState"],[40,38,27,34],[40,39,27,34,"useState"],[40,47,27,34],[40,49,27,48],[40,53,27,52],[40,54,27,53],[42,4,29,2],[43,4,30,2],[43,8,30,2,"useEffect"],[43,14,30,11],[43,15,30,11,"useEffect"],[43,24,30,11],[43,26,30,12],[43,32,30,18],[44,6,31,4],[44,7,31,5],[44,19,31,17],[45,8,32,6],[45,14,32,12,"stored"],[45,20,32,18],[45,23,32,21],[45,29,32,27,"AsyncStorage"],[45,41,32,39],[45,42,32,39,"default"],[45,49,32,39],[45,50,32,40,"getItem"],[45,57,32,47],[45,58,32,48,"USER_KEY"],[45,66,32,56],[45,67,32,57],[46,8,33,6],[46,12,33,10,"stored"],[46,18,33,16],[46,20,33,18,"setUser"],[46,27,33,25],[46,28,33,26,"JSON"],[46,32,33,30],[46,33,33,31,"parse"],[46,38,33,36],[46,39,33,37,"stored"],[46,45,33,43],[46,46,33,44],[46,47,33,45],[47,6,34,4],[47,7,34,5],[47,9,34,7],[47,10,34,8],[48,4,35,2],[48,5,35,3],[48,7,35,5],[48,9,35,7],[48,10,35,8],[50,4,37,2],[51,4,38,2],[52,4,39,2],[54,4,41,2],[54,10,41,8,"normalizeEmail"],[54,24,41,22],[54,27,41,26,"email"],[54,32,41,39],[54,36,41,44],[55,6,42,4],[55,13,42,11,"email"],[55,18,42,16],[55,19,42,17,"trim"],[55,23,42,21],[55,24,42,22],[55,25,42,23],[55,26,42,24,"toLowerCase"],[55,37,42,35],[55,38,42,36],[55,39,42,37],[56,4,43,2],[56,5,43,3],[57,4,45,2],[57,10,45,8,"loadUserDB"],[57,20,45,18],[57,23,45,21],[57,29,45,21,"loadUserDB"],[57,30,45,21],[57,35,45,64],[58,6,46,4],[58,12,46,10,"stored"],[58,18,46,16],[58,21,46,19],[58,27,46,25,"AsyncStorage"],[58,39,46,37],[58,40,46,37,"default"],[58,47,46,37],[58,48,46,38,"getItem"],[58,55,46,45],[58,56,46,46,"USER_DB_KEY"],[58,67,46,57],[58,68,46,58],[59,6,47,4],[59,13,47,11,"stored"],[59,19,47,17],[59,22,47,20,"JSON"],[59,26,47,24],[59,27,47,25,"parse"],[59,32,47,30],[59,33,47,31,"stored"],[59,39,47,37],[59,40,47,38],[59,43,47,41],[59,44,47,42],[59,45,47,43],[60,4,48,2],[60,5,48,3],[61,4,50,2],[61,10,50,8,"saveUserDB"],[61,20,50,18],[61,23,50,21],[61,29,50,28,"db"],[61,31,50,52],[61,35,50,57],[62,6,51,4],[62,12,51,10,"AsyncStorage"],[62,24,51,22],[62,25,51,22,"default"],[62,32,51,22],[62,33,51,23,"setItem"],[62,40,51,30],[62,41,51,31,"USER_DB_KEY"],[62,52,51,42],[62,54,51,44,"JSON"],[62,58,51,48],[62,59,51,49,"stringify"],[62,68,51,58],[62,69,51,59,"db"],[62,71,51,61],[62,72,51,62],[62,73,51,63],[63,4,52,2],[63,5,52,3],[65,4,54,2],[66,4,55,2],[67,4,56,2],[68,4,57,2],[68,10,57,8,"signIn"],[68,16,57,14],[68,19,57,17],[68,25,57,17,"signIn"],[68,26,57,24,"email"],[68,31,57,37],[68,33,57,39,"password"],[68,41,57,55],[68,46,57,75],[69,6,58,4],[69,12,58,10,"normalized"],[69,22,58,20],[69,25,58,23,"normalizeEmail"],[69,39,58,37],[69,40,58,38,"email"],[69,45,58,43],[69,46,58,44],[70,6,59,4],[70,12,59,10,"db"],[70,14,59,12],[70,17,59,15],[70,23,59,21,"loadUserDB"],[70,33,59,31],[70,34,59,32],[70,35,59,33],[71,6,61,4],[71,12,61,10,"existing"],[71,20,61,18],[71,23,61,21,"db"],[71,25,61,23],[71,26,61,24,"normalized"],[71,36,61,34],[71,37,61,35],[72,6,63,4],[72,10,63,8],[72,11,63,9,"existing"],[72,19,63,17],[72,21,63,19],[73,8,64,6],[73,14,64,12],[73,18,64,16,"Error"],[73,23,64,21],[73,24,64,22],[73,61,64,59],[73,62,64,60],[74,6,65,4],[75,6,67,4],[75,10,67,8,"existing"],[75,18,67,16],[75,19,67,17,"password"],[75,27,67,25],[75,32,67,30,"password"],[75,40,67,38],[75,42,67,40],[76,8,68,6],[76,14,68,12],[76,18,68,16,"Error"],[76,23,68,21],[76,24,68,22],[76,54,68,52],[76,55,68,53],[77,6,69,4],[79,6,71,4],[80,6,72,4],[80,12,72,10,"AsyncStorage"],[80,24,72,22],[80,25,72,22,"default"],[80,32,72,22],[80,33,72,23,"setItem"],[80,40,72,30],[80,41,72,31,"USER_KEY"],[80,49,72,39],[80,51,72,41,"JSON"],[80,55,72,45],[80,56,72,46,"stringify"],[80,65,72,55],[80,66,72,56,"existing"],[80,74,72,64],[80,75,72,65],[80,76,72,66],[81,6,73,4,"setUser"],[81,13,73,11],[81,14,73,12,"existing"],[81,22,73,20],[81,23,73,21],[82,6,75,4],[82,13,75,11,"existing"],[82,21,75,19],[83,4,76,2],[83,5,76,3],[85,4,78,2],[86,4,79,2],[87,4,80,2],[88,4,81,2],[88,10,81,8,"signUp"],[88,16,81,14],[88,19,81,17],[88,25,81,17,"signUp"],[88,26,81,24,"email"],[88,31,81,37],[88,33,81,39,"password"],[88,41,81,55],[88,46,81,75],[89,6,82,4],[89,12,82,10,"normalized"],[89,22,82,20],[89,25,82,23,"normalizeEmail"],[89,39,82,37],[89,40,82,38,"email"],[89,45,82,43],[89,46,82,44],[90,6,83,4],[90,12,83,10,"db"],[90,14,83,12],[90,17,83,15],[90,23,83,21,"loadUserDB"],[90,33,83,31],[90,34,83,32],[90,35,83,33],[91,6,85,4],[91,10,85,8,"db"],[91,12,85,10],[91,13,85,11,"normalized"],[91,23,85,21],[91,24,85,22],[91,26,85,24],[92,8,86,6],[92,14,86,12],[92,18,86,16,"Error"],[92,23,86,21],[92,24,86,22],[92,85,86,83],[92,86,86,84],[93,6,87,4],[94,6,89,4],[94,12,89,10,"newUser"],[94,19,89,23],[94,22,89,26],[95,8,90,6,"id"],[95,10,90,8],[95,12,90,10],[95,16,90,14],[95,19,90,17,"Date"],[95,23,90,21],[95,24,90,22,"now"],[95,27,90,25],[95,28,90,26],[95,29,90,27],[95,30,90,28,"toString"],[95,38,90,36],[95,39,90,37],[95,40,90,38],[96,8,91,6,"email"],[96,13,91,11],[96,15,91,13,"normalized"],[96,25,91,23],[97,8,92,6,"password"],[98,6,93,4],[98,7,93,5],[99,6,95,4,"db"],[99,8,95,6],[99,9,95,7,"normalized"],[99,19,95,17],[99,20,95,18],[99,23,95,21,"newUser"],[99,30,95,28],[100,6,96,4],[100,12,96,10,"saveUserDB"],[100,22,96,20],[100,23,96,21,"db"],[100,25,96,23],[100,26,96,24],[102,6,98,4],[103,6,99,4],[103,12,99,10,"AsyncStorage"],[103,24,99,22],[103,25,99,22,"default"],[103,32,99,22],[103,33,99,23,"setItem"],[103,40,99,30],[103,41,99,31,"USER_KEY"],[103,49,99,39],[103,51,99,41,"JSON"],[103,55,99,45],[103,56,99,46,"stringify"],[103,65,99,55],[103,66,99,56,"newUser"],[103,73,99,63],[103,74,99,64],[103,75,99,65],[104,6,100,4,"setUser"],[104,13,100,11],[104,14,100,12,"newUser"],[104,21,100,19],[104,22,100,20],[105,6,102,4],[105,13,102,11,"newUser"],[105,20,102,18],[106,4,103,2],[106,5,103,3],[108,4,105,2],[109,4,106,2],[110,4,107,2],[111,4,108,2],[111,10,108,8,"setRole"],[111,17,108,15],[111,20,108,18],[111,26,108,25,"role"],[111,30,108,52],[111,34,108,57],[112,6,109,4],[112,10,109,8],[112,11,109,9,"user"],[112,15,109,13],[112,17,109,15],[113,6,111,4],[113,12,111,10,"updated"],[113,19,111,17],[113,22,111,17,"Object"],[113,28,111,17],[113,29,111,17,"assign"],[113,35,111,17],[113,40,111,25,"user"],[113,44,111,29],[114,8,111,31,"role"],[115,6,111,35],[115,8,111,37],[116,6,113,4],[116,12,113,10,"db"],[116,14,113,12],[116,17,113,15],[116,23,113,21,"loadUserDB"],[116,33,113,31],[116,34,113,32],[116,35,113,33],[117,6,114,4,"db"],[117,8,114,6],[117,9,114,7,"user"],[117,13,114,11],[117,14,114,12,"email"],[117,19,114,17],[117,20,114,18],[117,23,114,21,"updated"],[117,30,114,28],[118,6,115,4],[118,12,115,10,"saveUserDB"],[118,22,115,20],[118,23,115,21,"db"],[118,25,115,23],[118,26,115,24],[119,6,117,4],[119,12,117,10,"AsyncStorage"],[119,24,117,22],[119,25,117,22,"default"],[119,32,117,22],[119,33,117,23,"setItem"],[119,40,117,30],[119,41,117,31,"USER_KEY"],[119,49,117,39],[119,51,117,41,"JSON"],[119,55,117,45],[119,56,117,46,"stringify"],[119,65,117,55],[119,66,117,56,"updated"],[119,73,117,63],[119,74,117,64],[119,75,117,65],[120,6,118,4,"setUser"],[120,13,118,11],[120,14,118,12,"updated"],[120,21,118,19],[120,22,118,20],[121,4,119,2],[121,5,119,3],[123,4,121,2],[124,4,122,2],[125,4,123,2],[126,4,124,2],[126,10,124,8,"signOut"],[126,17,124,15],[126,20,124,18],[126,26,124,18,"signOut"],[126,27,124,18],[126,32,124,30],[127,6,125,4],[127,12,125,10,"AsyncStorage"],[127,24,125,22],[127,25,125,22,"default"],[127,32,125,22],[127,33,125,23,"removeItem"],[127,43,125,33],[127,44,125,34,"USER_KEY"],[127,52,125,42],[127,53,125,43],[128,6,126,4,"setUser"],[128,13,126,11],[128,14,126,12],[128,18,126,16],[128,19,126,17],[129,4,127,2],[129,5,127,3],[130,4,129,2],[130,24,130,4],[130,28,130,4,"_reactJsxDevRuntime"],[130,47,130,4],[130,48,130,4,"jsxDEV"],[130,54,130,4],[130,56,130,5,"AuthContext"],[130,67,130,16],[130,68,130,17,"Provider"],[130,76,130,25],[131,6,130,26,"value"],[131,11,130,31],[131,13,130,33],[132,8,130,35,"user"],[132,12,130,39],[133,8,130,41,"signIn"],[133,14,130,47],[134,8,130,49,"signUp"],[134,14,130,55],[135,8,130,57,"signOut"],[135,15,130,64],[136,8,130,66,"setRole"],[137,6,130,74],[137,7,130,76],[138,6,130,76,"children"],[138,14,130,76],[138,16,131,7,"children"],[139,4,131,15],[140,6,131,15,"fileName"],[140,14,131,15],[140,16,131,15,"_jsxFileName"],[140,28,131,15],[141,6,131,15,"lineNumber"],[141,16,131,15],[142,6,131,15,"columnNumber"],[142,18,131,15],[143,4,131,15],[143,11,132,26],[143,12,132,27],[144,2,134,0],[144,3,134,1],[145,2,134,2,"_s"],[145,4,134,2],[145,5,26,13,"AuthProvider"],[145,17,26,25],[146,2,26,25,"_c"],[146,4,26,25],[146,7,26,13,"AuthProvider"],[146,19,26,25],[147,2,136,7],[147,8,136,13,"useAuth"],[147,15,136,20],[147,18,136,23,"useAuth"],[147,19,136,23],[147,24,136,46],[148,4,136,46,"_s2"],[148,7,136,46],[149,4,137,2],[149,10,137,8,"ctx"],[149,13,137,11],[149,16,137,14],[149,20,137,14,"useContext"],[149,26,137,24],[149,27,137,24,"useContext"],[149,37,137,24],[149,39,137,25,"AuthContext"],[149,50,137,36],[149,51,137,37],[150,4,138,2],[150,8,138,6],[150,9,138,7,"ctx"],[150,12,138,10],[150,14,138,12],[150,20,138,18],[150,24,138,22,"Error"],[150,29,138,27],[150,30,138,28],[150,72,138,70],[150,73,138,71],[151,4,139,2],[151,11,139,9,"ctx"],[151,14,139,12],[152,2,140,0],[152,3,140,1],[153,2,140,2,"_s2"],[153,5,140,2],[153,6,136,13,"useAuth"],[153,13,136,20],[154,2,136,20],[154,6,136,20,"_c"],[154,8,136,20],[155,2,136,20,"$RefreshReg$"],[155,14,136,20],[155,15,136,20,"_c"],[155,17,136,20],[156,0,136,20],[156,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","<anonymous>","normalizeEmail","loadUserDB","saveUserDB","signIn","signUp","setRole","signOut","useAuth"],"mappings":"AAA;4BCyB;YCI;KCC;KDG;GDC;yBGM;GHE;qBIE;GJG;qBKE;GLE;iBMK;GNmB;iBOK;GPsB;kBQK;GRW;kBSK;GTG;CDO;uBWE;CXI"},"hasCjsExports":false},"type":"js/module"}]}