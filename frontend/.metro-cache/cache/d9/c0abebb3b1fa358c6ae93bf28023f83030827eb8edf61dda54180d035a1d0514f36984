{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"./api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":111},"end":{"line":3,"column":60,"index":171}}],"key":"FbKPDeRJ9TF3vg1eKYKz12urgic=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.getWorkerProfile = getWorkerProfile;\n  exports.saveWorkerProfile = saveWorkerProfile;\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _api = require(_dependencyMap[1], \"./api\");\n  // utils/profileStore.ts - Worker Profile Store (REFACTORED)\n  // ===== GET WORKER PROFILE =====\n  function getWorkerProfile(_x) {\n    return _getWorkerProfile.apply(this, arguments);\n  } // ===== SAVE WORKER PROFILE =====\n  function _getWorkerProfile() {\n    _getWorkerProfile = (0, _asyncToGenerator.default)(function* (userId) {\n      // If no userId provided, get it from auth\n      if (!userId) {\n        userId = yield (0, _api.getUserId)();\n        if (!userId) {\n          console.error('‚ùå getWorkerProfile: No userId provided and not authenticated');\n          throw new Error('Not authenticated');\n        }\n      }\n      console.log('üîç getWorkerProfile: Loading profile for user', userId);\n      try {\n        var _profile$categories, _profile$selectedTags;\n        var headers = yield (0, _api.getAuthHeaders)();\n        var response = yield fetch(`${_api.API_BASE}/profiles/worker/${userId}`, {\n          method: 'GET',\n          headers: headers\n        });\n        if (response.status === 404) {\n          console.log('‚ö†Ô∏è getWorkerProfile: Profile not found (404)');\n          return null;\n        }\n        if (!response.ok) {\n          var error = yield response.text();\n          console.error('‚ùå getWorkerProfile: API error', response.status, error);\n          throw new Error(`Failed to fetch profile: ${response.status}`);\n        }\n        var profile = yield response.json();\n        console.log('‚úÖ getWorkerProfile: Profile loaded', {\n          userId: profile.userId,\n          categories: ((_profile$categories = profile.categories) == null ? void 0 : _profile$categories.length) || 0,\n          tags: ((_profile$selectedTags = profile.selectedTags) == null ? void 0 : _profile$selectedTags.length) || 0\n        });\n        return profile;\n      } catch (error) {\n        console.error('‚ùå getWorkerProfile: Error', error);\n        throw error;\n      }\n    });\n    return _getWorkerProfile.apply(this, arguments);\n  }\n  function saveWorkerProfile(_x2, _x3) {\n    return _saveWorkerProfile.apply(this, arguments);\n  }\n  function _saveWorkerProfile() {\n    _saveWorkerProfile = (0, _asyncToGenerator.default)(function* (userId, profileData) {\n      console.log('üíæ saveWorkerProfile: Saving profile for', userId);\n      console.log('üíæ saveWorkerProfile: Data:', profileData);\n      try {\n        var headers = yield (0, _api.getAuthHeaders)();\n\n        // Try PUT first (update existing)\n        var response = yield fetch(`${_api.API_BASE}/profiles/worker/${userId}`, {\n          method: 'PUT',\n          headers: headers,\n          body: JSON.stringify(profileData)\n        });\n        console.log('üì• saveWorkerProfile: PUT response status:', response.status);\n\n        // If 404, profile doesn't exist - create with POST\n        if (response.status === 404) {\n          console.log('‚ö†Ô∏è saveWorkerProfile: Profile not found, creating new via POST');\n          response = yield fetch(`${_api.API_BASE}/profiles/worker`, {\n            method: 'POST',\n            headers: headers,\n            body: JSON.stringify(profileData)\n          });\n          console.log('üì• saveWorkerProfile: POST response status:', response.status);\n        }\n        if (!response.ok) {\n          var errorText = yield response.text();\n          console.error('‚ùå saveWorkerProfile: Backend error:', errorText);\n          throw new Error(`Server Error ${response.status}: ${errorText}`);\n        }\n        var result = yield response.json();\n        console.log('‚úÖ saveWorkerProfile: Profile saved successfully', result);\n      } catch (error) {\n        console.error('‚ùå saveWorkerProfile: Exception:', error.message);\n        throw error;\n      }\n    });\n    return _saveWorkerProfile.apply(this, arguments);\n  }\n});","lineCount":105,"map":[[12,2,6,0,"exports"],[12,9,6,0],[12,10,6,0,"getWorkerProfile"],[12,26,6,0],[12,29,6,0,"getWorkerProfile"],[12,45,6,0],[13,2,52,0,"exports"],[13,9,52,0],[13,10,52,0,"saveWorkerProfile"],[13,27,52,0],[13,30,52,0,"saveWorkerProfile"],[13,47,52,0],[14,2,96,1],[14,6,96,1,"_babelRuntimeHelpersAsyncToGenerator"],[14,42,96,1],[14,45,96,1,"require"],[14,52,96,1],[14,53,96,1,"_dependencyMap"],[14,67,96,1],[15,2,96,1],[15,6,96,1,"_asyncToGenerator"],[15,23,96,1],[15,26,96,1,"_interopDefault"],[15,41,96,1],[15,42,96,1,"_babelRuntimeHelpersAsyncToGenerator"],[15,78,96,1],[16,2,3,0],[16,6,3,0,"_api"],[16,10,3,0],[16,13,3,0,"require"],[16,20,3,0],[16,21,3,0,"_dependencyMap"],[16,35,3,0],[17,2,1,0],[18,2,5,0],[19,2,5,0],[19,11,6,22,"getWorkerProfile"],[19,27,6,38,"getWorkerProfile"],[19,28,6,38,"_x"],[19,30,6,38],[20,4,6,38],[20,11,6,38,"_getWorkerProfile"],[20,28,6,38],[20,29,6,38,"apply"],[20,34,6,38],[20,41,6,38,"arguments"],[20,50,6,38],[21,2,6,38],[21,4,51,0],[22,2,51,0],[22,11,51,0,"_getWorkerProfile"],[22,29,51,0],[23,4,51,0,"_getWorkerProfile"],[23,21,51,0],[23,28,51,0,"_asyncToGenerator"],[23,45,51,0],[23,46,51,0,"default"],[23,53,51,0],[23,55,6,7],[23,66,6,39,"userId"],[23,72,6,54],[23,74,6,87],[24,6,7,2],[25,6,8,2],[25,10,8,6],[25,11,8,7,"userId"],[25,17,8,13],[25,19,8,15],[26,8,9,4,"userId"],[26,14,9,10],[26,23,9,19],[26,27,9,19,"getUserId"],[26,31,9,28],[26,32,9,28,"getUserId"],[26,41,9,28],[26,43,9,29],[26,44,9,30],[27,8,10,4],[27,12,10,8],[27,13,10,9,"userId"],[27,19,10,15],[27,21,10,17],[28,10,11,6,"console"],[28,17,11,13],[28,18,11,14,"error"],[28,23,11,19],[28,24,11,20],[28,86,11,82],[28,87,11,83],[29,10,12,6],[29,16,12,12],[29,20,12,16,"Error"],[29,25,12,21],[29,26,12,22],[29,45,12,41],[29,46,12,42],[30,8,13,4],[31,6,14,2],[32,6,16,2,"console"],[32,13,16,9],[32,14,16,10,"log"],[32,17,16,13],[32,18,16,14],[32,65,16,61],[32,67,16,63,"userId"],[32,73,16,69],[32,74,16,70],[33,6,18,2],[33,10,18,6],[34,8,18,6],[34,12,18,6,"_profile$categories"],[34,31,18,6],[34,33,18,6,"_profile$selectedTags"],[34,54,18,6],[35,8,19,4],[35,12,19,10,"headers"],[35,19,19,17],[35,28,19,26],[35,32,19,26,"getAuthHeaders"],[35,36,19,40],[35,37,19,40,"getAuthHeaders"],[35,51,19,40],[35,53,19,41],[35,54,19,42],[36,8,21,4],[36,12,21,10,"response"],[36,20,21,18],[36,29,21,27,"fetch"],[36,34,21,32],[36,35,21,33],[36,38,21,36,"API_BASE"],[36,42,21,44],[36,43,21,44,"API_BASE"],[36,51,21,44],[36,71,21,64,"userId"],[36,77,21,70],[36,79,21,72],[36,81,21,74],[37,10,22,6,"method"],[37,16,22,12],[37,18,22,14],[37,23,22,19],[38,10,23,6,"headers"],[38,17,23,13],[38,19,23,6,"headers"],[39,8,24,4],[39,9,24,5],[39,10,24,6],[40,8,26,4],[40,12,26,8,"response"],[40,20,26,16],[40,21,26,17,"status"],[40,27,26,23],[40,32,26,28],[40,35,26,31],[40,37,26,33],[41,10,27,6,"console"],[41,17,27,13],[41,18,27,14,"log"],[41,21,27,17],[41,22,27,18],[41,68,27,64],[41,69,27,65],[42,10,28,6],[42,17,28,13],[42,21,28,17],[43,8,29,4],[44,8,31,4],[44,12,31,8],[44,13,31,9,"response"],[44,21,31,17],[44,22,31,18,"ok"],[44,24,31,20],[44,26,31,22],[45,10,32,6],[45,14,32,12,"error"],[45,19,32,17],[45,28,32,26,"response"],[45,36,32,34],[45,37,32,35,"text"],[45,41,32,39],[45,42,32,40],[45,43,32,41],[46,10,33,6,"console"],[46,17,33,13],[46,18,33,14,"error"],[46,23,33,19],[46,24,33,20],[46,55,33,51],[46,57,33,53,"response"],[46,65,33,61],[46,66,33,62,"status"],[46,72,33,68],[46,74,33,70,"error"],[46,79,33,75],[46,80,33,76],[47,10,34,6],[47,16,34,12],[47,20,34,16,"Error"],[47,25,34,21],[47,26,34,22],[47,54,34,50,"response"],[47,62,34,58],[47,63,34,59,"status"],[47,69,34,65],[47,71,34,67],[47,72,34,68],[48,8,35,4],[49,8,37,4],[49,12,37,10,"profile"],[49,19,37,17],[49,28,37,26,"response"],[49,36,37,34],[49,37,37,35,"json"],[49,41,37,39],[49,42,37,40],[49,43,37,41],[50,8,38,4,"console"],[50,15,38,11],[50,16,38,12,"log"],[50,19,38,15],[50,20,38,16],[50,56,38,52],[50,58,38,54],[51,10,39,6,"userId"],[51,16,39,12],[51,18,39,14,"profile"],[51,25,39,21],[51,26,39,22,"userId"],[51,32,39,28],[52,10,40,6,"categories"],[52,20,40,16],[52,22,40,18],[52,24,40,18,"_profile$categories"],[52,43,40,18],[52,46,40,18,"profile"],[52,53,40,25],[52,54,40,26,"categories"],[52,64,40,36],[52,85,40,18,"_profile$categories"],[52,104,40,18],[52,105,40,38,"length"],[52,111,40,44],[52,116,40,48],[52,117,40,49],[53,10,41,6,"tags"],[53,14,41,10],[53,16,41,12],[53,18,41,12,"_profile$selectedTags"],[53,39,41,12],[53,42,41,12,"profile"],[53,49,41,19],[53,50,41,20,"selectedTags"],[53,62,41,32],[53,83,41,12,"_profile$selectedTags"],[53,104,41,12],[53,105,41,34,"length"],[53,111,41,40],[53,116,41,44],[54,8,42,4],[54,9,42,5],[54,10,42,6],[55,8,44,4],[55,15,44,11,"profile"],[55,22,44,18],[56,6,45,2],[56,7,45,3],[56,8,45,4],[56,15,45,11,"error"],[56,20,45,16],[56,22,45,18],[57,8,46,4,"console"],[57,15,46,11],[57,16,46,12,"error"],[57,21,46,17],[57,22,46,18],[57,49,46,45],[57,51,46,47,"error"],[57,56,46,52],[57,57,46,53],[58,8,47,4],[58,14,47,10,"error"],[58,19,47,15],[59,6,48,2],[60,4,49,0],[60,5,49,1],[61,4,49,1],[61,11,49,1,"_getWorkerProfile"],[61,28,49,1],[61,29,49,1,"apply"],[61,34,49,1],[61,41,49,1,"arguments"],[61,50,49,1],[62,2,49,1],[63,2,49,1],[63,11,52,22,"saveWorkerProfile"],[63,28,52,39,"saveWorkerProfile"],[63,29,52,39,"_x2"],[63,32,52,39],[63,34,52,39,"_x3"],[63,37,52,39],[64,4,52,39],[64,11,52,39,"_saveWorkerProfile"],[64,29,52,39],[64,30,52,39,"apply"],[64,35,52,39],[64,42,52,39,"arguments"],[64,51,52,39],[65,2,52,39],[66,2,52,39],[66,11,52,39,"_saveWorkerProfile"],[66,30,52,39],[67,4,52,39,"_saveWorkerProfile"],[67,22,52,39],[67,29,52,39,"_asyncToGenerator"],[67,46,52,39],[67,47,52,39,"default"],[67,54,52,39],[67,56,52,7],[67,67,53,2,"userId"],[67,73,53,16],[67,75,54,2,"profileData"],[67,86,54,37],[67,88,55,17],[68,6,56,2,"console"],[68,13,56,9],[68,14,56,10,"log"],[68,17,56,13],[68,18,56,14],[68,60,56,56],[68,62,56,58,"userId"],[68,68,56,64],[68,69,56,65],[69,6,57,2,"console"],[69,13,57,9],[69,14,57,10,"log"],[69,17,57,13],[69,18,57,14],[69,47,57,43],[69,49,57,45,"profileData"],[69,60,57,56],[69,61,57,57],[70,6,59,2],[70,10,59,6],[71,8,60,4],[71,12,60,10,"headers"],[71,19,60,17],[71,28,60,26],[71,32,60,26,"getAuthHeaders"],[71,36,60,40],[71,37,60,40,"getAuthHeaders"],[71,51,60,40],[71,53,60,41],[71,54,60,42],[73,8,62,4],[74,8,63,4],[74,12,63,8,"response"],[74,20,63,16],[74,29,63,25,"fetch"],[74,34,63,30],[74,35,63,31],[74,38,63,34,"API_BASE"],[74,42,63,42],[74,43,63,42,"API_BASE"],[74,51,63,42],[74,71,63,62,"userId"],[74,77,63,68],[74,79,63,70],[74,81,63,72],[75,10,64,6,"method"],[75,16,64,12],[75,18,64,14],[75,23,64,19],[76,10,65,6,"headers"],[76,17,65,13],[76,19,65,6,"headers"],[76,26,65,13],[77,10,66,6,"body"],[77,14,66,10],[77,16,66,12,"JSON"],[77,20,66,16],[77,21,66,17,"stringify"],[77,30,66,26],[77,31,66,27,"profileData"],[77,42,66,38],[78,8,67,4],[78,9,67,5],[78,10,67,6],[79,8,69,4,"console"],[79,15,69,11],[79,16,69,12,"log"],[79,19,69,15],[79,20,69,16],[79,64,69,60],[79,66,69,62,"response"],[79,74,69,70],[79,75,69,71,"status"],[79,81,69,77],[79,82,69,78],[81,8,71,4],[82,8,72,4],[82,12,72,8,"response"],[82,20,72,16],[82,21,72,17,"status"],[82,27,72,23],[82,32,72,28],[82,35,72,31],[82,37,72,33],[83,10,73,6,"console"],[83,17,73,13],[83,18,73,14,"log"],[83,21,73,17],[83,22,73,18],[83,86,73,82],[83,87,73,83],[84,10,75,6,"response"],[84,18,75,14],[84,27,75,23,"fetch"],[84,32,75,28],[84,33,75,29],[84,36,75,32,"API_BASE"],[84,40,75,40],[84,41,75,40,"API_BASE"],[84,49,75,40],[84,67,75,58],[84,69,75,60],[85,12,76,8,"method"],[85,18,76,14],[85,20,76,16],[85,26,76,22],[86,12,77,8,"headers"],[86,19,77,15],[86,21,77,8,"headers"],[86,28,77,15],[87,12,78,8,"body"],[87,16,78,12],[87,18,78,14,"JSON"],[87,22,78,18],[87,23,78,19,"stringify"],[87,32,78,28],[87,33,78,29,"profileData"],[87,44,78,40],[88,10,79,6],[88,11,79,7],[88,12,79,8],[89,10,81,6,"console"],[89,17,81,13],[89,18,81,14,"log"],[89,21,81,17],[89,22,81,18],[89,67,81,63],[89,69,81,65,"response"],[89,77,81,73],[89,78,81,74,"status"],[89,84,81,80],[89,85,81,81],[90,8,82,4],[91,8,84,4],[91,12,84,8],[91,13,84,9,"response"],[91,21,84,17],[91,22,84,18,"ok"],[91,24,84,20],[91,26,84,22],[92,10,85,6],[92,14,85,12,"errorText"],[92,23,85,21],[92,32,85,30,"response"],[92,40,85,38],[92,41,85,39,"text"],[92,45,85,43],[92,46,85,44],[92,47,85,45],[93,10,86,6,"console"],[93,17,86,13],[93,18,86,14,"error"],[93,23,86,19],[93,24,86,20],[93,61,86,57],[93,63,86,59,"errorText"],[93,72,86,68],[93,73,86,69],[94,10,87,6],[94,16,87,12],[94,20,87,16,"Error"],[94,25,87,21],[94,26,87,22],[94,42,87,38,"response"],[94,50,87,46],[94,51,87,47,"status"],[94,57,87,53],[94,62,87,58,"errorText"],[94,71,87,67],[94,73,87,69],[94,74,87,70],[95,8,88,4],[96,8,90,4],[96,12,90,10,"result"],[96,18,90,16],[96,27,90,25,"response"],[96,35,90,33],[96,36,90,34,"json"],[96,40,90,38],[96,41,90,39],[96,42,90,40],[97,8,91,4,"console"],[97,15,91,11],[97,16,91,12,"log"],[97,19,91,15],[97,20,91,16],[97,69,91,65],[97,71,91,67,"result"],[97,77,91,73],[97,78,91,74],[98,6,92,2],[98,7,92,3],[98,8,92,4],[98,15,92,11,"error"],[98,20,92,21],[98,22,92,23],[99,8,93,4,"console"],[99,15,93,11],[99,16,93,12,"error"],[99,21,93,17],[99,22,93,18],[99,55,93,51],[99,57,93,53,"error"],[99,62,93,58],[99,63,93,59,"message"],[99,70,93,66],[99,71,93,67],[100,8,94,4],[100,14,94,10,"error"],[100,19,94,15],[101,6,95,2],[102,4,96,0],[102,5,96,1],[103,4,96,1],[103,11,96,1,"_saveWorkerProfile"],[103,29,96,1],[103,30,96,1,"apply"],[103,35,96,1],[103,42,96,1,"arguments"],[103,51,96,1],[104,2,96,1],[105,0,96,1],[105,3]],"functionMap":{"names":["<global>","getWorkerProfile","saveWorkerProfile"],"mappings":"AAA;OCK;CD2C;OEG;CF4C"},"hasCjsExports":false},"type":"js/module"}]}