{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../config","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":149},"end":{"line":3,"column":36,"index":185}}],"key":"pHqFJJBAh3HI9ZCkK8fFRwPv3x0=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _config = require(_dependencyMap[2], \"../config\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)({\n    user: null,\n    token: null,\n    loading: true,\n    login: async () => false,\n    signUp: async () => false,\n    signOut: async () => {}\n  });\n  function AuthProvider({\n    children\n  }) {\n    _s();\n    const [token, setToken] = (0, _react.useState)(null);\n    const [user, setUser] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    async function loadSession() {\n      const storedToken = await AsyncStorage.default.getItem(\"token\");\n      if (storedToken) {\n        setToken(storedToken);\n        const me = await fetch(`${_config.API_URL}/auth/me`, {\n          headers: {\n            Authorization: `Bearer ${storedToken}`\n          }\n        });\n        const data = await me.json();\n        // Backend gibt userId zurück, aber Frontend erwartet id\n        const user = {\n          ...data,\n          id: data.userId\n        };\n        setUser(user);\n      }\n      setLoading(false);\n    }\n    (0, _react.useEffect)(() => {\n      loadSession();\n    }, []);\n    async function login(email, password) {\n      const res = await fetch(`${_config.API_URL}/auth/login`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          email,\n          password\n        })\n      });\n      if (!res.ok) return false;\n      const data = await res.json();\n      await AsyncStorage.default.setItem(\"token\", data.token);\n      setToken(data.token);\n      const me = await fetch(`${_config.API_URL}/auth/me`, {\n        headers: {\n          Authorization: `Bearer ${data.token}`\n        }\n      });\n      const userData = await me.json();\n\n      // Backend gibt userId zurück, aber Frontend erwartet id\n      const user = {\n        ...userData,\n        id: userData.userId\n      };\n      setUser(user);\n      return true;\n    }\n    async function signUp(email, password, role) {\n      const res = await fetch(`${_config.API_URL}/auth/signup`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          email,\n          password,\n          role\n        })\n      });\n      if (!res.ok) {\n        const error = await res.json();\n        throw new Error(error.detail || \"Registrierung fehlgeschlagen\");\n      }\n      const data = await res.json();\n      await AsyncStorage.default.setItem(\"token\", data.token);\n      setToken(data.token);\n      const me = await fetch(`${_config.API_URL}/auth/me`, {\n        headers: {\n          Authorization: `Bearer ${data.token}`\n        }\n      });\n      const userData = await me.json();\n\n      // Backend gibt userId zurück, aber Frontend erwartet id\n      const user = {\n        ...userData,\n        id: userData.userId\n      };\n      setUser(user);\n      return true;\n    }\n    async function signOut() {\n      await AsyncStorage.default.removeItem(\"token\");\n      setUser(null);\n      setToken(null);\n    }\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        loading,\n        login,\n        signUp,\n        signOut\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 5\n    }, this);\n  }\n  _s(AuthProvider, \"BJLYEWtx1XAvvNbKDl/BNSvb+Nw=\");\n  _c = AuthProvider;\n  function useAuth() {\n    _s2();\n    return (0, _react.useContext)(AuthContext);\n  }\n  _s2(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":153,"map":[[15,2,23,0,"exports"],[15,9,23,0],[15,10,23,0,"AuthProvider"],[15,22,23,0],[15,25,23,0,"AuthProvider"],[15,37,23,0],[16,2,113,0,"exports"],[16,9,113,0],[16,10,113,0,"useAuth"],[16,17,113,0],[16,20,113,0,"useAuth"],[16,27,113,0],[17,2,1,0],[17,6,1,0,"_react"],[17,12,1,0],[17,15,1,0,"require"],[17,22,1,0],[17,23,1,0,"_dependencyMap"],[17,37,1,0],[18,2,2,0],[18,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[18,42,2,0],[18,45,2,0,"require"],[18,52,2,0],[18,53,2,0,"_dependencyMap"],[18,67,2,0],[19,2,2,0],[19,6,2,0,"AsyncStorage"],[19,18,2,0],[19,21,2,0,"_interopDefault"],[19,36,2,0],[19,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[19,73,2,0],[20,2,3,0],[20,6,3,0,"_config"],[20,13,3,0],[20,16,3,0,"require"],[20,23,3,0],[20,24,3,0,"_dependencyMap"],[20,38,3,0],[21,2,3,36],[21,6,3,36,"_reactJsxDevRuntime"],[21,25,3,36],[21,28,3,36,"require"],[21,35,3,36],[21,36,3,36,"_dependencyMap"],[21,50,3,36],[22,2,14,0],[22,8,14,6,"AuthContext"],[22,19,14,17],[22,35,14,20],[22,39,14,20,"createContext"],[22,45,14,33],[22,46,14,33,"createContext"],[22,59,14,33],[22,61,14,52],[23,4,15,2,"user"],[23,8,15,6],[23,10,15,8],[23,14,15,12],[24,4,16,2,"token"],[24,9,16,7],[24,11,16,9],[24,15,16,13],[25,4,17,2,"loading"],[25,11,17,9],[25,13,17,11],[25,17,17,15],[26,4,18,2,"login"],[26,9,18,7],[26,11,18,9],[26,17,18,9,"login"],[26,18,18,9],[26,23,18,21],[26,28,18,26],[27,4,19,2,"signUp"],[27,10,19,8],[27,12,19,10],[27,18,19,10,"signUp"],[27,19,19,10],[27,24,19,22],[27,29,19,27],[28,4,20,2,"signOut"],[28,11,20,9],[28,13,20,11],[28,19,20,11,"signOut"],[28,20,20,11],[28,25,20,23],[28,26,20,24],[29,2,21,0],[29,3,21,1],[29,4,21,2],[30,2,23,7],[30,11,23,16,"AuthProvider"],[30,23,23,28,"AuthProvider"],[30,24,23,29],[31,4,23,31,"children"],[32,2,23,40],[32,3,23,41],[32,5,23,43],[33,4,23,43,"_s"],[33,6,23,43],[34,4,24,2],[34,10,24,8],[34,11,24,9,"token"],[34,16,24,14],[34,18,24,16,"setToken"],[34,26,24,24],[34,27,24,25],[34,30,24,28],[34,34,24,28,"useState"],[34,40,24,36],[34,41,24,36,"useState"],[34,49,24,36],[34,51,24,52],[34,55,24,56],[34,56,24,57],[35,4,25,2],[35,10,25,8],[35,11,25,9,"user"],[35,15,25,13],[35,17,25,15,"setUser"],[35,24,25,22],[35,25,25,23],[35,28,25,26],[35,32,25,26,"useState"],[35,38,25,34],[35,39,25,34,"useState"],[35,47,25,34],[35,49,25,40],[35,53,25,44],[35,54,25,45],[36,4,26,2],[36,10,26,8],[36,11,26,9,"loading"],[36,18,26,16],[36,20,26,18,"setLoading"],[36,30,26,28],[36,31,26,29],[36,34,26,32],[36,38,26,32,"useState"],[36,44,26,40],[36,45,26,40,"useState"],[36,53,26,40],[36,55,26,41],[36,59,26,45],[36,60,26,46],[37,4,28,2],[37,19,28,17,"loadSession"],[37,30,28,28,"loadSession"],[37,31,28,28],[37,33,28,31],[38,6,29,4],[38,12,29,10,"storedToken"],[38,23,29,21],[38,26,29,24],[38,32,29,30,"AsyncStorage"],[38,44,29,42],[38,45,29,42,"default"],[38,52,29,42],[38,53,29,43,"getItem"],[38,60,29,50],[38,61,29,51],[38,68,29,58],[38,69,29,59],[39,6,31,4],[39,10,31,8,"storedToken"],[39,21,31,19],[39,23,31,21],[40,8,32,6,"setToken"],[40,16,32,14],[40,17,32,15,"storedToken"],[40,28,32,26],[40,29,32,27],[41,8,33,6],[41,14,33,12,"me"],[41,16,33,14],[41,19,33,17],[41,25,33,23,"fetch"],[41,30,33,28],[41,31,33,29],[41,34,33,32,"API_URL"],[41,41,33,39],[41,42,33,39,"API_URL"],[41,49,33,39],[41,59,33,49],[41,61,33,51],[42,10,34,8,"headers"],[42,17,34,15],[42,19,34,17],[43,12,34,19,"Authorization"],[43,25,34,32],[43,27,34,34],[43,37,34,44,"storedToken"],[43,48,34,55],[44,10,34,58],[45,8,35,6],[45,9,35,7],[45,10,35,8],[46,8,36,6],[46,14,36,12,"data"],[46,18,36,16],[46,21,36,19],[46,27,36,25,"me"],[46,29,36,27],[46,30,36,28,"json"],[46,34,36,32],[46,35,36,33],[46,36,36,34],[47,8,37,6],[48,8,38,6],[48,14,38,12,"user"],[48,18,38,16],[48,21,38,19],[49,10,38,21],[49,13,38,24,"data"],[49,17,38,28],[50,10,38,30,"id"],[50,12,38,32],[50,14,38,34,"data"],[50,18,38,38],[50,19,38,39,"userId"],[51,8,38,46],[51,9,38,47],[52,8,39,6,"setUser"],[52,15,39,13],[52,16,39,14,"user"],[52,20,39,18],[52,21,39,19],[53,6,40,4],[54,6,42,4,"setLoading"],[54,16,42,14],[54,17,42,15],[54,22,42,20],[54,23,42,21],[55,4,43,2],[56,4,45,2],[56,8,45,2,"useEffect"],[56,14,45,11],[56,15,45,11,"useEffect"],[56,24,45,11],[56,26,45,12],[56,32,45,18],[57,6,46,4,"loadSession"],[57,17,46,15],[57,18,46,16],[57,19,46,17],[58,4,47,2],[58,5,47,3],[58,7,47,5],[58,9,47,7],[58,10,47,8],[59,4,49,2],[59,19,49,17,"login"],[59,24,49,22,"login"],[59,25,49,23,"email"],[59,30,49,36],[59,32,49,38,"password"],[59,40,49,54],[59,42,49,56],[60,6,50,4],[60,12,50,10,"res"],[60,15,50,13],[60,18,50,16],[60,24,50,22,"fetch"],[60,29,50,27],[60,30,50,28],[60,33,50,31,"API_URL"],[60,40,50,38],[60,41,50,38,"API_URL"],[60,48,50,38],[60,61,50,51],[60,63,50,53],[61,8,51,6,"method"],[61,14,51,12],[61,16,51,14],[61,22,51,20],[62,8,52,6,"headers"],[62,15,52,13],[62,17,52,15],[63,10,52,17],[63,24,52,31],[63,26,52,33],[64,8,52,52],[64,9,52,53],[65,8,53,6,"body"],[65,12,53,10],[65,14,53,12,"JSON"],[65,18,53,16],[65,19,53,17,"stringify"],[65,28,53,26],[65,29,53,27],[66,10,53,29,"email"],[66,15,53,34],[67,10,53,36,"password"],[68,8,53,45],[68,9,53,46],[69,6,54,4],[69,7,54,5],[69,8,54,6],[70,6,56,4],[70,10,56,8],[70,11,56,9,"res"],[70,14,56,12],[70,15,56,13,"ok"],[70,17,56,15],[70,19,56,17],[70,26,56,24],[70,31,56,29],[71,6,58,4],[71,12,58,10,"data"],[71,16,58,14],[71,19,58,17],[71,25,58,23,"res"],[71,28,58,26],[71,29,58,27,"json"],[71,33,58,31],[71,34,58,32],[71,35,58,33],[72,6,59,4],[72,12,59,10,"AsyncStorage"],[72,24,59,22],[72,25,59,22,"default"],[72,32,59,22],[72,33,59,23,"setItem"],[72,40,59,30],[72,41,59,31],[72,48,59,38],[72,50,59,40,"data"],[72,54,59,44],[72,55,59,45,"token"],[72,60,59,50],[72,61,59,51],[73,6,60,4,"setToken"],[73,14,60,12],[73,15,60,13,"data"],[73,19,60,17],[73,20,60,18,"token"],[73,25,60,23],[73,26,60,24],[74,6,62,4],[74,12,62,10,"me"],[74,14,62,12],[74,17,62,15],[74,23,62,21,"fetch"],[74,28,62,26],[74,29,62,27],[74,32,62,30,"API_URL"],[74,39,62,37],[74,40,62,37,"API_URL"],[74,47,62,37],[74,57,62,47],[74,59,62,49],[75,8,63,6,"headers"],[75,15,63,13],[75,17,63,15],[76,10,63,17,"Authorization"],[76,23,63,30],[76,25,63,32],[76,35,63,42,"data"],[76,39,63,46],[76,40,63,47,"token"],[76,45,63,52],[77,8,63,55],[78,6,64,4],[78,7,64,5],[78,8,64,6],[79,6,65,4],[79,12,65,10,"userData"],[79,20,65,18],[79,23,65,21],[79,29,65,27,"me"],[79,31,65,29],[79,32,65,30,"json"],[79,36,65,34],[79,37,65,35],[79,38,65,36],[81,6,67,4],[82,6,68,4],[82,12,68,10,"user"],[82,16,68,14],[82,19,68,17],[83,8,68,19],[83,11,68,22,"userData"],[83,19,68,30],[84,8,68,32,"id"],[84,10,68,34],[84,12,68,36,"userData"],[84,20,68,44],[84,21,68,45,"userId"],[85,6,68,52],[85,7,68,53],[86,6,69,4,"setUser"],[86,13,69,11],[86,14,69,12,"user"],[86,18,69,16],[86,19,69,17],[87,6,70,4],[87,13,70,11],[87,17,70,15],[88,4,71,2],[89,4,73,2],[89,19,73,17,"signUp"],[89,25,73,23,"signUp"],[89,26,73,24,"email"],[89,31,73,37],[89,33,73,39,"password"],[89,41,73,55],[89,43,73,57,"role"],[89,47,73,69],[89,49,73,71],[90,6,74,4],[90,12,74,10,"res"],[90,15,74,13],[90,18,74,16],[90,24,74,22,"fetch"],[90,29,74,27],[90,30,74,28],[90,33,74,31,"API_URL"],[90,40,74,38],[90,41,74,38,"API_URL"],[90,48,74,38],[90,62,74,52],[90,64,74,54],[91,8,75,6,"method"],[91,14,75,12],[91,16,75,14],[91,22,75,20],[92,8,76,6,"headers"],[92,15,76,13],[92,17,76,15],[93,10,76,17],[93,24,76,31],[93,26,76,33],[94,8,76,52],[94,9,76,53],[95,8,77,6,"body"],[95,12,77,10],[95,14,77,12,"JSON"],[95,18,77,16],[95,19,77,17,"stringify"],[95,28,77,26],[95,29,77,27],[96,10,77,29,"email"],[96,15,77,34],[97,10,77,36,"password"],[97,18,77,44],[98,10,77,46,"role"],[99,8,77,51],[99,9,77,52],[100,6,78,4],[100,7,78,5],[100,8,78,6],[101,6,80,4],[101,10,80,8],[101,11,80,9,"res"],[101,14,80,12],[101,15,80,13,"ok"],[101,17,80,15],[101,19,80,17],[102,8,81,6],[102,14,81,12,"error"],[102,19,81,17],[102,22,81,20],[102,28,81,26,"res"],[102,31,81,29],[102,32,81,30,"json"],[102,36,81,34],[102,37,81,35],[102,38,81,36],[103,8,82,6],[103,14,82,12],[103,18,82,16,"Error"],[103,23,82,21],[103,24,82,22,"error"],[103,29,82,27],[103,30,82,28,"detail"],[103,36,82,34],[103,40,82,38],[103,70,82,68],[103,71,82,69],[104,6,83,4],[105,6,85,4],[105,12,85,10,"data"],[105,16,85,14],[105,19,85,17],[105,25,85,23,"res"],[105,28,85,26],[105,29,85,27,"json"],[105,33,85,31],[105,34,85,32],[105,35,85,33],[106,6,86,4],[106,12,86,10,"AsyncStorage"],[106,24,86,22],[106,25,86,22,"default"],[106,32,86,22],[106,33,86,23,"setItem"],[106,40,86,30],[106,41,86,31],[106,48,86,38],[106,50,86,40,"data"],[106,54,86,44],[106,55,86,45,"token"],[106,60,86,50],[106,61,86,51],[107,6,87,4,"setToken"],[107,14,87,12],[107,15,87,13,"data"],[107,19,87,17],[107,20,87,18,"token"],[107,25,87,23],[107,26,87,24],[108,6,89,4],[108,12,89,10,"me"],[108,14,89,12],[108,17,89,15],[108,23,89,21,"fetch"],[108,28,89,26],[108,29,89,27],[108,32,89,30,"API_URL"],[108,39,89,37],[108,40,89,37,"API_URL"],[108,47,89,37],[108,57,89,47],[108,59,89,49],[109,8,90,6,"headers"],[109,15,90,13],[109,17,90,15],[110,10,90,17,"Authorization"],[110,23,90,30],[110,25,90,32],[110,35,90,42,"data"],[110,39,90,46],[110,40,90,47,"token"],[110,45,90,52],[111,8,90,55],[112,6,91,4],[112,7,91,5],[112,8,91,6],[113,6,92,4],[113,12,92,10,"userData"],[113,20,92,18],[113,23,92,21],[113,29,92,27,"me"],[113,31,92,29],[113,32,92,30,"json"],[113,36,92,34],[113,37,92,35],[113,38,92,36],[115,6,94,4],[116,6,95,4],[116,12,95,10,"user"],[116,16,95,14],[116,19,95,17],[117,8,95,19],[117,11,95,22,"userData"],[117,19,95,30],[118,8,95,32,"id"],[118,10,95,34],[118,12,95,36,"userData"],[118,20,95,44],[118,21,95,45,"userId"],[119,6,95,52],[119,7,95,53],[120,6,96,4,"setUser"],[120,13,96,11],[120,14,96,12,"user"],[120,18,96,16],[120,19,96,17],[121,6,97,4],[121,13,97,11],[121,17,97,15],[122,4,98,2],[123,4,100,2],[123,19,100,17,"signOut"],[123,26,100,24,"signOut"],[123,27,100,24],[123,29,100,27],[124,6,101,4],[124,12,101,10,"AsyncStorage"],[124,24,101,22],[124,25,101,22,"default"],[124,32,101,22],[124,33,101,23,"removeItem"],[124,43,101,33],[124,44,101,34],[124,51,101,41],[124,52,101,42],[125,6,102,4,"setUser"],[125,13,102,11],[125,14,102,12],[125,18,102,16],[125,19,102,17],[126,6,103,4,"setToken"],[126,14,103,12],[126,15,103,13],[126,19,103,17],[126,20,103,18],[127,4,104,2],[128,4,106,2],[128,24,107,4],[128,28,107,4,"_reactJsxDevRuntime"],[128,47,107,4],[128,48,107,4,"jsxDEV"],[128,54,107,4],[128,56,107,5,"AuthContext"],[128,67,107,16],[128,68,107,17,"Provider"],[128,76,107,25],[129,6,107,26,"value"],[129,11,107,31],[129,13,107,33],[130,8,107,35,"user"],[130,12,107,39],[131,8,107,41,"token"],[131,13,107,46],[132,8,107,48,"loading"],[132,15,107,55],[133,8,107,57,"login"],[133,13,107,62],[134,8,107,64,"signUp"],[134,14,107,70],[135,8,107,72,"signOut"],[136,6,107,80],[136,7,107,82],[137,6,107,82,"children"],[137,14,107,82],[137,16,108,7,"children"],[138,4,108,15],[139,6,108,15,"fileName"],[139,14,108,15],[139,16,108,15,"_jsxFileName"],[139,28,108,15],[140,6,108,15,"lineNumber"],[140,16,108,15],[141,6,108,15,"columnNumber"],[141,18,108,15],[142,4,108,15],[142,11,109,26],[142,12,109,27],[143,2,111,0],[144,2,111,1,"_s"],[144,4,111,1],[144,5,23,16,"AuthProvider"],[144,17,23,28],[145,2,23,28,"_c"],[145,4,23,28],[145,7,23,16,"AuthProvider"],[145,19,23,28],[146,2,113,7],[146,11,113,16,"useAuth"],[146,18,113,23,"useAuth"],[146,19,113,23],[146,21,113,26],[147,4,113,26,"_s2"],[147,7,113,26],[148,4,114,2],[148,11,114,9],[148,15,114,9,"useContext"],[148,21,114,19],[148,22,114,19,"useContext"],[148,32,114,19],[148,34,114,20,"AuthContext"],[148,45,114,31],[148,46,114,32],[149,2,115,0],[150,2,115,1,"_s2"],[150,5,115,1],[150,6,113,16,"useAuth"],[150,13,113,23],[151,2,113,23],[151,6,113,23,"_c"],[151,8,113,23],[152,2,113,23,"$RefreshReg$"],[152,14,113,23],[152,15,113,23,"_c"],[152,17,113,23],[153,0,113,23],[153,3]],"functionMap":{"names":["<global>","createContext$argument_0.login","createContext$argument_0.signUp","createContext$argument_0.signOut","AuthProvider","loadSession","useEffect$argument_0","login","signUp","signOut","useAuth"],"mappings":"AAA;SCiB,iBD;UEC,iBF;WGC,cH;OIG;ECK;GDe;YEE;GFE;EGE;GHsB;EIE;GJyB;EKE;GLI;CJO;OUE;CVE"},"hasCjsExports":false},"type":"js/module"}]}