{"dependencies":[{"name":"./api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":52},"end":{"line":2,"column":49,"index":101}}],"key":"FbKPDeRJ9TF3vg1eKYKz12urgic=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.getReviewsForWorker = getReviewsForWorker;\n  exports.getReviewsForEmployer = getReviewsForEmployer;\n  exports.addReview = addReview;\n  exports.getReviewsForJob = getReviewsForJob;\n  exports.calculateAverageRating = calculateAverageRating;\n  var _api = require(_dependencyMap[0], \"./api\");\n  // utils/reviewStore.ts - Review Store (REFACTORED)\n\n  // ===== GET REVIEWS FOR WORKER =====\n  async function getReviewsForWorker(workerId) {\n    console.log('ðŸ” getReviewsForWorker: Fetching reviews for worker', workerId);\n    try {\n      const headers = await (0, _api.getAuthHeaders)();\n      const response = await fetch(`${_api.API_BASE}/reviews/worker/${workerId}`, {\n        method: 'GET',\n        headers\n      });\n      if (!response.ok) {\n        const error = await response.text();\n        console.error('âŒ getReviewsForWorker: Failed', response.status, error);\n        throw new Error(`Failed to fetch reviews: ${response.status}`);\n      }\n      const reviews = await response.json();\n      console.log('âœ… getReviewsForWorker: Found', reviews.length, 'reviews');\n      return reviews;\n    } catch (error) {\n      console.error('âŒ getReviewsForWorker: Error', error);\n      throw error;\n    }\n  }\n\n  // ===== GET REVIEWS FOR EMPLOYER =====\n  async function getReviewsForEmployer(employerId) {\n    console.log('ðŸ” getReviewsForEmployer: Fetching reviews for employer', employerId);\n    try {\n      const headers = await (0, _api.getAuthHeaders)();\n      const response = await fetch(`${_api.API_BASE}/reviews/employer/${employerId}`, {\n        method: 'GET',\n        headers\n      });\n      if (!response.ok) {\n        const error = await response.text();\n        console.error('âŒ getReviewsForEmployer: Failed', response.status, error);\n        throw new Error(`Failed to fetch reviews: ${response.status}`);\n      }\n      const reviews = await response.json();\n      console.log('âœ… getReviewsForEmployer: Found', reviews.length, 'reviews');\n      return reviews;\n    } catch (error) {\n      console.error('âŒ getReviewsForEmployer: Error', error);\n      throw error;\n    }\n  }\n\n  // ===== ADD REVIEW =====\n  async function addReview(review) {\n    console.log('âž• addReview: Creating review');\n    try {\n      const headers = await (0, _api.getAuthHeaders)();\n      const response = await fetch(`${_api.API_BASE}/reviews`, {\n        method: 'POST',\n        headers,\n        body: JSON.stringify(review)\n      });\n      if (!response.ok) {\n        const error = await response.text();\n        console.error('âŒ addReview: Failed', response.status, error);\n        throw new Error(`Failed to create review: ${response.status}`);\n      }\n      const createdReview = await response.json();\n      console.log('âœ… addReview: Review created');\n      return createdReview;\n    } catch (error) {\n      console.error('âŒ addReview: Error', error);\n      throw error;\n    }\n  }\n\n  // ===== GET REVIEWS FOR JOB =====\n  async function getReviewsForJob(jobId) {\n    console.log('ðŸ” getReviewsForJob: Fetching reviews for job', jobId);\n    try {\n      const headers = await (0, _api.getAuthHeaders)();\n      const response = await fetch(`${_api.API_BASE}/reviews/job/${jobId}`, {\n        method: 'GET',\n        headers\n      });\n      if (!response.ok) {\n        // If endpoint doesn't exist or returns 404, return empty array\n        if (response.status === 404) {\n          console.log('âš ï¸ getReviewsForJob: No reviews found for job');\n          return [];\n        }\n        const error = await response.text();\n        console.error('âŒ getReviewsForJob: Failed', response.status, error);\n        throw new Error(`Failed to fetch reviews: ${response.status}`);\n      }\n      const reviews = await response.json();\n      console.log('âœ… getReviewsForJob: Found', reviews.length, 'reviews');\n      return reviews;\n    } catch (error) {\n      console.error('âŒ getReviewsForJob: Error', error);\n      // Return empty array on error instead of throwing\n      return [];\n    }\n  }\n\n  // ===== CALCULATE AVERAGE RATING =====\n  function calculateAverageRating(reviews) {\n    if (reviews.length === 0) return 0;\n    const sum = reviews.reduce((acc, review) => acc + review.rating, 0);\n    return sum / reviews.length;\n  }\n});","lineCount":120,"map":[[7,2,15,0,"exports"],[7,9,15,0],[7,10,15,0,"getReviewsForWorker"],[7,29,15,0],[7,32,15,0,"getReviewsForWorker"],[7,51,15,0],[8,2,42,0,"exports"],[8,9,42,0],[8,10,42,0,"getReviewsForEmployer"],[8,31,42,0],[8,34,42,0,"getReviewsForEmployer"],[8,55,42,0],[9,2,69,0,"exports"],[9,9,69,0],[9,10,69,0,"addReview"],[9,19,69,0],[9,22,69,0,"addReview"],[9,31,69,0],[10,2,97,0,"exports"],[10,9,97,0],[10,10,97,0,"getReviewsForJob"],[10,26,97,0],[10,29,97,0,"getReviewsForJob"],[10,45,97,0],[11,2,130,0,"exports"],[11,9,130,0],[11,10,130,0,"calculateAverageRating"],[11,32,130,0],[11,35,130,0,"calculateAverageRating"],[11,57,130,0],[12,2,2,0],[12,6,2,0,"_api"],[12,10,2,0],[12,13,2,0,"require"],[12,20,2,0],[12,21,2,0,"_dependencyMap"],[12,35,2,0],[13,2,1,0],[15,2,14,0],[16,2,15,7],[16,17,15,22,"getReviewsForWorker"],[16,36,15,41,"getReviewsForWorker"],[16,37,15,42,"workerId"],[16,45,15,58],[16,47,15,79],[17,4,16,2,"console"],[17,11,16,9],[17,12,16,10,"log"],[17,15,16,13],[17,16,16,14],[17,69,16,67],[17,71,16,69,"workerId"],[17,79,16,77],[17,80,16,78],[18,4,18,2],[18,8,18,6],[19,6,19,4],[19,12,19,10,"headers"],[19,19,19,17],[19,22,19,20],[19,28,19,26],[19,32,19,26,"getAuthHeaders"],[19,36,19,40],[19,37,19,40,"getAuthHeaders"],[19,51,19,40],[19,53,19,41],[19,54,19,42],[20,6,21,4],[20,12,21,10,"response"],[20,20,21,18],[20,23,21,21],[20,29,21,27,"fetch"],[20,34,21,32],[20,35,21,33],[20,38,21,36,"API_BASE"],[20,42,21,44],[20,43,21,44,"API_BASE"],[20,51,21,44],[20,70,21,63,"workerId"],[20,78,21,71],[20,80,21,73],[20,82,21,75],[21,8,22,6,"method"],[21,14,22,12],[21,16,22,14],[21,21,22,19],[22,8,23,6,"headers"],[23,6,24,4],[23,7,24,5],[23,8,24,6],[24,6,26,4],[24,10,26,8],[24,11,26,9,"response"],[24,19,26,17],[24,20,26,18,"ok"],[24,22,26,20],[24,24,26,22],[25,8,27,6],[25,14,27,12,"error"],[25,19,27,17],[25,22,27,20],[25,28,27,26,"response"],[25,36,27,34],[25,37,27,35,"text"],[25,41,27,39],[25,42,27,40],[25,43,27,41],[26,8,28,6,"console"],[26,15,28,13],[26,16,28,14,"error"],[26,21,28,19],[26,22,28,20],[26,53,28,51],[26,55,28,53,"response"],[26,63,28,61],[26,64,28,62,"status"],[26,70,28,68],[26,72,28,70,"error"],[26,77,28,75],[26,78,28,76],[27,8,29,6],[27,14,29,12],[27,18,29,16,"Error"],[27,23,29,21],[27,24,29,22],[27,52,29,50,"response"],[27,60,29,58],[27,61,29,59,"status"],[27,67,29,65],[27,69,29,67],[27,70,29,68],[28,6,30,4],[29,6,32,4],[29,12,32,10,"reviews"],[29,19,32,17],[29,22,32,20],[29,28,32,26,"response"],[29,36,32,34],[29,37,32,35,"json"],[29,41,32,39],[29,42,32,40],[29,43,32,41],[30,6,33,4,"console"],[30,13,33,11],[30,14,33,12,"log"],[30,17,33,15],[30,18,33,16],[30,48,33,46],[30,50,33,48,"reviews"],[30,57,33,55],[30,58,33,56,"length"],[30,64,33,62],[30,66,33,64],[30,75,33,73],[30,76,33,74],[31,6,34,4],[31,13,34,11,"reviews"],[31,20,34,18],[32,4,35,2],[32,5,35,3],[32,6,35,4],[32,13,35,11,"error"],[32,18,35,16],[32,20,35,18],[33,6,36,4,"console"],[33,13,36,11],[33,14,36,12,"error"],[33,19,36,17],[33,20,36,18],[33,50,36,48],[33,52,36,50,"error"],[33,57,36,55],[33,58,36,56],[34,6,37,4],[34,12,37,10,"error"],[34,17,37,15],[35,4,38,2],[36,2,39,0],[38,2,41,0],[39,2,42,7],[39,17,42,22,"getReviewsForEmployer"],[39,38,42,43,"getReviewsForEmployer"],[39,39,42,44,"employerId"],[39,49,42,62],[39,51,42,83],[40,4,43,2,"console"],[40,11,43,9],[40,12,43,10,"log"],[40,15,43,13],[40,16,43,14],[40,73,43,71],[40,75,43,73,"employerId"],[40,85,43,83],[40,86,43,84],[41,4,45,2],[41,8,45,6],[42,6,46,4],[42,12,46,10,"headers"],[42,19,46,17],[42,22,46,20],[42,28,46,26],[42,32,46,26,"getAuthHeaders"],[42,36,46,40],[42,37,46,40,"getAuthHeaders"],[42,51,46,40],[42,53,46,41],[42,54,46,42],[43,6,48,4],[43,12,48,10,"response"],[43,20,48,18],[43,23,48,21],[43,29,48,27,"fetch"],[43,34,48,32],[43,35,48,33],[43,38,48,36,"API_BASE"],[43,42,48,44],[43,43,48,44,"API_BASE"],[43,51,48,44],[43,72,48,65,"employerId"],[43,82,48,75],[43,84,48,77],[43,86,48,79],[44,8,49,6,"method"],[44,14,49,12],[44,16,49,14],[44,21,49,19],[45,8,50,6,"headers"],[46,6,51,4],[46,7,51,5],[46,8,51,6],[47,6,53,4],[47,10,53,8],[47,11,53,9,"response"],[47,19,53,17],[47,20,53,18,"ok"],[47,22,53,20],[47,24,53,22],[48,8,54,6],[48,14,54,12,"error"],[48,19,54,17],[48,22,54,20],[48,28,54,26,"response"],[48,36,54,34],[48,37,54,35,"text"],[48,41,54,39],[48,42,54,40],[48,43,54,41],[49,8,55,6,"console"],[49,15,55,13],[49,16,55,14,"error"],[49,21,55,19],[49,22,55,20],[49,55,55,53],[49,57,55,55,"response"],[49,65,55,63],[49,66,55,64,"status"],[49,72,55,70],[49,74,55,72,"error"],[49,79,55,77],[49,80,55,78],[50,8,56,6],[50,14,56,12],[50,18,56,16,"Error"],[50,23,56,21],[50,24,56,22],[50,52,56,50,"response"],[50,60,56,58],[50,61,56,59,"status"],[50,67,56,65],[50,69,56,67],[50,70,56,68],[51,6,57,4],[52,6,59,4],[52,12,59,10,"reviews"],[52,19,59,17],[52,22,59,20],[52,28,59,26,"response"],[52,36,59,34],[52,37,59,35,"json"],[52,41,59,39],[52,42,59,40],[52,43,59,41],[53,6,60,4,"console"],[53,13,60,11],[53,14,60,12,"log"],[53,17,60,15],[53,18,60,16],[53,50,60,48],[53,52,60,50,"reviews"],[53,59,60,57],[53,60,60,58,"length"],[53,66,60,64],[53,68,60,66],[53,77,60,75],[53,78,60,76],[54,6,61,4],[54,13,61,11,"reviews"],[54,20,61,18],[55,4,62,2],[55,5,62,3],[55,6,62,4],[55,13,62,11,"error"],[55,18,62,16],[55,20,62,18],[56,6,63,4,"console"],[56,13,63,11],[56,14,63,12,"error"],[56,19,63,17],[56,20,63,18],[56,52,63,50],[56,54,63,52,"error"],[56,59,63,57],[56,60,63,58],[57,6,64,4],[57,12,64,10,"error"],[57,17,64,15],[58,4,65,2],[59,2,66,0],[61,2,68,0],[62,2,69,7],[62,17,69,22,"addReview"],[62,26,69,31,"addReview"],[62,27,69,32,"review"],[62,33,69,72],[62,35,69,91],[63,4,70,2,"console"],[63,11,70,9],[63,12,70,10,"log"],[63,15,70,13],[63,16,70,14],[63,46,70,44],[63,47,70,45],[64,4,72,2],[64,8,72,6],[65,6,73,4],[65,12,73,10,"headers"],[65,19,73,17],[65,22,73,20],[65,28,73,26],[65,32,73,26,"getAuthHeaders"],[65,36,73,40],[65,37,73,40,"getAuthHeaders"],[65,51,73,40],[65,53,73,41],[65,54,73,42],[66,6,75,4],[66,12,75,10,"response"],[66,20,75,18],[66,23,75,21],[66,29,75,27,"fetch"],[66,34,75,32],[66,35,75,33],[66,38,75,36,"API_BASE"],[66,42,75,44],[66,43,75,44,"API_BASE"],[66,51,75,44],[66,61,75,54],[66,63,75,56],[67,8,76,6,"method"],[67,14,76,12],[67,16,76,14],[67,22,76,20],[68,8,77,6,"headers"],[68,15,77,13],[69,8,78,6,"body"],[69,12,78,10],[69,14,78,12,"JSON"],[69,18,78,16],[69,19,78,17,"stringify"],[69,28,78,26],[69,29,78,27,"review"],[69,35,78,33],[70,6,79,4],[70,7,79,5],[70,8,79,6],[71,6,81,4],[71,10,81,8],[71,11,81,9,"response"],[71,19,81,17],[71,20,81,18,"ok"],[71,22,81,20],[71,24,81,22],[72,8,82,6],[72,14,82,12,"error"],[72,19,82,17],[72,22,82,20],[72,28,82,26,"response"],[72,36,82,34],[72,37,82,35,"text"],[72,41,82,39],[72,42,82,40],[72,43,82,41],[73,8,83,6,"console"],[73,15,83,13],[73,16,83,14,"error"],[73,21,83,19],[73,22,83,20],[73,43,83,41],[73,45,83,43,"response"],[73,53,83,51],[73,54,83,52,"status"],[73,60,83,58],[73,62,83,60,"error"],[73,67,83,65],[73,68,83,66],[74,8,84,6],[74,14,84,12],[74,18,84,16,"Error"],[74,23,84,21],[74,24,84,22],[74,52,84,50,"response"],[74,60,84,58],[74,61,84,59,"status"],[74,67,84,65],[74,69,84,67],[74,70,84,68],[75,6,85,4],[76,6,87,4],[76,12,87,10,"createdReview"],[76,25,87,23],[76,28,87,26],[76,34,87,32,"response"],[76,42,87,40],[76,43,87,41,"json"],[76,47,87,45],[76,48,87,46],[76,49,87,47],[77,6,88,4,"console"],[77,13,88,11],[77,14,88,12,"log"],[77,17,88,15],[77,18,88,16],[77,47,88,45],[77,48,88,46],[78,6,89,4],[78,13,89,11,"createdReview"],[78,26,89,24],[79,4,90,2],[79,5,90,3],[79,6,90,4],[79,13,90,11,"error"],[79,18,90,16],[79,20,90,18],[80,6,91,4,"console"],[80,13,91,11],[80,14,91,12,"error"],[80,19,91,17],[80,20,91,18],[80,40,91,38],[80,42,91,40,"error"],[80,47,91,45],[80,48,91,46],[81,6,92,4],[81,12,92,10,"error"],[81,17,92,15],[82,4,93,2],[83,2,94,0],[85,2,96,0],[86,2,97,7],[86,17,97,22,"getReviewsForJob"],[86,33,97,38,"getReviewsForJob"],[86,34,97,39,"jobId"],[86,39,97,52],[86,41,97,73],[87,4,98,2,"console"],[87,11,98,9],[87,12,98,10,"log"],[87,15,98,13],[87,16,98,14],[87,63,98,61],[87,65,98,63,"jobId"],[87,70,98,68],[87,71,98,69],[88,4,100,2],[88,8,100,6],[89,6,101,4],[89,12,101,10,"headers"],[89,19,101,17],[89,22,101,20],[89,28,101,26],[89,32,101,26,"getAuthHeaders"],[89,36,101,40],[89,37,101,40,"getAuthHeaders"],[89,51,101,40],[89,53,101,41],[89,54,101,42],[90,6,103,4],[90,12,103,10,"response"],[90,20,103,18],[90,23,103,21],[90,29,103,27,"fetch"],[90,34,103,32],[90,35,103,33],[90,38,103,36,"API_BASE"],[90,42,103,44],[90,43,103,44,"API_BASE"],[90,51,103,44],[90,67,103,60,"jobId"],[90,72,103,65],[90,74,103,67],[90,76,103,69],[91,8,104,6,"method"],[91,14,104,12],[91,16,104,14],[91,21,104,19],[92,8,105,6,"headers"],[93,6,106,4],[93,7,106,5],[93,8,106,6],[94,6,108,4],[94,10,108,8],[94,11,108,9,"response"],[94,19,108,17],[94,20,108,18,"ok"],[94,22,108,20],[94,24,108,22],[95,8,109,6],[96,8,110,6],[96,12,110,10,"response"],[96,20,110,18],[96,21,110,19,"status"],[96,27,110,25],[96,32,110,30],[96,35,110,33],[96,37,110,35],[97,10,111,8,"console"],[97,17,111,15],[97,18,111,16,"log"],[97,21,111,19],[97,22,111,20],[97,69,111,67],[97,70,111,68],[98,10,112,8],[98,17,112,15],[98,19,112,17],[99,8,113,6],[100,8,114,6],[100,14,114,12,"error"],[100,19,114,17],[100,22,114,20],[100,28,114,26,"response"],[100,36,114,34],[100,37,114,35,"text"],[100,41,114,39],[100,42,114,40],[100,43,114,41],[101,8,115,6,"console"],[101,15,115,13],[101,16,115,14,"error"],[101,21,115,19],[101,22,115,20],[101,50,115,48],[101,52,115,50,"response"],[101,60,115,58],[101,61,115,59,"status"],[101,67,115,65],[101,69,115,67,"error"],[101,74,115,72],[101,75,115,73],[102,8,116,6],[102,14,116,12],[102,18,116,16,"Error"],[102,23,116,21],[102,24,116,22],[102,52,116,50,"response"],[102,60,116,58],[102,61,116,59,"status"],[102,67,116,65],[102,69,116,67],[102,70,116,68],[103,6,117,4],[104,6,119,4],[104,12,119,10,"reviews"],[104,19,119,17],[104,22,119,20],[104,28,119,26,"response"],[104,36,119,34],[104,37,119,35,"json"],[104,41,119,39],[104,42,119,40],[104,43,119,41],[105,6,120,4,"console"],[105,13,120,11],[105,14,120,12,"log"],[105,17,120,15],[105,18,120,16],[105,45,120,43],[105,47,120,45,"reviews"],[105,54,120,52],[105,55,120,53,"length"],[105,61,120,59],[105,63,120,61],[105,72,120,70],[105,73,120,71],[106,6,121,4],[106,13,121,11,"reviews"],[106,20,121,18],[107,4,122,2],[107,5,122,3],[107,6,122,4],[107,13,122,11,"error"],[107,18,122,16],[107,20,122,18],[108,6,123,4,"console"],[108,13,123,11],[108,14,123,12,"error"],[108,19,123,17],[108,20,123,18],[108,47,123,45],[108,49,123,47,"error"],[108,54,123,52],[108,55,123,53],[109,6,124,4],[110,6,125,4],[110,13,125,11],[110,15,125,13],[111,4,126,2],[112,2,127,0],[114,2,129,0],[115,2,130,7],[115,11,130,16,"calculateAverageRating"],[115,33,130,38,"calculateAverageRating"],[115,34,130,39,"reviews"],[115,41,130,56],[115,43,130,66],[116,4,131,2],[116,8,131,6,"reviews"],[116,15,131,13],[116,16,131,14,"length"],[116,22,131,20],[116,27,131,25],[116,28,131,26],[116,30,131,28],[116,37,131,35],[116,38,131,36],[117,4,132,2],[117,10,132,8,"sum"],[117,13,132,11],[117,16,132,14,"reviews"],[117,23,132,21],[117,24,132,22,"reduce"],[117,30,132,28],[117,31,132,29],[117,32,132,30,"acc"],[117,35,132,33],[117,37,132,35,"review"],[117,43,132,41],[117,48,132,46,"acc"],[117,51,132,49],[117,54,132,52,"review"],[117,60,132,58],[117,61,132,59,"rating"],[117,67,132,65],[117,69,132,67],[117,70,132,68],[117,71,132,69],[118,4,133,2],[118,11,133,9,"sum"],[118,14,133,12],[118,17,133,15,"reviews"],[118,24,133,22],[118,25,133,23,"length"],[118,31,133,29],[119,2,134,0],[120,0,134,1],[120,3]],"functionMap":{"names":["<global>","getReviewsForWorker","getReviewsForEmployer","addReview","getReviewsForJob","calculateAverageRating","reviews.reduce$argument_0"],"mappings":"AAA;OCc;CDwB;OEG;CFwB;OGG;CHyB;OIG;CJ8B;OKG;6BCE,oCD;CLE"},"hasCjsExports":false},"type":"js/module"}]}