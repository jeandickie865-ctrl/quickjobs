{"dependencies":[{"name":"./api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":111},"end":{"line":3,"column":60,"index":171}}],"key":"FbKPDeRJ9TF3vg1eKYKz12urgic=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.getWorkerProfile = getWorkerProfile;\n  exports.saveWorkerProfile = saveWorkerProfile;\n  var _api = require(_dependencyMap[0], \"./api\");\n  // utils/profileStore.ts - Worker Profile Store (REFACTORED)\n\n  // ===== GET WORKER PROFILE =====\n  async function getWorkerProfile(userId) {\n    // If no userId provided, get it from auth\n    if (!userId) {\n      userId = await (0, _api.getUserId)();\n      if (!userId) {\n        console.error('‚ùå getWorkerProfile: No userId provided and not authenticated');\n        throw new Error('Not authenticated');\n      }\n    }\n    console.log('üîç getWorkerProfile: Loading profile for user', userId);\n    try {\n      const headers = await (0, _api.getAuthHeaders)();\n      const response = await fetch(`${_api.API_BASE}/profiles/worker/${userId}`, {\n        method: 'GET',\n        headers\n      });\n      if (response.status === 404) {\n        console.log('‚ö†Ô∏è getWorkerProfile: Profile not found (404)');\n        return null;\n      }\n      if (!response.ok) {\n        const error = await response.text();\n        console.error('‚ùå getWorkerProfile: API error', response.status, error);\n        throw new Error(`Failed to fetch profile: ${response.status}`);\n      }\n      const profile = await response.json();\n      console.log('‚úÖ getWorkerProfile: Profile loaded', {\n        userId: profile.userId,\n        categories: profile.categories?.length || 0,\n        tags: profile.selectedTags?.length || 0\n      });\n      return profile;\n    } catch (error) {\n      console.error('‚ùå getWorkerProfile: Error', error);\n      throw error;\n    }\n  }\n\n  // ===== SAVE WORKER PROFILE =====\n  async function saveWorkerProfile(userId, profileData) {\n    console.log('üíæ saveWorkerProfile: Saving profile for', userId);\n    console.log('üíæ saveWorkerProfile: Data:', profileData);\n    try {\n      const headers = await (0, _api.getAuthHeaders)();\n\n      // Try PUT first (update existing)\n      let response = await fetch(`${_api.API_BASE}/profiles/worker/${userId}`, {\n        method: 'PUT',\n        headers,\n        body: JSON.stringify(profileData)\n      });\n      console.log('üì• saveWorkerProfile: PUT response status:', response.status);\n\n      // If 404, profile doesn't exist - create with POST\n      if (response.status === 404) {\n        console.log('‚ö†Ô∏è saveWorkerProfile: Profile not found, creating new via POST');\n        response = await fetch(`${_api.API_BASE}/profiles/worker`, {\n          method: 'POST',\n          headers,\n          body: JSON.stringify(profileData)\n        });\n        console.log('üì• saveWorkerProfile: POST response status:', response.status);\n      }\n      if (!response.ok) {\n        const errorText = await response.text();\n        console.error('‚ùå saveWorkerProfile: Backend error:', errorText);\n        throw new Error(`Server Error ${response.status}: ${errorText}`);\n      }\n      const result = await response.json();\n      console.log('‚úÖ saveWorkerProfile: Profile saved successfully', result);\n    } catch (error) {\n      console.error('‚ùå saveWorkerProfile: Exception:', error.message);\n      throw error;\n    }\n  }\n});","lineCount":88,"map":[[7,2,6,0,"exports"],[7,9,6,0],[7,10,6,0,"getWorkerProfile"],[7,26,6,0],[7,29,6,0,"getWorkerProfile"],[7,45,6,0],[8,2,52,0,"exports"],[8,9,52,0],[8,10,52,0,"saveWorkerProfile"],[8,27,52,0],[8,30,52,0,"saveWorkerProfile"],[8,47,52,0],[9,2,3,0],[9,6,3,0,"_api"],[9,10,3,0],[9,13,3,0,"require"],[9,20,3,0],[9,21,3,0,"_dependencyMap"],[9,35,3,0],[10,2,1,0],[12,2,5,0],[13,2,6,7],[13,17,6,22,"getWorkerProfile"],[13,33,6,38,"getWorkerProfile"],[13,34,6,39,"userId"],[13,40,6,54],[13,42,6,87],[14,4,7,2],[15,4,8,2],[15,8,8,6],[15,9,8,7,"userId"],[15,15,8,13],[15,17,8,15],[16,6,9,4,"userId"],[16,12,9,10],[16,15,9,13],[16,21,9,19],[16,25,9,19,"getUserId"],[16,29,9,28],[16,30,9,28,"getUserId"],[16,39,9,28],[16,41,9,29],[16,42,9,30],[17,6,10,4],[17,10,10,8],[17,11,10,9,"userId"],[17,17,10,15],[17,19,10,17],[18,8,11,6,"console"],[18,15,11,13],[18,16,11,14,"error"],[18,21,11,19],[18,22,11,20],[18,84,11,82],[18,85,11,83],[19,8,12,6],[19,14,12,12],[19,18,12,16,"Error"],[19,23,12,21],[19,24,12,22],[19,43,12,41],[19,44,12,42],[20,6,13,4],[21,4,14,2],[22,4,16,2,"console"],[22,11,16,9],[22,12,16,10,"log"],[22,15,16,13],[22,16,16,14],[22,63,16,61],[22,65,16,63,"userId"],[22,71,16,69],[22,72,16,70],[23,4,18,2],[23,8,18,6],[24,6,19,4],[24,12,19,10,"headers"],[24,19,19,17],[24,22,19,20],[24,28,19,26],[24,32,19,26,"getAuthHeaders"],[24,36,19,40],[24,37,19,40,"getAuthHeaders"],[24,51,19,40],[24,53,19,41],[24,54,19,42],[25,6,21,4],[25,12,21,10,"response"],[25,20,21,18],[25,23,21,21],[25,29,21,27,"fetch"],[25,34,21,32],[25,35,21,33],[25,38,21,36,"API_BASE"],[25,42,21,44],[25,43,21,44,"API_BASE"],[25,51,21,44],[25,71,21,64,"userId"],[25,77,21,70],[25,79,21,72],[25,81,21,74],[26,8,22,6,"method"],[26,14,22,12],[26,16,22,14],[26,21,22,19],[27,8,23,6,"headers"],[28,6,24,4],[28,7,24,5],[28,8,24,6],[29,6,26,4],[29,10,26,8,"response"],[29,18,26,16],[29,19,26,17,"status"],[29,25,26,23],[29,30,26,28],[29,33,26,31],[29,35,26,33],[30,8,27,6,"console"],[30,15,27,13],[30,16,27,14,"log"],[30,19,27,17],[30,20,27,18],[30,66,27,64],[30,67,27,65],[31,8,28,6],[31,15,28,13],[31,19,28,17],[32,6,29,4],[33,6,31,4],[33,10,31,8],[33,11,31,9,"response"],[33,19,31,17],[33,20,31,18,"ok"],[33,22,31,20],[33,24,31,22],[34,8,32,6],[34,14,32,12,"error"],[34,19,32,17],[34,22,32,20],[34,28,32,26,"response"],[34,36,32,34],[34,37,32,35,"text"],[34,41,32,39],[34,42,32,40],[34,43,32,41],[35,8,33,6,"console"],[35,15,33,13],[35,16,33,14,"error"],[35,21,33,19],[35,22,33,20],[35,53,33,51],[35,55,33,53,"response"],[35,63,33,61],[35,64,33,62,"status"],[35,70,33,68],[35,72,33,70,"error"],[35,77,33,75],[35,78,33,76],[36,8,34,6],[36,14,34,12],[36,18,34,16,"Error"],[36,23,34,21],[36,24,34,22],[36,52,34,50,"response"],[36,60,34,58],[36,61,34,59,"status"],[36,67,34,65],[36,69,34,67],[36,70,34,68],[37,6,35,4],[38,6,37,4],[38,12,37,10,"profile"],[38,19,37,17],[38,22,37,20],[38,28,37,26,"response"],[38,36,37,34],[38,37,37,35,"json"],[38,41,37,39],[38,42,37,40],[38,43,37,41],[39,6,38,4,"console"],[39,13,38,11],[39,14,38,12,"log"],[39,17,38,15],[39,18,38,16],[39,54,38,52],[39,56,38,54],[40,8,39,6,"userId"],[40,14,39,12],[40,16,39,14,"profile"],[40,23,39,21],[40,24,39,22,"userId"],[40,30,39,28],[41,8,40,6,"categories"],[41,18,40,16],[41,20,40,18,"profile"],[41,27,40,25],[41,28,40,26,"categories"],[41,38,40,36],[41,40,40,38,"length"],[41,46,40,44],[41,50,40,48],[41,51,40,49],[42,8,41,6,"tags"],[42,12,41,10],[42,14,41,12,"profile"],[42,21,41,19],[42,22,41,20,"selectedTags"],[42,34,41,32],[42,36,41,34,"length"],[42,42,41,40],[42,46,41,44],[43,6,42,4],[43,7,42,5],[43,8,42,6],[44,6,44,4],[44,13,44,11,"profile"],[44,20,44,18],[45,4,45,2],[45,5,45,3],[45,6,45,4],[45,13,45,11,"error"],[45,18,45,16],[45,20,45,18],[46,6,46,4,"console"],[46,13,46,11],[46,14,46,12,"error"],[46,19,46,17],[46,20,46,18],[46,47,46,45],[46,49,46,47,"error"],[46,54,46,52],[46,55,46,53],[47,6,47,4],[47,12,47,10,"error"],[47,17,47,15],[48,4,48,2],[49,2,49,0],[51,2,51,0],[52,2,52,7],[52,17,52,22,"saveWorkerProfile"],[52,34,52,39,"saveWorkerProfile"],[52,35,53,2,"userId"],[52,41,53,16],[52,43,54,2,"profileData"],[52,54,54,37],[52,56,55,17],[53,4,56,2,"console"],[53,11,56,9],[53,12,56,10,"log"],[53,15,56,13],[53,16,56,14],[53,58,56,56],[53,60,56,58,"userId"],[53,66,56,64],[53,67,56,65],[54,4,57,2,"console"],[54,11,57,9],[54,12,57,10,"log"],[54,15,57,13],[54,16,57,14],[54,45,57,43],[54,47,57,45,"profileData"],[54,58,57,56],[54,59,57,57],[55,4,59,2],[55,8,59,6],[56,6,60,4],[56,12,60,10,"headers"],[56,19,60,17],[56,22,60,20],[56,28,60,26],[56,32,60,26,"getAuthHeaders"],[56,36,60,40],[56,37,60,40,"getAuthHeaders"],[56,51,60,40],[56,53,60,41],[56,54,60,42],[58,6,62,4],[59,6,63,4],[59,10,63,8,"response"],[59,18,63,16],[59,21,63,19],[59,27,63,25,"fetch"],[59,32,63,30],[59,33,63,31],[59,36,63,34,"API_BASE"],[59,40,63,42],[59,41,63,42,"API_BASE"],[59,49,63,42],[59,69,63,62,"userId"],[59,75,63,68],[59,77,63,70],[59,79,63,72],[60,8,64,6,"method"],[60,14,64,12],[60,16,64,14],[60,21,64,19],[61,8,65,6,"headers"],[61,15,65,13],[62,8,66,6,"body"],[62,12,66,10],[62,14,66,12,"JSON"],[62,18,66,16],[62,19,66,17,"stringify"],[62,28,66,26],[62,29,66,27,"profileData"],[62,40,66,38],[63,6,67,4],[63,7,67,5],[63,8,67,6],[64,6,69,4,"console"],[64,13,69,11],[64,14,69,12,"log"],[64,17,69,15],[64,18,69,16],[64,62,69,60],[64,64,69,62,"response"],[64,72,69,70],[64,73,69,71,"status"],[64,79,69,77],[64,80,69,78],[66,6,71,4],[67,6,72,4],[67,10,72,8,"response"],[67,18,72,16],[67,19,72,17,"status"],[67,25,72,23],[67,30,72,28],[67,33,72,31],[67,35,72,33],[68,8,73,6,"console"],[68,15,73,13],[68,16,73,14,"log"],[68,19,73,17],[68,20,73,18],[68,84,73,82],[68,85,73,83],[69,8,75,6,"response"],[69,16,75,14],[69,19,75,17],[69,25,75,23,"fetch"],[69,30,75,28],[69,31,75,29],[69,34,75,32,"API_BASE"],[69,38,75,40],[69,39,75,40,"API_BASE"],[69,47,75,40],[69,65,75,58],[69,67,75,60],[70,10,76,8,"method"],[70,16,76,14],[70,18,76,16],[70,24,76,22],[71,10,77,8,"headers"],[71,17,77,15],[72,10,78,8,"body"],[72,14,78,12],[72,16,78,14,"JSON"],[72,20,78,18],[72,21,78,19,"stringify"],[72,30,78,28],[72,31,78,29,"profileData"],[72,42,78,40],[73,8,79,6],[73,9,79,7],[73,10,79,8],[74,8,81,6,"console"],[74,15,81,13],[74,16,81,14,"log"],[74,19,81,17],[74,20,81,18],[74,65,81,63],[74,67,81,65,"response"],[74,75,81,73],[74,76,81,74,"status"],[74,82,81,80],[74,83,81,81],[75,6,82,4],[76,6,84,4],[76,10,84,8],[76,11,84,9,"response"],[76,19,84,17],[76,20,84,18,"ok"],[76,22,84,20],[76,24,84,22],[77,8,85,6],[77,14,85,12,"errorText"],[77,23,85,21],[77,26,85,24],[77,32,85,30,"response"],[77,40,85,38],[77,41,85,39,"text"],[77,45,85,43],[77,46,85,44],[77,47,85,45],[78,8,86,6,"console"],[78,15,86,13],[78,16,86,14,"error"],[78,21,86,19],[78,22,86,20],[78,59,86,57],[78,61,86,59,"errorText"],[78,70,86,68],[78,71,86,69],[79,8,87,6],[79,14,87,12],[79,18,87,16,"Error"],[79,23,87,21],[79,24,87,22],[79,40,87,38,"response"],[79,48,87,46],[79,49,87,47,"status"],[79,55,87,53],[79,60,87,58,"errorText"],[79,69,87,67],[79,71,87,69],[79,72,87,70],[80,6,88,4],[81,6,90,4],[81,12,90,10,"result"],[81,18,90,16],[81,21,90,19],[81,27,90,25,"response"],[81,35,90,33],[81,36,90,34,"json"],[81,40,90,38],[81,41,90,39],[81,42,90,40],[82,6,91,4,"console"],[82,13,91,11],[82,14,91,12,"log"],[82,17,91,15],[82,18,91,16],[82,67,91,65],[82,69,91,67,"result"],[82,75,91,73],[82,76,91,74],[83,4,92,2],[83,5,92,3],[83,6,92,4],[83,13,92,11,"error"],[83,18,92,21],[83,20,92,23],[84,6,93,4,"console"],[84,13,93,11],[84,14,93,12,"error"],[84,19,93,17],[84,20,93,18],[84,53,93,51],[84,55,93,53,"error"],[84,60,93,58],[84,61,93,59,"message"],[84,68,93,66],[84,69,93,67],[85,6,94,4],[85,12,94,10,"error"],[85,17,94,15],[86,4,95,2],[87,2,96,0],[88,0,96,1],[88,3]],"functionMap":{"names":["<global>","getWorkerProfile","saveWorkerProfile"],"mappings":"AAA;OCK;CD2C;OEG;CF4C"},"hasCjsExports":false},"type":"js/module"}]}