{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"./storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":75},"end":{"line":3,"column":36,"index":111}}],"key":"3rLtLV8J3gSw9c8Ep8Wpc3w/Yxg=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.getWorkerProfile = getWorkerProfile;\n  exports.saveWorkerProfile = saveWorkerProfile;\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _storage = require(_dependencyMap[1], \"./storage\");\n  // utils/profileStore.ts\n\n  var PROFILE_KEY = '@shiftmatch:worker_profile';\n  function getWorkerProfile(_x) {\n    return _getWorkerProfile.apply(this, arguments);\n  }\n  function _getWorkerProfile() {\n    _getWorkerProfile = (0, _asyncToGenerator.default)(function* (userId) {\n      console.log('üîç getWorkerProfile: Loading profile for user', userId);\n      var stored = yield _storage.storage.getItem(PROFILE_KEY);\n      if (!stored) {\n        console.log('‚ö†Ô∏è getWorkerProfile: No profile found');\n        return null;\n      }\n      if (stored.userId !== userId) {\n        console.log('‚ö†Ô∏è getWorkerProfile: Profile userId mismatch', {\n          stored: stored.userId,\n          requested: userId\n        });\n        return null;\n      }\n\n      // MIGRATION: Altes Format ‚Üí Neues Format\n      var profile;\n\n      // Check if old format (has street, postalCode, city fields directly)\n      if ('street' in stored || 'postalCode' in stored || 'city' in stored) {\n        console.log('üîÑ Migrating old profile format to new format');\n        profile = {\n          userId: stored.userId,\n          categories: stored.categories ?? [],\n          selectedTags: stored.selectedTags ?? [],\n          radiusKm: stored.radiusKm ?? 15,\n          homeAddress: {\n            street: stored.street || '',\n            postalCode: stored.postalCode || '',\n            city: stored.city || '',\n            country: 'DE'\n          },\n          homeLat: stored.homeLat ?? stored.lat ?? null,\n          homeLon: stored.homeLon ?? stored.lon ?? null,\n          firstName: stored.name || stored.firstName,\n          profilePhotoUri: stored.photoUrl || stored.profilePhotoUri,\n          pushToken: stored.pushToken\n        };\n\n        // Save migrated version\n        yield _storage.storage.setItem(PROFILE_KEY, profile);\n        console.log('‚úÖ Profile migrated and saved');\n      } else {\n        // Already new format\n        profile = {\n          ...stored,\n          categories: stored.categories ?? [],\n          selectedTags: stored.selectedTags ?? [],\n          homeLat: stored.homeLat ?? null,\n          homeLon: stored.homeLon ?? null\n        };\n      }\n      console.log('‚úÖ getWorkerProfile: Profile loaded', {\n        userId: profile.userId,\n        categories: profile.categories.length,\n        tags: profile.selectedTags.length\n      });\n      return profile;\n    });\n    return _getWorkerProfile.apply(this, arguments);\n  }\n  function saveWorkerProfile(_x2) {\n    return _saveWorkerProfile.apply(this, arguments);\n  }\n  function _saveWorkerProfile() {\n    _saveWorkerProfile = (0, _asyncToGenerator.default)(function* (profile) {\n      console.log('üíæ saveWorkerProfile: Saving profile for user', profile.userId);\n      console.log('üíæ saveWorkerProfile: Categories:', profile.categories);\n      console.log('üíæ saveWorkerProfile: SelectedTags:', profile.selectedTags);\n\n      // Normalize profile to ensure arrays are never undefined\n      var normalized = {\n        ...profile,\n        categories: profile.categories ?? [],\n        selectedTags: profile.selectedTags ?? []\n      };\n      console.log('üíæ saveWorkerProfile: Normalized tags:', normalized.selectedTags);\n      yield _storage.storage.setItem(PROFILE_KEY, normalized);\n      console.log('‚úÖ saveWorkerProfile: Profile saved successfully', {\n        userId: normalized.userId,\n        categories: normalized.categories.length,\n        tags: normalized.selectedTags.length,\n        pushToken: normalized.pushToken ? '‚úì' : '‚úó'\n      });\n    });\n    return _saveWorkerProfile.apply(this, arguments);\n  }\n});","lineCount":111,"map":[[12,2,7,0,"exports"],[12,9,7,0],[12,10,7,0,"getWorkerProfile"],[12,26,7,0],[12,29,7,0,"getWorkerProfile"],[12,45,7,0],[13,2,68,0,"exports"],[13,9,68,0],[13,10,68,0,"saveWorkerProfile"],[13,27,68,0],[13,30,68,0,"saveWorkerProfile"],[13,47,68,0],[14,2,89,1],[14,6,89,1,"_babelRuntimeHelpersAsyncToGenerator"],[14,42,89,1],[14,45,89,1,"require"],[14,52,89,1],[14,53,89,1,"_dependencyMap"],[14,67,89,1],[15,2,89,1],[15,6,89,1,"_asyncToGenerator"],[15,23,89,1],[15,26,89,1,"_interopDefault"],[15,41,89,1],[15,42,89,1,"_babelRuntimeHelpersAsyncToGenerator"],[15,78,89,1],[16,2,3,0],[16,6,3,0,"_storage"],[16,14,3,0],[16,17,3,0,"require"],[16,24,3,0],[16,25,3,0,"_dependencyMap"],[16,39,3,0],[17,2,1,0],[19,2,5,0],[19,6,5,6,"PROFILE_KEY"],[19,17,5,17],[19,20,5,20],[19,48,5,48],[20,2,5,49],[20,11,7,22,"getWorkerProfile"],[20,27,7,38,"getWorkerProfile"],[20,28,7,38,"_x"],[20,30,7,38],[21,4,7,38],[21,11,7,38,"_getWorkerProfile"],[21,28,7,38],[21,29,7,38,"apply"],[21,34,7,38],[21,41,7,38,"arguments"],[21,50,7,38],[22,2,7,38],[23,2,7,38],[23,11,7,38,"_getWorkerProfile"],[23,29,7,38],[24,4,7,38,"_getWorkerProfile"],[24,21,7,38],[24,28,7,38,"_asyncToGenerator"],[24,45,7,38],[24,46,7,38,"default"],[24,53,7,38],[24,55,7,7],[24,66,7,39,"userId"],[24,72,7,53],[24,74,7,86],[25,6,8,2,"console"],[25,13,8,9],[25,14,8,10,"log"],[25,17,8,13],[25,18,8,14],[25,65,8,61],[25,67,8,63,"userId"],[25,73,8,69],[25,74,8,70],[26,6,9,2],[26,10,9,8,"stored"],[26,16,9,14],[26,25,9,23,"storage"],[26,33,9,30],[26,34,9,30,"storage"],[26,41,9,30],[26,42,9,31,"getItem"],[26,49,9,38],[26,50,9,44,"PROFILE_KEY"],[26,61,9,55],[26,62,9,56],[27,6,11,2],[27,10,11,6],[27,11,11,7,"stored"],[27,17,11,13],[27,19,11,15],[28,8,12,4,"console"],[28,15,12,11],[28,16,12,12,"log"],[28,19,12,15],[28,20,12,16],[28,59,12,55],[28,60,12,56],[29,8,13,4],[29,15,13,11],[29,19,13,15],[30,6,14,2],[31,6,16,2],[31,10,16,6,"stored"],[31,16,16,12],[31,17,16,13,"userId"],[31,23,16,19],[31,28,16,24,"userId"],[31,34,16,30],[31,36,16,32],[32,8,17,4,"console"],[32,15,17,11],[32,16,17,12,"log"],[32,19,17,15],[32,20,17,16],[32,66,17,62],[32,68,17,64],[33,10,17,66,"stored"],[33,16,17,72],[33,18,17,74,"stored"],[33,24,17,80],[33,25,17,81,"userId"],[33,31,17,87],[34,10,17,89,"requested"],[34,19,17,98],[34,21,17,100,"userId"],[35,8,17,107],[35,9,17,108],[35,10,17,109],[36,8,18,4],[36,15,18,11],[36,19,18,15],[37,6,19,2],[39,6,21,2],[40,6,22,2],[40,10,22,6,"profile"],[40,17,22,28],[42,6,24,2],[43,6,25,2],[43,10,25,6],[43,18,25,14],[43,22,25,18,"stored"],[43,28,25,24],[43,32,25,28],[43,44,25,40],[43,48,25,44,"stored"],[43,54,25,50],[43,58,25,54],[43,64,25,60],[43,68,25,64,"stored"],[43,74,25,70],[43,76,25,72],[44,8,26,4,"console"],[44,15,26,11],[44,16,26,12,"log"],[44,19,26,15],[44,20,26,16],[44,67,26,63],[44,68,26,64],[45,8,27,4,"profile"],[45,15,27,11],[45,18,27,14],[46,10,28,6,"userId"],[46,16,28,12],[46,18,28,14,"stored"],[46,24,28,20],[46,25,28,21,"userId"],[46,31,28,27],[47,10,29,6,"categories"],[47,20,29,16],[47,22,29,18,"stored"],[47,28,29,24],[47,29,29,25,"categories"],[47,39,29,35],[47,43,29,39],[47,45,29,41],[48,10,30,6,"selectedTags"],[48,22,30,18],[48,24,30,20,"stored"],[48,30,30,26],[48,31,30,27,"selectedTags"],[48,43,30,39],[48,47,30,43],[48,49,30,45],[49,10,31,6,"radiusKm"],[49,18,31,14],[49,20,31,16,"stored"],[49,26,31,22],[49,27,31,23,"radiusKm"],[49,35,31,31],[49,39,31,35],[49,41,31,37],[50,10,32,6,"homeAddress"],[50,21,32,17],[50,23,32,19],[51,12,33,8,"street"],[51,18,33,14],[51,20,33,16,"stored"],[51,26,33,22],[51,27,33,23,"street"],[51,33,33,29],[51,37,33,33],[51,39,33,35],[52,12,34,8,"postalCode"],[52,22,34,18],[52,24,34,20,"stored"],[52,30,34,26],[52,31,34,27,"postalCode"],[52,41,34,37],[52,45,34,41],[52,47,34,43],[53,12,35,8,"city"],[53,16,35,12],[53,18,35,14,"stored"],[53,24,35,20],[53,25,35,21,"city"],[53,29,35,25],[53,33,35,29],[53,35,35,31],[54,12,36,8,"country"],[54,19,36,15],[54,21,36,17],[55,10,37,6],[55,11,37,7],[56,10,38,6,"homeLat"],[56,17,38,13],[56,19,38,15,"stored"],[56,25,38,21],[56,26,38,22,"homeLat"],[56,33,38,29],[56,37,38,33,"stored"],[56,43,38,39],[56,44,38,40,"lat"],[56,47,38,43],[56,51,38,47],[56,55,38,51],[57,10,39,6,"homeLon"],[57,17,39,13],[57,19,39,15,"stored"],[57,25,39,21],[57,26,39,22,"homeLon"],[57,33,39,29],[57,37,39,33,"stored"],[57,43,39,39],[57,44,39,40,"lon"],[57,47,39,43],[57,51,39,47],[57,55,39,51],[58,10,40,6,"firstName"],[58,19,40,15],[58,21,40,17,"stored"],[58,27,40,23],[58,28,40,24,"name"],[58,32,40,28],[58,36,40,32,"stored"],[58,42,40,38],[58,43,40,39,"firstName"],[58,52,40,48],[59,10,41,6,"profilePhotoUri"],[59,25,41,21],[59,27,41,23,"stored"],[59,33,41,29],[59,34,41,30,"photoUrl"],[59,42,41,38],[59,46,41,42,"stored"],[59,52,41,48],[59,53,41,49,"profilePhotoUri"],[59,68,41,64],[60,10,42,6,"pushToken"],[60,19,42,15],[60,21,42,17,"stored"],[60,27,42,23],[60,28,42,24,"pushToken"],[61,8,43,4],[61,9,43,5],[63,8,45,4],[64,8,46,4],[64,14,46,10,"storage"],[64,22,46,17],[64,23,46,17,"storage"],[64,30,46,17],[64,31,46,18,"setItem"],[64,38,46,25],[64,39,46,26,"PROFILE_KEY"],[64,50,46,37],[64,52,46,39,"profile"],[64,59,46,46],[64,60,46,47],[65,8,47,4,"console"],[65,15,47,11],[65,16,47,12,"log"],[65,19,47,15],[65,20,47,16],[65,50,47,46],[65,51,47,47],[66,6,48,2],[66,7,48,3],[66,13,48,9],[67,8,49,4],[68,8,50,4,"profile"],[68,15,50,11],[68,18,50,14],[69,10,51,6],[69,13,51,9,"stored"],[69,19,51,15],[70,10,52,6,"categories"],[70,20,52,16],[70,22,52,18,"stored"],[70,28,52,24],[70,29,52,25,"categories"],[70,39,52,35],[70,43,52,39],[70,45,52,41],[71,10,53,6,"selectedTags"],[71,22,53,18],[71,24,53,20,"stored"],[71,30,53,26],[71,31,53,27,"selectedTags"],[71,43,53,39],[71,47,53,43],[71,49,53,45],[72,10,54,6,"homeLat"],[72,17,54,13],[72,19,54,15,"stored"],[72,25,54,21],[72,26,54,22,"homeLat"],[72,33,54,29],[72,37,54,33],[72,41,54,37],[73,10,55,6,"homeLon"],[73,17,55,13],[73,19,55,15,"stored"],[73,25,55,21],[73,26,55,22,"homeLon"],[73,33,55,29],[73,37,55,33],[74,8,56,4],[74,9,56,5],[75,6,57,2],[76,6,59,2,"console"],[76,13,59,9],[76,14,59,10,"log"],[76,17,59,13],[76,18,59,14],[76,54,59,50],[76,56,59,52],[77,8,60,4,"userId"],[77,14,60,10],[77,16,60,12,"profile"],[77,23,60,19],[77,24,60,20,"userId"],[77,30,60,26],[78,8,61,4,"categories"],[78,18,61,14],[78,20,61,16,"profile"],[78,27,61,23],[78,28,61,24,"categories"],[78,38,61,34],[78,39,61,35,"length"],[78,45,61,41],[79,8,62,4,"tags"],[79,12,62,8],[79,14,62,10,"profile"],[79,21,62,17],[79,22,62,18,"selectedTags"],[79,34,62,30],[79,35,62,31,"length"],[80,6,63,2],[80,7,63,3],[80,8,63,4],[81,6,65,2],[81,13,65,9,"profile"],[81,20,65,16],[82,4,66,0],[82,5,66,1],[83,4,66,1],[83,11,66,1,"_getWorkerProfile"],[83,28,66,1],[83,29,66,1,"apply"],[83,34,66,1],[83,41,66,1,"arguments"],[83,50,66,1],[84,2,66,1],[85,2,66,1],[85,11,68,22,"saveWorkerProfile"],[85,28,68,39,"saveWorkerProfile"],[85,29,68,39,"_x2"],[85,32,68,39],[86,4,68,39],[86,11,68,39,"_saveWorkerProfile"],[86,29,68,39],[86,30,68,39,"apply"],[86,35,68,39],[86,42,68,39,"arguments"],[86,51,68,39],[87,2,68,39],[88,2,68,39],[88,11,68,39,"_saveWorkerProfile"],[88,30,68,39],[89,4,68,39,"_saveWorkerProfile"],[89,22,68,39],[89,29,68,39,"_asyncToGenerator"],[89,46,68,39],[89,47,68,39,"default"],[89,54,68,39],[89,56,68,7],[89,67,68,40,"profile"],[89,74,68,62],[89,76,68,79],[90,6,69,2,"console"],[90,13,69,9],[90,14,69,10,"log"],[90,17,69,13],[90,18,69,14],[90,65,69,61],[90,67,69,63,"profile"],[90,74,69,70],[90,75,69,71,"userId"],[90,81,69,77],[90,82,69,78],[91,6,70,2,"console"],[91,13,70,9],[91,14,70,10,"log"],[91,17,70,13],[91,18,70,14],[91,53,70,49],[91,55,70,51,"profile"],[91,62,70,58],[91,63,70,59,"categories"],[91,73,70,69],[91,74,70,70],[92,6,71,2,"console"],[92,13,71,9],[92,14,71,10,"log"],[92,17,71,13],[92,18,71,14],[92,55,71,51],[92,57,71,53,"profile"],[92,64,71,60],[92,65,71,61,"selectedTags"],[92,77,71,73],[92,78,71,74],[94,6,73,2],[95,6,74,2],[95,10,74,8,"normalized"],[95,20,74,33],[95,23,74,36],[96,8,75,4],[96,11,75,7,"profile"],[96,18,75,14],[97,8,76,4,"categories"],[97,18,76,14],[97,20,76,16,"profile"],[97,27,76,23],[97,28,76,24,"categories"],[97,38,76,34],[97,42,76,38],[97,44,76,40],[98,8,77,4,"selectedTags"],[98,20,77,16],[98,22,77,18,"profile"],[98,29,77,25],[98,30,77,26,"selectedTags"],[98,42,77,38],[98,46,77,42],[99,6,78,2],[99,7,78,3],[100,6,80,2,"console"],[100,13,80,9],[100,14,80,10,"log"],[100,17,80,13],[100,18,80,14],[100,58,80,54],[100,60,80,56,"normalized"],[100,70,80,66],[100,71,80,67,"selectedTags"],[100,83,80,79],[100,84,80,80],[101,6,82,2],[101,12,82,8,"storage"],[101,20,82,15],[101,21,82,15,"storage"],[101,28,82,15],[101,29,82,16,"setItem"],[101,36,82,23],[101,37,82,24,"PROFILE_KEY"],[101,48,82,35],[101,50,82,37,"normalized"],[101,60,82,47],[101,61,82,48],[102,6,83,2,"console"],[102,13,83,9],[102,14,83,10,"log"],[102,17,83,13],[102,18,83,14],[102,67,83,63],[102,69,83,65],[103,8,84,4,"userId"],[103,14,84,10],[103,16,84,12,"normalized"],[103,26,84,22],[103,27,84,23,"userId"],[103,33,84,29],[104,8,85,4,"categories"],[104,18,85,14],[104,20,85,16,"normalized"],[104,30,85,26],[104,31,85,27,"categories"],[104,41,85,37],[104,42,85,38,"length"],[104,48,85,44],[105,8,86,4,"tags"],[105,12,86,8],[105,14,86,10,"normalized"],[105,24,86,20],[105,25,86,21,"selectedTags"],[105,37,86,33],[105,38,86,34,"length"],[105,44,86,40],[106,8,87,4,"pushToken"],[106,17,87,13],[106,19,87,15,"normalized"],[106,29,87,25],[106,30,87,26,"pushToken"],[106,39,87,35],[106,42,87,38],[106,45,87,41],[106,48,87,44],[107,6,88,2],[107,7,88,3],[107,8,88,4],[108,4,89,0],[108,5,89,1],[109,4,89,1],[109,11,89,1,"_saveWorkerProfile"],[109,29,89,1],[109,30,89,1,"apply"],[109,35,89,1],[109,42,89,1,"arguments"],[109,51,89,1],[110,2,89,1],[111,0,89,1],[111,3]],"functionMap":{"names":["<global>","getWorkerProfile","saveWorkerProfile"],"mappings":"AAA;OCM;CD2D;OEE"},"hasCjsExports":false},"type":"js/module"}]}