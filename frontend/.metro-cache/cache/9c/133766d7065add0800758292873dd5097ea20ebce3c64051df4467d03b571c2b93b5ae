{"dependencies":[{"name":"./storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":26},"end":{"line":2,"column":45,"index":71}}],"key":"3rLtLV8J3gSw9c8Ep8Wpc3w/Yxg=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.addPayment = addPayment;\n  exports.getPaymentsByEmployer = getPaymentsByEmployer;\n  exports.getPaymentByJobId = getPaymentByJobId;\n  exports.updatePaymentStatus = updatePaymentStatus;\n  exports.clearPayments = clearPayments;\n  var _storage = require(_dependencyMap[0], \"./storage\");\n  // utils/paymentsStore.ts\n\n  const PAYMENTS_KEY = '@backup:payments';\n  async function loadPayments() {\n    const stored = await (0, _storage.getItem)(PAYMENTS_KEY);\n    return stored ?? [];\n  }\n  async function savePayments(payments) {\n    await (0, _storage.setItem)(PAYMENTS_KEY, payments);\n  }\n  async function addPayment(payment) {\n    const payments = await loadPayments();\n    const newPayment = Object.assign({}, payment, {\n      id: 'payment-' + Date.now().toString() + '-' + Math.random().toString(36).slice(2),\n      createdAt: new Date().toISOString()\n    });\n    await savePayments([...payments, newPayment]);\n    return newPayment;\n  }\n  async function getPaymentsByEmployer(employerId) {\n    const payments = await loadPayments();\n    return payments.filter(p => p.employerId === employerId).sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime());\n  }\n  async function getPaymentByJobId(jobId) {\n    const payments = await loadPayments();\n    return payments.find(p => p.jobId === jobId) || null;\n  }\n  async function updatePaymentStatus(paymentId, status) {\n    const payments = await loadPayments();\n    const updated = payments.map(p => {\n      if (p.id === paymentId) {\n        return Object.assign({}, p, {\n          status,\n          paidAt: status === 'paid' ? new Date().toISOString() : p.paidAt\n        });\n      }\n      return p;\n    });\n    await savePayments(updated);\n  }\n  async function clearPayments() {\n    await savePayments([]);\n  }\n});","lineCount":56,"map":[[7,2,30,0,"exports"],[7,9,30,0],[7,10,30,0,"addPayment"],[7,20,30,0],[7,23,30,0,"addPayment"],[7,33,30,0],[8,2,43,0,"exports"],[8,9,43,0],[8,10,43,0,"getPaymentsByEmployer"],[8,31,43,0],[8,34,43,0,"getPaymentsByEmployer"],[8,55,43,0],[9,2,50,0,"exports"],[9,9,50,0],[9,10,50,0,"getPaymentByJobId"],[9,27,50,0],[9,30,50,0,"getPaymentByJobId"],[9,47,50,0],[10,2,55,0,"exports"],[10,9,55,0],[10,10,55,0,"updatePaymentStatus"],[10,29,55,0],[10,32,55,0,"updatePaymentStatus"],[10,51,55,0],[11,2,73,0,"exports"],[11,9,73,0],[11,10,73,0,"clearPayments"],[11,23,73,0],[11,26,73,0,"clearPayments"],[11,39,73,0],[12,2,2,0],[12,6,2,0,"_storage"],[12,14,2,0],[12,17,2,0,"require"],[12,24,2,0],[12,25,2,0,"_dependencyMap"],[12,39,2,0],[13,2,1,0],[15,2,19,0],[15,8,19,6,"PAYMENTS_KEY"],[15,20,19,18],[15,23,19,21],[15,41,19,39],[16,2,21,0],[16,17,21,15,"loadPayments"],[16,29,21,27,"loadPayments"],[16,30,21,27],[16,32,21,50],[17,4,22,2],[17,10,22,8,"stored"],[17,16,22,14],[17,19,22,17],[17,25,22,23],[17,29,22,23,"getItem"],[17,37,22,30],[17,38,22,30,"getItem"],[17,45,22,30],[17,47,22,42,"PAYMENTS_KEY"],[17,59,22,54],[17,60,22,55],[18,4,23,2],[18,11,23,9,"stored"],[18,17,23,15],[18,21,23,19],[18,23,23,21],[19,2,24,0],[20,2,26,0],[20,17,26,15,"savePayments"],[20,29,26,27,"savePayments"],[20,30,26,28,"payments"],[20,38,26,47],[20,40,26,64],[21,4,27,2],[21,10,27,8],[21,14,27,8,"setItem"],[21,22,27,15],[21,23,27,15,"setItem"],[21,30,27,15],[21,32,27,27,"PAYMENTS_KEY"],[21,44,27,39],[21,46,27,41,"payments"],[21,54,27,49],[21,55,27,50],[22,2,28,0],[23,2,30,7],[23,17,30,22,"addPayment"],[23,27,30,32,"addPayment"],[23,28,30,33,"payment"],[23,35,30,75],[23,37,30,95],[24,4,31,2],[24,10,31,8,"payments"],[24,18,31,16],[24,21,31,19],[24,27,31,25,"loadPayments"],[24,39,31,37],[24,40,31,38],[24,41,31,39],[25,4,33,2],[25,10,33,8,"newPayment"],[25,20,33,27],[25,23,33,27,"Object"],[25,29,33,27],[25,30,33,27,"assign"],[25,36,33,27],[25,41,34,7,"payment"],[25,48,34,14],[26,6,35,4,"id"],[26,8,35,6],[26,10,35,8],[26,20,35,18],[26,23,35,21,"Date"],[26,27,35,25],[26,28,35,26,"now"],[26,31,35,29],[26,32,35,30],[26,33,35,31],[26,34,35,32,"toString"],[26,42,35,40],[26,43,35,41],[26,44,35,42],[26,47,35,45],[26,50,35,48],[26,53,35,51,"Math"],[26,57,35,55],[26,58,35,56,"random"],[26,64,35,62],[26,65,35,63],[26,66,35,64],[26,67,35,65,"toString"],[26,75,35,73],[26,76,35,74],[26,78,35,76],[26,79,35,77],[26,80,35,78,"slice"],[26,85,35,83],[26,86,35,84],[26,87,35,85],[26,88,35,86],[27,6,36,4,"createdAt"],[27,15,36,13],[27,17,36,15],[27,21,36,19,"Date"],[27,25,36,23],[27,26,36,24],[27,27,36,25],[27,28,36,26,"toISOString"],[27,39,36,37],[27,40,36,38],[28,4,36,39],[28,6,37,3],[29,4,39,2],[29,10,39,8,"savePayments"],[29,22,39,20],[29,23,39,21],[29,24,39,22],[29,27,39,25,"payments"],[29,35,39,33],[29,37,39,35,"newPayment"],[29,47,39,45],[29,48,39,46],[29,49,39,47],[30,4,40,2],[30,11,40,9,"newPayment"],[30,21,40,19],[31,2,41,0],[32,2,43,7],[32,17,43,22,"getPaymentsByEmployer"],[32,38,43,43,"getPaymentsByEmployer"],[32,39,43,44,"employerId"],[32,49,43,62],[32,51,43,84],[33,4,44,2],[33,10,44,8,"payments"],[33,18,44,16],[33,21,44,19],[33,27,44,25,"loadPayments"],[33,39,44,37],[33,40,44,38],[33,41,44,39],[34,4,45,2],[34,11,45,9,"payments"],[34,19,45,17],[34,20,46,5,"filter"],[34,26,46,11],[34,27,46,12,"p"],[34,28,46,13],[34,32,46,17,"p"],[34,33,46,18],[34,34,46,19,"employerId"],[34,44,46,29],[34,49,46,34,"employerId"],[34,59,46,44],[34,60,46,45],[34,61,47,5,"sort"],[34,65,47,9],[34,66,47,10],[34,67,47,11,"a"],[34,68,47,12],[34,70,47,14,"b"],[34,71,47,15],[34,76,47,20],[34,80,47,24,"Date"],[34,84,47,28],[34,85,47,29,"b"],[34,86,47,30],[34,87,47,31,"createdAt"],[34,96,47,40],[34,97,47,41],[34,98,47,42,"getTime"],[34,105,47,49],[34,106,47,50],[34,107,47,51],[34,110,47,54],[34,114,47,58,"Date"],[34,118,47,62],[34,119,47,63,"a"],[34,120,47,64],[34,121,47,65,"createdAt"],[34,130,47,74],[34,131,47,75],[34,132,47,76,"getTime"],[34,139,47,83],[34,140,47,84],[34,141,47,85],[34,142,47,86],[35,2,48,0],[36,2,50,7],[36,17,50,22,"getPaymentByJobId"],[36,34,50,39,"getPaymentByJobId"],[36,35,50,40,"jobId"],[36,40,50,53],[36,42,50,80],[37,4,51,2],[37,10,51,8,"payments"],[37,18,51,16],[37,21,51,19],[37,27,51,25,"loadPayments"],[37,39,51,37],[37,40,51,38],[37,41,51,39],[38,4,52,2],[38,11,52,9,"payments"],[38,19,52,17],[38,20,52,18,"find"],[38,24,52,22],[38,25,52,23,"p"],[38,26,52,24],[38,30,52,28,"p"],[38,31,52,29],[38,32,52,30,"jobId"],[38,37,52,35],[38,42,52,40,"jobId"],[38,47,52,45],[38,48,52,46],[38,52,52,50],[38,56,52,54],[39,2,53,0],[40,2,55,7],[40,17,55,22,"updatePaymentStatus"],[40,36,55,41,"updatePaymentStatus"],[40,37,56,2,"paymentId"],[40,46,56,19],[40,48,57,2,"status"],[40,54,57,23],[40,56,58,17],[41,4,59,2],[41,10,59,8,"payments"],[41,18,59,16],[41,21,59,19],[41,27,59,25,"loadPayments"],[41,39,59,37],[41,40,59,38],[41,41,59,39],[42,4,60,2],[42,10,60,8,"updated"],[42,17,60,15],[42,20,60,18,"payments"],[42,28,60,26],[42,29,60,27,"map"],[42,32,60,30],[42,33,60,31,"p"],[42,34,60,32],[42,38,60,36],[43,6,61,4],[43,10,61,8,"p"],[43,11,61,9],[43,12,61,10,"id"],[43,14,61,12],[43,19,61,17,"paymentId"],[43,28,61,26],[43,30,61,28],[44,8,62,6],[44,15,62,6,"Object"],[44,21,62,6],[44,22,62,6,"assign"],[44,28,62,6],[44,33,63,11,"p"],[44,34,63,12],[45,10,64,8,"status"],[45,16,64,14],[46,10,65,8,"paidAt"],[46,16,65,14],[46,18,65,16,"status"],[46,24,65,22],[46,29,65,27],[46,35,65,33],[46,38,65,36],[46,42,65,40,"Date"],[46,46,65,44],[46,47,65,45],[46,48,65,46],[46,49,65,47,"toISOString"],[46,60,65,58],[46,61,65,59],[46,62,65,60],[46,65,65,63,"p"],[46,66,65,64],[46,67,65,65,"paidAt"],[47,8,65,71],[48,6,67,4],[49,6,68,4],[49,13,68,11,"p"],[49,14,68,12],[50,4,69,2],[50,5,69,3],[50,6,69,4],[51,4,70,2],[51,10,70,8,"savePayments"],[51,22,70,20],[51,23,70,21,"updated"],[51,30,70,28],[51,31,70,29],[52,2,71,0],[53,2,73,7],[53,17,73,22,"clearPayments"],[53,30,73,35,"clearPayments"],[53,31,73,35],[53,33,73,53],[54,4,74,2],[54,10,74,8,"savePayments"],[54,22,74,20],[54,23,74,21],[54,25,74,23],[54,26,74,24],[55,2,75,0],[56,0,75,1],[56,3]],"functionMap":{"names":["<global>","loadPayments","savePayments","addPayment","getPaymentsByEmployer","payments.filter$argument_0","payments.filter.sort$argument_0","getPaymentByJobId","payments.find$argument_0","updatePaymentStatus","payments.map$argument_0","clearPayments"],"mappings":"AAA;ACoB;CDG;AEE;CFE;OGE;CHW;OIE;YCG,gCD;UEC,2EF;CJC;OOE;uBCE,sBD;CPC;OSE;+BCK;GDS;CTE;OWE;CXE"},"hasCjsExports":false},"type":"js/module"}]}