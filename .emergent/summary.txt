<analysis>
The trajectory documents an extensive and complex development cycle for a German-language job marketplace mobile app, ShiftMatch. The user's primary language is German, and all future communications must be in German.

The work can be divided into three main phases. First, a series of foundational refactors, including a complete overhaul of  (changing / to /), and a rewrite of  to align with a new, structured  file.

The second phase involved implementing major new features, driven by detailed, multi-part user prompts. This included a full-stack payment flow where employers must pay to unlock the chat with accepted workers, and an even more complex official registration system built on top of that, allowing employers to request formal employment data from non-self-employed workers post-payment. This required significant backend changes in  (new models, new endpoints) and corresponding frontend UI/logic updates.

The third and longest phase was an intense, iterative debugging process. The AI systematically tackled numerous crashes and bugs reported by the user via screenshots and logs. Key issues resolved include: multiple  crashes traced to  and unprotected state values;  errors due to the  refactor and mismatched component interfaces; a  error caused by an incorrect AsyncStorage key; and routing conflicts in Expo Router. The last action was acknowledging the user's request to view three specific employer-related files.
</analysis>

<product_requirements>
The application, ShiftMatch, is a two-sided mobile job marketplace in German connecting Auftraggeber (Employers) and Auftragnehmer (Workers).

**Core Product Features:**
*   **Dual-Role System:** Users can register, log in, and operate as either a Worker or an Employer, with distinct UIs and workflows for each.
*   **Profile & Job Management:** Workers create detailed profiles with skills based on a structured taxonomy. Employers post jobs with specific skill requirements.
*   **Payment-Gated Matching & Chat:** When an employer accepts a worker's application, they are redirected to a payment screen. Only after paying a commission is the chat between the two parties unlocked.
*   **Official Registration Flow:** Post-payment, employers have an optional flow to request formal registration data (tax ID, address, etc.) from workers who are not registered as self-employed. Workers can accept (and fill out a data form) or decline this request. A mini-contract PDF is generated upon completion.
*   **Taxonomy-Driven Skills:** A central  file dictates all job categories and associated skills (e.g., Kaufhausdetektiv, Sachkunde nach ยง34a GewO), ensuring consistency across profile creation, job posting, and matching.
</product_requirements>

<key_technical_concepts>
- **Backend:** Monolithic FastAPI (Python) server () with Pydantic models.
- **Database:** Hybrid persistence using MongoDB for dynamic data like applications and chat messages.
- **Frontend:** React Native with Expo, using  for file-based routing.
- **Authentication:** JWT-based. A critical refactor changed auth functions to // and fixed a  vs uid=0(root) gid=0(root) groups=0(root) mapping issue.
- **State Management:** React Context () and Zustand for various stores (, ).
- **Defensive Programming:** Extensive use of  and optional chaining () to prevent crashes from  values.
</key_technical_concepts>

<code_architecture>
The project is a monorepo with  and  directories.



-   ****
    -   **Importance:** The core FastAPI server. It contains all API endpoints, Pydantic models, and business logic.
    -   **Changes:** Heavily modified to support the payment and official registration flows. New Pydantic models () and fields (, ) were added. New endpoints were created, including , , and . Chat endpoints were updated to enforce payment status.

-   ****
    -   **Importance:** Manages user authentication state globally.
    -   **Changes:** Underwent multiple critical refactors. Functions were changed from / to /, and a  function was added. A crucial fix was implemented to correctly map the  field from the backend's  response to  on the frontend, resolving numerous  API calls. The  property was also corrected to .

-   ****
    -   **Importance:** A shared component for address input with autocomplete functionality.
    -   **Changes:** This file was the source of multiple severe crashes ( on undefined,  is not a function). It was completely rewritten from scratch to be robust. The new version accepts separate props for each address field (street, city, etc.), uses optional chaining for all change handlers (), and provides a separate, editable input for the house number.

-   ****
    -   **Importance:** Provides helper functions to interact with the skill taxonomy.
    -   **Changes:** Rewritten to provide a clean set of named exports (, , etc.) that work with the new  structure. A missing  function was added to fix a crash in the profile wizard.

-   ****
    -   **Importance:** The single source of truth for all job categories and skills.
    -   **Changes:** The file was restored from an old backup () to bring back missing categories like Kaufhausdetektiv and Sachkunde nach ยง34a GewO, and was converted to the new, required format. A copy was placed in  to ensure server-side validation is consistent.

-   ****
    -   **Importance:** The main chat UI.
    -   **Changes:** Replaced entirely with a WhatsApp-style implementation that uses the new  and displays a Chat Locked screen if payment for the application has not been completed. The payment check was later temporarily disabled for testing.
</code_architecture>

<pending_tasks>
- Show the user the contents of the three requested files: , , and .
- Systematically fix the non-editable  bug by wrapping state setter calls in  (e.g., ), as diagnosed by the user.
- Add visible logout buttons to the worker and employer layouts and profile screens.
- Re-enable the payment check in the chat screen that was temporarily disabled for testing.
</pending_tasks>

<current_work>
The most recent task was debugging a series of critical, app-breaking crashes. After fixing several issues related to  values and mismatched function names, the AI was in the middle of diagnosing why  fields were becoming non-editable. The user correctly identified this as a known React Native issue where passing  makes an input read-only and provided a solution: wrap state-setting values with .

However, before the AI could implement this fix, the user interrupted with a new, explicit request in the very last message (Chat Message 645) to view the contents of three specific files related to the employer flow:

1.  
2.  
3.  

The AI acknowledged this request (Verstanden! Ich zeige Ihnen jetzt die drei Employer-Dateien:) but the trajectory ended before it could execute the file-reading command. The immediate work is therefore to fulfill this direct user request.
</current_work>

<optional_next_step>
Verstanden! Ich zeige Ihnen jetzt die drei angeforderten Employer-Dateien, beginnend mit .
</optional_next_step>
