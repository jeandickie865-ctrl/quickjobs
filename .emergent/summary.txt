<analysis>
The trajectory documents an extensive development and debugging process for a German-language, two-sided job-matching mobile application. The user's primary language is German, and all subsequent interactions must be conducted in German.

The work began with fixing critical bugs: a non-functional logout, routing errors, and a backend issue where new profiles couldn't be created ( was missing, only  existed). This led to UI/UX enhancements, including the major task of replacing a single-page profile form with a 5-step wizard.

Implementing the wizard was fraught with issues. The initial problem was an Unmatched Route error because the files for steps 2-5 did not exist. After creating them, the next bug was that data was not passed between steps, which was resolved by implementing a . This was followed by a series of fixes for syntax errors, data display issues on the summary page, incorrect navigation, and, most critically, a  error when saving the profile. The authorization bug was particularly difficult, involving multiple attempts to fix the  header format.

Throughout the process, the user reported numerous bugs related to data persistence, UI layout on different devices (especially the date picker), and core business logic like job matching and radius filtering. The most persistent and difficult bugs stemmed from inconsistent API communication, including hardcoded backend URLs in multiple store files. This instability culminated in the user providing an explicit, multi-step plan to refactor the entire API communication layer for consistency and reliability. The previous engineer had just begun this major refactoring task.
</analysis>
<product_requirements>
The application is a German-language, two-sided mobile job marketplace connecting Auftraggeber (Employers) and Auftragnehmer (Workers).

**Core User Flows:**
*   **User Roles:** Users register and operate as either an Employer or a Worker.
*   **Profile Creation/Editing:** To apply for jobs, Workers complete a multi-step profile wizard. This wizard was a major refactoring effort to replace a single, long form. It covers: 1. Basic Info & Photo, 2. Address & Work Radius, 3. Categories, 4. Skills, and 5. Summary. When editing, the wizard must be pre-filled with existing data.
*   **Job Management:** Employers post jobs, specifying details like description, location, and payment type.
*   **Application & Matching:** Workers see a feed of relevant jobs filtered by category and radius. They can apply for jobs. Employers see incoming applications and can accept them. An accepted application becomes a Match.
*   **Data Visibility:** An employer can only see a worker's full contact details after a match is confirmed.
*   **UI/UX:** The app uses tab-based navigation. Employers and Workers have distinct UIs, including separate Matches and Applications views. It's critical that notifications/badges for new applications are clearly visible.
</product_requirements>
<key_technical_concepts>
- **Backend:** FastAPI (Python) with Pydantic for data modeling.
- **Database:** MongoDB.
- **Frontend:** React Native with Expo.
- **Routing:** File-based routing via .
- **State Management:** React Context (, ) for global and feature-specific state.
- **API Communication:** Centralized API logic is being refactored into a single  file to manage a consistent  URL and authorization headers, moving away from inconsistent, hardcoded URLs in multiple store files (, , etc.).
</key_technical_concepts>
<code_architecture>
The project is a monorepo with  and  directories.



- ****: The core FastAPI application. It was modified to add a  endpoint for new profiles (previously only  for updates existed), an  proxy, and most recently a  endpoint to fetch all jobs regardless of status, which was needed to fix the worker's Matches view.

- ****: This directory contains the 5-step worker profile creation/editing wizard. This feature was built from scratch and underwent extensive debugging related to routing, state management (), data persistence via API calls, and pre-filling data for profile edits.

- ****: The form for creating jobs. It was heavily modified to fix a critical bug with a non-functional date/time picker on certain devices. The original  was replaced with a more robust  using  and then further debugged for CSS/layout issues.

- ****: Manages global user authentication. It was refactored to use backend API endpoints for  and  instead of a local mock user database. It provides the user object and token, which are essential for all authenticated API requests.

- ** (New)**: This file was just created as the first step of a major API communication refactor. Its purpose is to centralize the  URL and helper functions like  and  to eliminate hardcoded URLs and inconsistent authorization logic spread across the various  files.

- ** (e.g., , , )**: These files contain the application's business logic for fetching and updating data. They were the source of numerous critical bugs due to hardcoded, incorrect backend URLs. They are currently being refactored to use the new centralized .
</code_architecture>
<pending_tasks>
- **Complete the API Communication Refactor:** The main pending task is to finish the multi-step refactor of the entire API layer as explicitly instructed by the user. This involves modifying all store files (, , , etc.) to use the new centralized  and ensuring all API calls use the correct  header.
- **Fix Date Picker on Mobile:** The date picker component needs to be made fully cross-platform compatible.
</pending_tasks>
<current_work>
The AI engineer was in the middle of a large-scale, user-directed refactoring of the entire frontend API communication layer. This was initiated after a series of persistent, critical bugs related to data not loading (e.g., empty Matches lists, missing reviews), which were traced back to multiple utility files (, , , etc.) containing hardcoded and incorrect backend URLs.

The user provided a very explicit, multi-step plan to fix this systemic issue. The goal is to centralize all API logic, remove all hardcoded URLs, and standardize authorization headers.

The work stopped immediately after starting **Step 1** of this plan. The engineer successfully created the new central API file:
- ****: This file will contain the single source of truth for the backend URL () and helper functions to retrieve the auth token and user ID from .

The very next action was to begin **Step 2**: Modifying all the store files to import and use this new  file, removing their local, incorrect URL constants. The engineer had generated  commands to overwrite , , and  with the refactored code, but the execution and verification of these changes are still pending.
</current_work>
<optional_next_step>
Continue the API refactoring by executing **SCHRITT 2 – ALLE STORES UMSTELLEN**, ensuring , , and  are correctly modified to use the new  file.
</optional_next_step>
> User: SCHRITT 2 – ALLE STORES UMSTELLEN
Die folgenden Dateien müssen vollständig so umgebaut werden,
dass sie NUR api.ts verwenden:
  /utils/profileStore.ts
  /utils/jobStore.ts
  /utils/applicationStore.ts
Ersetze in ALLEN Stores: ... Durch: import { API_BASE, getUserId, getAuthToken } from ./api;
