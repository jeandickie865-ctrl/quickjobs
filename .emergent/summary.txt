<analysis>
**original_problem_statement:** The user initially requested two main features:
1.  Allow employers to see the qualification documents uploaded by workers after a match.
2.  Fix chat-related issues, which were initially described as invalid date but turned out to be a non-functional unread message badge due to a token error.

Over the course of the session, this evolved into a massive bug-fixing and app-stabilization effort, culminating in a complex and fraught attempt to create a stable iOS build for TestFlight. Numerous critical issues were discovered and addressed, including a major security flaw, multiple UI bugs, a broken API URL configuration, and persistent environment instability. The final goal became producing a correctly configured, functional build that could be submitted to the App Store.

PRODUCT REQUIREMENTS:
1.  **Feature**: Employers must be able to view and download qualification documents of workers they have matched with.
2.  **Feature**: A modal popup confirming Dein Jobangebot ist jetzt online should appear after an employer successfully creates a job.
3.  **UX Improvement**: The address input component must be made more intuitive, guiding the user to enter the full address in the first line for autocomplete to work.
4.  **Bugfix**: The chat unread message count badge must function correctly for both workers and employers.
5.  **Bugfix**: Chat messages must be visible and correctly styled. The user reported transparent bubbles and later, bubbles with no text content.
6.  **Security**: The worker must NOT see the employer's house number on any screen before a successful match is made and paid for. This is to prevent workers from bypassing the platform.
7.  **UI/Branding**: Various screens with old BACKUP branding and dark/black themes must be updated to the new white/lila/orange Quickjobs design.
8.  **Build & Deployment**: The app must be correctly configured to produce a valid iOS build for TestFlight, including the correct logos, bundle ID, and project settings.

**User's preferred language**: German

**what currently exists?**
The application is in a highly volatile state. While a tremendous number of critical bugs and features have been addressed, the local development environment is unstable, and the iOS build process is failing.

**Functionality:**
*   The feature for employers to view worker documents is implemented.
*   The critical security flaw of exposing house numbers pre-match has been fixed across multiple screens.
*   The chat is now functional after a major debugging effort, fixing both frontend rendering issues and a backend data mapping error.
*   Multiple UI screens have been redesigned to match the new Quickjobs branding.
*   The core API URL has been corrected in the environment configuration.

**Build/Environment:**
*   The  and  files have been repeatedly modified to resolve build errors related to project slug, bundle identifier, and Apple-specific IDs.
*   The application's icon and splash screen have been updated to the new qu.Jo logo, with a white background to prevent black boxes in the App Store.
*   A critical fix for a font loading error () has been added to .
*   The local development environment (Expo Go via ngrok tunnel) is extremely unstable and frequently crashes or shows a white screen due to  tunnel conflicts.

**Last working item**:
    - Last item agent was working: The user reported that the correct Bundle ID in their App Store Connect account is . The previous build failed because the agent had set it to . The agent was in the process of correcting the  in  to match the user's latest instruction, in preparation for creating a new, hopefully successful, build (Build 5).
    - Status: IN PROGRESS
    - Agent Testing Done: N
    - Which testing method agent to use? The only valid test is for the user to attempt a new iOS build (The field "cli.appVersionSource" is not set, but it will be required in the future. Learn more: https://docs.expo.dev/build-reference/app-versions/
Resolved "production" environment for the build. Learn more: https://docs.expo.dev/eas/environment-variables/#setting-the-environment-for-your-builds
No environment variables with visibility "Plain text" and "Sensitive" found for the "production" environment on EAS.



The field "cli.appVersionSource" is not set, but it will be required in the future. Learn more: https://docs.expo.dev/build-reference/app-versions/
✔ Using remote iOS credentials (Expo server)

If you provide your Apple account credentials we will be able to generate all necessary build credentials and fully validate them.
This is optional, but without Apple account access you will need to provide all the missing values manually and we can only run minimal validation on them.
Input is required, but stdin is not readable. Failed to display prompt: Do you want to log in to your Apple account?) after the configuration change.
    - User Testing Done: N

**All Pending/In progress Issue list**:
  - Issue 1: Create a successful iOS build for TestFlight (P0)
  - Issue 2: Persistent Ngrok Tunnel Instability (P1)
  - Issue 3: Original  login bug (P2)
  
  **Issues Detail:**
  - **Issue 1: Create a successful iOS build for TestFlight (P0)**
     - **Attempted fixes**: This has been a long and painful process with multiple failed builds.
        1.  Fixed slug/projectId mismatches in  and .
        2.  Updated app icons to a new logo with a white background.
        3.  Added  to  to fix a native font loading crash ().
        4.  Corrected  structure based on user feedback.
        5.  Attempted multiple  values (, ). The last instruction from the user was to use .
     - **Next debug checklist**:
        1.  Verify that  now contains .
        2.  Confirm with the user that this is the absolute, final, correct Bundle ID from their App Store Connect account.
        3.  Instruct the user to run The field "cli.appVersionSource" is not set, but it will be required in the future. Learn more: https://docs.expo.dev/build-reference/app-versions/
Resolved "production" environment for the build. Learn more: https://docs.expo.dev/eas/environment-variables/#setting-the-environment-for-your-builds
No environment variables with visibility "Plain text" and "Sensitive" found for the "production" environment on EAS.



The field "cli.appVersionSource" is not set, but it will be required in the future. Learn more: https://docs.expo.dev/build-reference/app-versions/
✔ Using remote iOS credentials (Expo server)

If you provide your Apple account credentials we will be able to generate all necessary build credentials and fully validate them.
This is optional, but without Apple account access you will need to provide all the missing values manually and we can only run minimal validation on them.
Input is required, but stdin is not readable. Failed to display prompt: Do you want to log in to your Apple account? to create Build 5.
        4.  If this fails, the user MUST provide a screenshot of the App Information page in App Store Connect to eliminate any ambiguity.
     - **Why fix this issue and what will be achieved with the fix?**: This is the ultimate goal of the entire session. Without a successful build, the app cannot be tested or released.
     - **Status**: IN PROGRESS
     - **Is recurring issue?**: Y
     - **Should Test frontend/backend/both after fix?**: User will test the resulting build on TestFlight.
     - **Blocked on other issue**: None

  - **Issue 2: Persistent Ngrok Tunnel Instability (P1)**
     - **Attempted fixes**:
        1.  Killed orphaned  and  processes. This worked temporarily.
        2.  Changed the tunnel subdomain name in . This did not work.
        3.  Called the , which confirmed orphaned processes but couldn't provide a permanent solution.
     - **Next debug checklist**:
        1.  This appears to be an environment-level issue, possibly related to how ngrok sessions are managed in the container.
        2.  A potential next step is to try running Expo without the tunnel ([08:30:31] Starting project at /app/frontend) if a local development setup with a connected device is possible, though this may not be supported by the environment.
        3.  Given the priority of the iOS build, it may be best to IGNORE the local Expo Go instability and focus solely on getting a working TestFlight build.
     - **Why fix this issue and what will be achieved with the fix?**: A stable local development environment would allow for much faster testing and debugging, preventing the build and pray cycle currently happening.
     - **Status**: IN PROGRESS
     - **Is recurring issue?**: Y
     - **Should Test frontend/backend/both after fix?**: Frontend
     - **Blocked on other issue**: None

  - **Issue 3: Original  login bug (P2)**
     - **Attempted fixes**: None. This issue was mentioned in the initial handover but was never prioritized.
     - **Next debug checklist**:
        1.  Attempt to log in as .
        2.  Check frontend console for errors.
        3.  Check backend logs (==> Press Ctrl-C to exit <==
obs/job_08a174e4-01f7-4c23-895f-7ed1f607413c HTTP/1.1" 200 OK
INFO:     10.64.162.77:59790 - "GET /api/chat/unread-count/app_25f6b16f32be HTTP/1.1" 200 OK
INFO:     10.64.162.77:59790 - "GET /api/profiles/worker/user_effi_gmail_com HTTP/1.1" 200 OK
INFO:     10.64.162.106:43714 - "GET /api/profiles/worker/user_effi_gmail_com/registration-status HTTP/1.1" 200 OK
INFO:     10.64.128.62:60956 - "GET /api/applications/worker/me HTTP/1.1" 200 OK
INFO:     10.64.128.62:60956 - "GET /api/applications/worker/me HTTP/1.1" 200 OK
INFO:     10.64.162.106:44282 - "GET /api/jobs/job_08a174e4-01f7-4c23-895f-7ed1f607413c HTTP/1.1" 200 OK
INFO:     10.64.128.9:34160 - "GET /api/chat/unread-count/app_25f6b16f32be HTTP/1.1" 200 OK
INFO:     10.64.162.77:48616 - "GET /api/profiles/worker/user_effi_gmail_com HTTP/1.1" 200 OK
INFO:     10.64.162.77:48616 - "GET /api/chat/unread-count/app_25f6b16f32be HTTP/1.1" 200 OK
INFO:     10.64.128.62:60956 - "GET /api/profiles/worker/user_effi_gmail_com/registration-status HTTP/1.1" 200 OK) for authentication failures or other errors related to this user.
     - **Why fix this issue and what will be achieved with the fix?**: Resolves a long-standing bug reported in a previous session.
     - **Status**: NOT STARTED
     - **Is recurring issue?**: Y
     - **Should Test frontend/backend/both after fix?**: Frontend
     - **Blocked on other issue**: Blocked by P0 and P1.

**In progress Task List**:
- There are no in-progress feature development tasks. All work is focused on fixing the critical build and environment issues.

**Upcoming and Future Tasks**
- There are no other upcoming tasks defined. The priority is to complete the iOS build and fix the pending issues.

**Completed work in this session**
- **Feature Implementation**:
  - Implemented the UI for employers to view worker qualification documents in .
  - Added a Job Created success modal in .
- **Critical Fixes**:
  - **Security**: Prevented house numbers from being displayed before a match in , , and  by modifying the  utility and adding conditional logic.
  - **Chat Functionality**: Fixed the no text in messages bug by normalizing data in  and removing buggy code from .
  - **Environment**: Corrected the  in  from a dead backup.dickie.app URL to the correct preview URL.
  - **Build**: Fixed a native iOS build crash by adding  to  to ensure  is included in the build.
  - **Build**: Replaced the old BACKUP app icon with the new qu.Jo logo and added a white background to prevent it from appearing black in the App Store.
- **Bug Fixes & UI/UX**:
  - Fixed the chat unread message badge by using  in  and .
  - Fixed transparent/unreadable chat bubbles in .
  - Fixed black backgrounds on employer screens ( and ).
  - Implemented a robust back button in the chat screen that falls back to the matches screen to prevent  errors.
  - Improved the UX of the  component with better placeholder text and instructions.
  - Restyled the Zum Chat button on the worker matches screen to be a solid pink button.
- **App Health & Cleanup**:
  - Generated and set a secure  in .
  - Ran  to resolve dependency mismatches.
  - Removed numerous old  files.
  - Reduced  statements from over 200 to ~80.

**Earlier issues found/mentioned but not fixed**
   - **Issue 1:  login bug**
     - **Debug checklist**: Attempt login, check frontend console and backend logs for auth errors.
     - **Why to solve this issue and what will be achieved with this?**: To resolve an outstanding user-reported bug from a previous session.
     - **Should Test frontend/backend/both after fix?**: Frontend
     - **Is recurring issue?**: Y

**Known issue recurrence from previous fork**
  - **Issue recurrence in previous fork**: The original handover mentioned a  login bug.
  - **Recurrence count**: 1 (it has persisted through this entire session without being addressed).
  - **Status**: NOT STARTED

**Code Architecture**
hideHouseNumber

**Key Technical Concepts**
- **EAS Build System**: The core of the final part of the session. Deeply involved  and  configuration, including wrestling with , , , , and .
- **iOS Native Build Errors**: Encountered and fixed critical native build issues that don't appear in Expo Go, such as the  font failing to be bundled, which was solved with .
- **Ngrok Tunnel Conflicts**: A persistent environmental issue () causing the Expo development server to hang. This highlights the difference between the local dev environment and the production build.
- **Data Normalization**: The clean fix for the chat was to normalize the data structure in the data layer () rather than adding defensive checks in the UI layer. This is a key architectural pattern.
- **Conditional Logic for Security**: The solution to the house number security flaw involved adding conditional logic to show/hide data based on the user's state (i.e., ), a critical pattern for sensitive information.

**All files of reference**
- : The most critical file for the next build attempt. Must be 100% correct.
- : The second most critical file, defining the build and submit process.
- : Source of API URLs and the ngrok tunnel name, which is a source of instability.
- : The site of the most persistent and difficult-to-debug bug of the session.
- : Contains the correct architectural fix for the chat data issue.

**Critical Info for New Agent**
- **DO NOT TRUST THE LOCAL PREVIEW (WHITE SCREEN)**. The ngrok tunnel is extremely unstable. A white screen locally does NOT necessarily mean the build is broken. The  font error, however, was a real issue that appeared in both local preview and the TestFlight build.
- **BUILD CONFIGURATION IS THE MAIN ENEMY**. The user is providing build parameters (like bundle ID) that have been changing. You must get explicit confirmation of the **EXACT**  from their App Store Connect account before starting a new build. The last given value was .
- **THE USER IS BUILDING THE APP**. Your role is to provide the correct code and configuration, and then instruct the user on the terminal commands to run (Unexpected argument: ...
See more help with --help). You will need to debug the output of these commands.
- **Builds are expensive (time-wise)**. Double and triple-check all configurations before instructing the user to start a build. Each attempt takes a long time.
- **The  bug is still pending**. Do not forget it once the app is successfully deployed to TestFlight.

**documents created in this job**
- None.

**Last 10 User Messages and any pending user messages**
1.  **User**: Confirms the build is queued for ~40 minutes.
2.  **User**: Reports the build failed with a  error.
3.  **Agent**: Correctly diagnoses the bundle ID mismatch and changes it back to .
4.  **User**: Warns the agent to stop before building, as the local preview URL shows a white screen.
5.  **User**: Uploads a screenshot from Expo Go showing a critical  error.
6.  **Agent**: Acknowledges this is a critical error in the build itself and prepares a fix (Build 5).
7.  **User**: Reports a new local error: .
8.  **User**: Asks for confirmation that all IDs and configurations match before starting the next build.
9.  **User**: States the bundle ID in the App Store is . This contradicts previous info.
10. **User**: Shows a new screenshot of the build failing, this time saying  doesn't exist. This is the current point of confusion.

**Project Health Check:**
- **Broken**:
  - The local development environment (Expo Go via ngrok tunnel) is fundamentally broken and unreliable.
  - The iOS build pipeline is broken due to a misconfiguration of the .
- **Mocked**: None.

**3rd Party Integrations**
- None identified.

**Testing status**
  - Testing agent used after significant changes: NO
  - Troubleshoot agent used after agent stuck in loop: YES (Used multiple times for the ngrok tunnel issue).
  - Test files created: None.
  - Known regressions: Several UI bugs (black screens) and the chat functionality broke and were fixed multiple times. The ngrok tunnel instability is a recurring regression.

**Credentials to test flow:**
- Worker:  / 
- Employer: The user has an account  which is a private employer. Other employer accounts exist but credentials are not explicitly stated.

**What agent forgot to execute**
- The agent never investigated or attempted to fix the  login bug mentioned in the initial handover summary. It has been carried over as a pending task for two full sessions.
</analysis>
